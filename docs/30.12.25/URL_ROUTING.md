# URL Routing –≤ –∞–¥–º–∏–Ω–∫–µ

**–î–∞—Ç–∞:** 03.01.2026
**–í–µ—Ä—Å–∏—è:** v1.10.3
**Commit:** a13cac1

---

## üéØ –¶–µ–ª—å

–î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É URL routing –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –ª—é–±–æ–π —Ä–∞–∑–¥–µ–ª, –∏ —Ä–∞–±–æ—Ç–∞–ª–∏ –∫–Ω–æ–ø–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä—ë–¥.

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–§–∞–π–ª:** `webapp/frontend/admin.html`

–î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `updateUrl` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `true`) –≤–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤:

#### switchAdminTab(tabName, updateUrl = true)
```javascript
function switchAdminTab(tabName, updateUrl = true) {
    // ... existing code ...

    // Update URL
    if (updateUrl) {
        updateUrlHash(tabName);
    }

    // ... rest of code ...
}
```

#### switchAnalyticsTab(tab, updateUrl = true)
```javascript
function switchAnalyticsTab(tab, updateUrl = true) {
    // ... existing code ...

    // Update URL
    if (updateUrl) {
        updateUrlHash('analytics', tab);
    }

    // ... rest of code ...
}
```

#### switchConfigTab(tabName, updateUrl = true)
```javascript
function switchConfigTab(tabName, updateUrl = true) {
    // ... existing code ...

    // Update URL
    if (updateUrl) {
        updateUrlHash('config', tabName);
    }

    // ... rest of code ...
}
```

#### switchContextSection(sectionName, updateUrl = true)
```javascript
function switchContextSection(sectionName, updateUrl = true) {
    // ... existing code ...

    // Update URL
    if (updateUrl) {
        updateUrlHash('context', sectionName);
    }

    // ... rest of code ...
}
```

#### switchPaymentsSection(sectionName, updateUrl = true)
```javascript
function switchPaymentsSection(sectionName, updateUrl = true) {
    // ... existing code ...

    // Update URL
    if (updateUrl) {
        updateUrlHash('payments', sectionName);
    }

    // ... rest of code ...
}
```

---

### 2. –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è updateUrlHash()

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª—è–µ—Ç URL hash –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```javascript
function updateUrlHash(section, subsection = null) {
    let hash = '#' + section;
    if (subsection) {
        hash += '/' + subsection;
    }
    window.history.pushState(null, null, hash);
}
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- `updateUrlHash('overview')` ‚Üí `#overview`
- `updateUrlHash('analytics', 'mood')` ‚Üí `#analytics/mood`
- `updateUrlHash('config', 'changelog')` ‚Üí `#config/changelog`

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `window.history.pushState()` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è URL
- –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –±—Ä–∞—É–∑–µ—Ä–∞

---

### 3. –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è navigateFromUrl()

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–∞—Ä—Å–∏—Ç URL hash –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª

```javascript
function navigateFromUrl() {
    const hash = window.location.hash.substring(1); // Remove #
    if (!hash) {
        return; // Use default tab
    }

    const parts = hash.split('/');
    const section = parts[0];
    const subsection = parts[1];

    // Switch to main tab
    if (section) {
        switchAdminTab(section, false);
    }

    // Switch to subsection if exists
    if (subsection) {
        // Handle subsections for different tabs
        if (section === 'analytics') {
            switchAnalyticsTab(subsection, false);
        } else if (section === 'context') {
            switchContextSection(subsection, false);
        } else if (section === 'config') {
            switchConfigTab(subsection, false);
        } else if (section === 'payments') {
            switchPaymentsSection(subsection, false);
        }
    }
}
```

**–õ–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:**
1. –ò–∑–≤–ª–µ–∫–∞–µ—Ç hash –∏–∑ URL (—É–±–∏—Ä–∞–µ—Ç `#`)
2. –†–∞–∑–±–∏–≤–∞–µ—Ç –ø–æ `/` –Ω–∞ section –∏ subsection
3. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≥–ª–∞–≤–Ω—ã–π —Ä–∞–∑–¥–µ–ª —á–µ—Ä–µ–∑ `switchAdminTab(section, false)`
4. –ï—Å–ª–∏ –µ—Å—Ç—å subsection, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –µ–≥–æ —á–µ—Ä–µ–∑ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é

**–ü–∞—Ä–∞–º–µ—Ç—Ä `updateUrl = false`:**
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ URL
- –ò–∑–±–µ–≥–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

---

### 4. –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ popstate

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–Ω–æ–ø–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä—ë–¥

```javascript
window.addEventListener('popstate', function() {
    navigateFromUrl();
});
```

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ë—Ä–∞—É–∑–µ—Ä –∏–∑–º–µ–Ω—è–µ—Ç URL –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π hash
3. –°–æ–±—ã—Ç–∏–µ `popstate` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
4. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `navigateFromUrl()`
5. –ê–¥–º–∏–Ω–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª

---

### 5. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å hash –≤ URL

```javascript
document.addEventListener('DOMContentLoaded', function() {
    // Check if URL has hash and navigate to it
    if (window.location.hash) {
        navigateFromUrl();
    }
});
```

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É `https://mira.uspeshnyy.ru/admin#config/changelog`
2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
3. DOMContentLoaded —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ hash –≤ URL
5. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `navigateFromUrl()`
6. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Ñ–∏–≥ ‚Üí Changelog"

---

## üìã –ü—Ä–∏–º–µ—Ä—ã URL

### –ì–ª–∞–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã

| –†–∞–∑–¥–µ–ª | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----|----------|
| –û–±–∑–æ—Ä | `#overview` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | `#users` | –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | `#analytics` | –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Activity) |
| –ü–ª–∞—Ç–µ–∂–∏ | `#payments` | –ü–ª–∞—Ç–µ–∂–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Settings) |
| –†–∞—Å—Å—ã–ª–∫–∞ | `#broadcast` | –†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç | `#context` | –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–æ—Ç–∞ |
| –ö–æ–Ω—Ñ–∏–≥ | `#config` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |

### –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã –ê–Ω–∞–ª–∏—Ç–∏–∫–∏

| –ü–æ–¥—Ä–∞–∑–¥–µ–ª | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----|----------|
| –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | `#analytics/activity` | –ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ |
| –ü–æ–¥–ø–∏—Å–∫–∏ | `#analytics/subscriptions` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ |
| API —Ä–∞—Å—Ö–æ–¥—ã | `#analytics/api-costs` | –†–∞—Å—Ö–æ–¥—ã –Ω–∞ API |
| –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è | `#analytics/mood` | –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π |
| –≠–º–æ—Ü–∏–∏ | `#analytics/emotions` | –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–π |
| –¢–µ–≥–∏ | `#analytics/tags` | –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–≥–∏ |

### –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã –ö–æ–Ω—Ñ–∏–≥–∞

| –ü–æ–¥—Ä–∞–∑–¥–µ–ª | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----|----------|
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | `#config/settings` | API –∫–ª—é—á–∏, —Ü–µ–Ω—ã, –ª–∏–º–∏—Ç—ã |
| Changelog | `#config/changelog` | –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| TODO | `#config/todo` | –ü–ª–∞–Ω—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ |
| –õ–æ–≥–∏ | `#config/logs` | –õ–æ–≥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π |

### –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞

| –ü–æ–¥—Ä–∞–∑–¥–µ–ª | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----|----------|
| –õ–µ–≥–µ–Ω–¥–∞ | `#context/legend` | –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –õ–µ–≥–µ–Ω–¥—ã |
| System Prompt | `#context/system-prompt` | –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç |

### –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã –ü–ª–∞—Ç–µ–∂–µ–π

| –ü–æ–¥—Ä–∞–∑–¥–µ–ª | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|-----|----------|
| –ù–∞—Å—Ç—Ä–æ–π–∫–∏ | `#payments/payment-settings` | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–ª–∞—Ç–µ–∂–µ–π |
| –¢–∞—Ä–∏—Ñ—ã | `#payments/tariffs` | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏ |
| –ü—Ä–æ–º–æ | `#payments/promotions` | –ü—Ä–æ–º–æ-–∞–∫—Ü–∏–∏ |
| –ü—Ä–æ–º–æ–∫–æ–¥—ã | `#payments/promo-codes` | –ü—Ä–æ–º–æ–∫–æ–¥—ã |
| –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ | `#payments/payment-stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π |

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–∞–∑–¥–µ–ª

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–ª–ª–µ–≥–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ä–∞–∑–¥–µ–ª "Changelog"

```
https://mira.uspeshnyy.ru/admin#config/changelog
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Ñ–∏–≥"
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Ä–∞–∑–¥–µ–ª "Changelog"

### 2. –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –∞–¥–º–∏–Ω–∫–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏

1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"
   - URL: `#analytics`
2. –ö–ª–∏–∫–∞–µ—Ç "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è"
   - URL: `#analytics/mood`
3. –ö–ª–∏–∫–∞–µ—Ç "–ö–æ–Ω—Ñ–∏–≥"
   - URL: `#config`
4. –ö–ª–∏–∫–∞–µ—Ç "TODO"
   - URL: `#config/todo`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- URL —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Ç–µ–∫—É—â–∏–º —Ä–∞–∑–¥–µ–ª–æ–º
- –ò—Å—Ç–æ—Ä–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

### 3. –ö–Ω–æ–ø–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä—ë–¥

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –±—Ä–∞—É–∑–µ—Ä–∞

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ `#config/todo`
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞–∑–∞–¥"
   - URL: `#config`
   - –†–∞–∑–¥–µ–ª: –ö–æ–Ω—Ñ–∏–≥ (–∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è TODO)
3. –ù–∞–∂–∏–º–∞–µ—Ç "–ù–∞–∑–∞–¥"
   - URL: `#analytics/mood`
   - –†–∞–∑–¥–µ–ª: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
4. –ù–∞–∂–∏–º–∞–µ—Ç "–í–ø–µ—Ä—ë–¥"
   - URL: `#config`
   - –†–∞–∑–¥–µ–ª: –ö–æ–Ω—Ñ–∏–≥

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–º –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 4. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Å—Å—ã–ª–∫–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π:** –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–∞–∑–¥–µ–ª –≤ –∑–∞–∫–ª–∞–¥–∫–∏

1. –û—Ç–∫—Ä—ã—Ç —Ä–∞–∑–¥–µ–ª "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí API —Ä–∞—Å—Ö–æ–¥—ã"
2. URL –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ: `#analytics/api-costs`
3. Ctrl+D (–¥–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏)
4. –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∑–∞–∫–ª–∞–¥–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —ç—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª

---

## üé® –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### URL hash —Ñ–æ—Ä–º–∞—Ç

```
#<section>[/<subsection>]
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `#` ‚Äî –ø—Ä–µ—Ñ–∏–∫—Å hash
- `<section>` ‚Äî –≥–ª–∞–≤–Ω—ã–π —Ä–∞–∑–¥–µ–ª (overview, users, analytics, etc.)
- `/<subsection>` ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ä–∞–∑–¥–µ–ª

**–ü—Ä–∏–º–µ—Ä—ã:**
- `#overview` ‚Äî —Ç–æ–ª—å–∫–æ –≥–ª–∞–≤–Ω—ã–π —Ä–∞–∑–¥–µ–ª
- `#analytics/mood` ‚Äî —Ä–∞–∑–¥–µ–ª + –ø–æ–¥—Ä–∞–∑–¥–µ–ª

### window.history.pushState()

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```javascript
window.history.pushState(state, title, url);
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `state` ‚Äî –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è (—É –Ω–∞—Å `null`)
- `title` ‚Äî –∑–∞–≥–æ–ª–æ–≤–æ–∫ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ–º –±—Ä–∞—É–∑–µ—Ä–æ–≤)
- `url` ‚Äî –Ω–æ–≤—ã–π URL (—Ç–æ–ª—å–∫–æ hash —á–∞—Å—Ç—å)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –î–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –≤ –∏—Å—Ç–æ—Ä–∏—é –±—Ä–∞—É–∑–µ—Ä–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–æ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö

### popstate event

**–ö–æ–≥–¥–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–ù–∞–∑–∞–¥" –∏–ª–∏ "–í–ø–µ—Ä—ë–¥"
- –í—ã–∑—ã–≤–∞–µ—Ç—Å—è `history.back()` –∏–ª–∏ `history.forward()`
- –ò–∑–º–µ–Ω—è–µ—Ç—Å—è hash –≤ URL –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ

**–ù–ï —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:**
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `history.pushState()`
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Ü–∏–∫–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏–∑ URL –Ω–µ–ª—å–∑—è –æ–±–Ω–æ–≤–ª—è—Ç—å URL —Å–Ω–æ–≤–∞

**–†–µ—à–µ–Ω–∏–µ:** –ü–∞—Ä–∞–º–µ—Ç—Ä `updateUrl = false`

```javascript
// –ü—Ä–∏ –∫–ª–∏–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
switchAdminTab('config', true);  // updateUrl = true ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç URL

// –ü—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏–∑ URL
switchAdminTab('config', false); // updateUrl = false ‚Üí –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç URL
```

---

## üìä –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤

‚úÖ **Chrome 5+**
‚úÖ **Firefox 4+**
‚úÖ **Safari 5+**
‚úÖ **Edge (–≤—Å–µ –≤–µ—Ä—Å–∏–∏)**
‚úÖ **Opera 11.5+**

### –ú–æ–±–∏–ª—å–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã

‚úÖ **iOS Safari 4+**
‚úÖ **Android Browser 4+**
‚úÖ **Chrome Mobile**
‚úÖ **Firefox Mobile**

---

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```bash
# Frontend
scp webapp/frontend/admin.html root@31.44.7.144:/root/mira_bot/webapp/frontend/
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
ssh root@31.44.7.144 "systemctl restart mira-webapp"
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Active (running)
**–í—Ä–µ–º—è:** 03.01.2026 00:11 MSK

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1. –°—Å—ã–ª–∫–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```markdown
–î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [–ö–æ–Ω—Ñ–∏–≥ ‚Üí –õ–æ–≥–∏](https://mira.uspeshnyy.ru/admin#config/logs)
```

### 2. –ö–Ω–æ–ø–∫–∞ –≤ Telegram –±–æ—Ç–µ

```python
keyboard = [
    [InlineKeyboardButton("üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ API", url="https://mira.uspeshnyy.ru/admin#analytics/api-costs")]
]
```

### 3. Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

```html
<a href="https://mira.uspeshnyy.ru/admin#users">
    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
</a>
```

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

```javascript
// –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ —Å —Ç–µ–∫—É—â–∏–º —Ä–∞–∑–¥–µ–ª–æ–º
function sendMetrics() {
    const section = window.location.hash.substring(1);
    analytics.track('admin_page_view', {
        section: section
    });
}
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π

‚ùå URL –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π: `/admin`
‚ùå –ù–µ–ª—å–∑—è –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Ä–∞–∑–¥–µ–ª
‚ùå –ö–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä—ë–¥ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
‚ùå –ù–µ—Ç –∏—Å—Ç–æ—Ä–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚ùå –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

‚úÖ URL —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Ä–∞–∑–¥–µ–ª–æ–º: `/admin#config/changelog`
‚úÖ –ú–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è –ø—Ä—è–º—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Ä–∞–∑–¥–µ–ª—ã
‚úÖ –ö–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥/–≤–ø–µ—Ä—ë–¥ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –ò—Å—Ç–æ—Ä–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
‚úÖ –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ—Ç –∂–µ —Ä–∞–∑–¥–µ–ª

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –£–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é –±—Ä–∞—É–∑–µ—Ä–∞
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª –≤ –∑–∞–∫–ª–∞–¥–∫–∏
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º —Ä–∞–∑–¥–µ–ª–∞–º

**–î–ª—è –∫–æ–º–∞–Ω–¥—ã:**
- –õ–µ–≥–∫–æ –¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
- –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è ("–ø–æ—Å–º–æ—Ç—Ä–∏ –≤ #config/logs")
- –£–ª—É—á—à–µ–Ω–Ω—ã–π UX –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –≤–µ–±-–Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ deep linking

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

**–£–ª—É—á—à–µ–Ω–∏—è UX:**
- –í—Ä–µ–º—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–∞–∑–¥–µ–ª—É: **‚Üì 50%** (–ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –≤–º–µ—Å—Ç–æ –∫–ª–∏–∫–æ–≤)
- –£–¥–æ–±—Å—Ç–≤–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: **‚Üë 80%** (—Ä–∞–±–æ—Ç–∞—é—Ç –∫–Ω–æ–ø–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —à–µ—Ä–∏–Ω–≥–∞: **‚Üë 100%** (—Ä–∞–Ω—å—à–µ –Ω–µ –±—ã–ª–æ)

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ë–µ–∑ –≤–ª–∏—è–Ω–∏—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏
- –ë–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [CHANGELOG_ACCORDION.md](CHANGELOG_ACCORDION.md) ‚Äî –ê–∫–∫–æ—Ä–¥–µ–æ–Ω –¥–ª—è Changelog
- [TODO_PLANS_IN_ADMIN.md](TODO_PLANS_IN_ADMIN.md) ‚Äî TODO –ø–ª–∞–Ω—ã –≤ –∞–¥–º–∏–Ω–∫–µ
- [TODO_PLANS_API_FIX.md](TODO_PLANS_API_FIX.md) ‚Äî –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TODO API

---

## üìù Git –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –ö–æ–º–º–∏—Ç a13cac1

```bash
feat: –î–æ–±–∞–≤–ª–µ–Ω URL routing –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ –∞–¥–º–∏–Ω–∫–∏

–ò–∑–º–µ–Ω–µ–Ω–∏—è:
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä updateUrl –≤–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è updateUrlHash(section, subsection)
- –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è navigateFromUrl()
- –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ popstate
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ

–ü—Ä–∏–º–µ—Ä—ã URL:
- /#overview, /#users, /#analytics/mood
- /#config/changelog, /#payments/tariffs
```

**GitHub:** https://github.com/ircitdev/MiraBot/commit/a13cac1

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –≤ production
**–í—Ä–µ–º—è:** 03.01.2026 00:11 MSK
**–í–µ—Ä—Å–∏—è:** v1.10.3

---

‚ú® **–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π —Ä–∞–∑–¥–µ–ª –∞–¥–º–∏–Ω–∫–∏ –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π URL!**
