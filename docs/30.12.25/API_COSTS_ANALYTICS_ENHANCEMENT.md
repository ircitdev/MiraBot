# –£–ª—É—á—à–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ API

**–î–∞—Ç–∞:** 30.12.2025
**–ó–∞–¥–∞—á–∞:** –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏, –¥–∞—Ç–∞–º–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üéØ –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### 1. –ù–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

**–ë—ã–ª–æ:** 3 –∫–∞—Ä—Ç–æ—á–∫–∏ (–í—Å–µ–≥–æ, –¢–æ–∫–µ–Ω—ã, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)

**–°—Ç–∞–ª–æ:** 5 –∫–∞—Ä—Ç–æ—á–µ–∫
- –í—Å–µ–≥–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ
- –í—Å–µ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤
- –£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Claude API** (–Ω–æ–≤–∞—è) - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ Claude
- **Yandex TTS** (–Ω–æ–≤–∞—è) - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ Yandex (TTS + STT)

### 2. –ù–æ–≤–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è - –î–≤–∞ –≥—Ä–∞—Ñ–∏–∫–∞ —Ä—è–¥–æ–º

#### –õ–µ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫: –î–∏–Ω–∞–º–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ (Line Chart)
**–ë—ã–ª–æ:** Stacked bar chart (—Å—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –Ω–∞–ª–æ–∂–µ–Ω–∏–µ–º)

**–°—Ç–∞–ª–æ:** Line chart (–ª–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫) —Å –ø–ª–∞–≤–Ω—ã–º–∏ –∫—Ä–∏–≤—ã–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É
- –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ü–ª–∞–≤–Ω—ã–µ –∫—Ä–∏–≤—ã–µ (tension: 0.4)
- –ó–∞–ª–∏–≤–∫–∞ –ø–æ–¥ –≥—Ä–∞—Ñ–∏–∫–æ–º —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é

**–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏ —Ü–≤–µ—Ç–∞:**
- Claude: —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π (#8B5CF6)
- Yandex TTS: –∫—Ä–∞—Å–Ω—ã–π (#EF4444)
- Yandex STT: –æ—Ä–∞–Ω–∂–µ–≤—ã–π (#F97316)
- OpenAI: —Å–∏–Ω–∏–π (#3B82F6)

#### –ü—Ä–∞–≤—ã–π –≥—Ä–∞—Ñ–∏–∫: –ü–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º (Pie Chart)
**–ù–æ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫!**

–ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—â–∞—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏:
- –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ
- –ê–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ USD
- –¢–µ –∂–µ —Ü–≤–µ—Ç–∞ —á—Ç–æ –∏ –Ω–∞ –ª–∏–Ω–µ–π–Ω–æ–º –≥—Ä–∞—Ñ–∏–∫–µ
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### 3. –¢–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–∞—Å—Ö–æ–¥–∞–º

**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞!**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–∞—Å—Ö–æ–¥–∞–º API:

| # | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | Telegram ID | –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –¢–æ–∫–µ–Ω—ã | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|---|-------------|------------|-----------|--------|-----------|
| 1 | –ù–∞—Å—Ç—è | 620828717 | Claude | 125,432 | $0.4521 |
| 2 | –ê–ª–µ–∫—Å | 1392513515 | Claude | 98,765 | $0.3542 |

**–î–∞–Ω–Ω—ã–µ:**
- –†–µ–π—Ç–∏–Ω–≥ (1-10)
- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (display_name –∏–ª–∏ first_name)
- Telegram ID
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä —Å —Ü–≤–µ—Ç–Ω—ã–º –±—ç–¥–∂–µ–º
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
- –û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/api/admin/api-costs/top-users?from_date=...&to_date=...&limit=10`

### 4. –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–ù–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π!**

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏:

| –î–∞—Ç–∞ | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –ú–æ–¥–µ–ª—å | –¢–æ–∫–µ–Ω—ã –≤—Ö–æ–¥ | –¢–æ–∫–µ–Ω—ã –≤—ã—Ö–æ–¥ | –í—Å–µ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|------|-------------|-----------|--------|-------------|--------------|---------------|-----------|
| 30.12, 05:39 | –ù–∞—Å—Ç—è | Claude | claude-3-5-sonnet | 4,523 | 1,234 | 5,757 | $0.0245 |

**–î–∞–Ω–Ω—ã–µ:**
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è (–¥–µ–Ω—å.–º–µ—Å—è—Ü, —á–∞—Å:–º–∏–Ω—É—Ç–∞)
- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä —Å —Ü–≤–µ—Ç–Ω—ã–º –±—ç–¥–∂–µ–º
- –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ (–º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç)
- –í—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- –í—ã—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- –í—Å–µ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤
- –°—Ç–æ–∏–º–æ—Å—Ç—å –≤ USD

**–ü–∞–≥–∏–Ω–∞—Ü–∏—è:**
- 50 –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ö–Ω–æ–ø–∫–∏ "‚Üê –ü—Ä–µ–¥—ã–¥—É—â–∞—è" –∏ "–°–ª–µ–¥—É—é—â–∞—è ‚Üí"
- –¢–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

**–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `/api/admin/api-costs?from_date=...&to_date=...&limit=50&offset=...`

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

#### 1. `loadApiProvidersChart(days)`
```javascript
async function loadApiProvidersChart(days = 30) {
    // –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
    // –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ api-claude-cost –∏ api-yandex-cost
    // –°–æ–∑–¥–∞—ë—Ç pie chart –Ω–∞ canvas api-providers-chart
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –¥–∞—Ç–∞–º `/api-costs/by-date`
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Ä–∞—Å—Ö–æ–¥—ã –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- –û–±–Ω–æ–≤–ª—è–µ—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ Claude –∏ Yandex
- –†–∏—Å—É–µ—Ç –∫—Ä—É–≥–æ–≤—É—é –¥–∏–∞–≥—Ä–∞–º–º—É

#### 2. `loadApiTopUsers(days)`
```javascript
async function loadApiTopUsers(days = 30) {
    // –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    // –†–µ–Ω–¥–µ—Ä–∏—Ç —Ç–∞–±–ª–∏—Ü—É –≤ api-top-users-container
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ `/api-costs/top-users?limit=10`
- –§–æ—Ä–º–∏—Ä—É–µ—Ç HTML —Ç–∞–±–ª–∏—Ü—É
- –î–æ–±–∞–≤–ª—è–µ—Ç —Ü–≤–µ—Ç–Ω—ã–µ –±—ç–¥–∂–∏ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### 3. `loadApiCostsDetails(page)`
```javascript
async function loadApiCostsDetails(page = 1) {
    // –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    // –†–µ–Ω–¥–µ—Ä–∏—Ç —Ç–∞–±–ª–∏—Ü—É —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
}
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π `/api-costs?limit=50&offset=...`
- –§–æ—Ä–º–∏—Ä—É–µ—Ç HTML —Ç–∞–±–ª–∏—Ü—É —Å –¥–µ—Ç–∞–ª—è–º–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –î–æ–±–∞–≤–ª—è–µ—Ç –∫–Ω–æ–ø–∫–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

#### 4. –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è `changeApiCostsPeriod(days)`
```javascript
function changeApiCostsPeriod(days) {
    // –¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç –í–°–ï –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ
    loadApiCostsChart(days);
    loadApiProvidersChart(days);
    loadApiTopUsers(days);
    loadApiCostsDetails(1);
}
```

**–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**
- –†–∞–Ω—å—à–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è —Ç–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫
- –¢–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤—Å–µ 4 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö

#### `loadApiCostsChart()` - –ò–∑–º–µ–Ω—ë–Ω —Ç–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞

**–ë—ã–ª–æ:**
```javascript
type: 'bar',
datasets: [{
    backgroundColor: color,
    borderWidth: 0,
}]
scales: {
    x: { stacked: true },
    y: { stacked: true }
}
```

**–°—Ç–∞–ª–æ:**
```javascript
type: 'line',
datasets: [{
    borderColor: color,
    backgroundColor: color + '20', // –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
    borderWidth: 2,
    fill: true,
    tension: 0.4, // –ø–ª–∞–≤–Ω—ã–µ –∫—Ä–∏–≤—ã–µ
}]
scales: {
    x: {},
    y: { beginAtZero: true }
}
```

### –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏

–í —Ñ—É–Ω–∫—Ü–∏–∏ `switchAnalyticsSection()` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```javascript
else if (tab === 'api-costs' && !apiCostsChart) {
    loadApiCostsChart(currentApiCostsPeriod);
    loadApiProvidersChart(currentApiCostsPeriod);  // –ù–æ–≤–æ–µ
    loadApiTopUsers(currentApiCostsPeriod);         // –ù–æ–≤–æ–µ
    loadApiCostsDetails(1);                         // –ù–æ–≤–æ–µ
}
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ HTML

### –î–≤–∞ –≥—Ä–∞—Ñ–∏–∫–∞ –≤ –¥–≤–µ –∫–æ–ª–æ–Ω–∫–∏

```html
<div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
    <div class="chart-container">
        <h3>–î–∏–Ω–∞–º–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
        <canvas id="api-costs-chart"></canvas>
    </div>
    <div class="chart-container" style="max-width: 400px;">
        <h3>–ü–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º</h3>
        <canvas id="api-providers-chart"></canvas>  <!-- –ù–æ–≤—ã–π -->
    </div>
</div>
```

**–ü—Ä–æ–ø–æ—Ä—Ü–∏–∏:**
- –õ–µ–≤—ã–π –≥—Ä–∞—Ñ–∏–∫: 2fr (2/3 —à–∏—Ä–∏–Ω—ã)
- –ü—Ä–∞–≤—ã–π –≥—Ä–∞—Ñ–∏–∫: 1fr (1/3 —à–∏—Ä–∏–Ω—ã, –º–∞–∫—Å 400px)

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü

```html
<!-- –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
<div id="api-top-users-container"></div>

<!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<div id="api-costs-details-container"></div>
```

## üé® –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

| –ü—Ä–æ–≤–∞–π–¥–µ—Ä | –¶–≤–µ—Ç | Hex |
|-----------|------|-----|
| Claude | –§–∏–æ–ª–µ—Ç–æ–≤—ã–π | #8B5CF6 |
| Yandex TTS | –ö—Ä–∞—Å–Ω—ã–π | #EF4444 |
| Yandex STT | –û—Ä–∞–Ω–∂–µ–≤—ã–π | #F97316 |
| OpenAI | –°–∏–Ω–∏–π | #3B82F6 |

### –ë—ç–¥–∂–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

```html
<!-- Claude -->
<span style="background: #8B5CF6; color: white; padding: 2px 8px; border-radius: 4px;">Claude</span>

<!-- Yandex TTS -->
<span style="background: #EF4444; color: white; padding: 2px 8px; border-radius: 4px;">Yandex TTS</span>
```

## üìã –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥
```
GET /api/admin/api-costs/stats?from_date=2025-12-01&to_date=2025-12-30
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
{
    "total_cost": 5.49,
    "total_tokens": 1234567,
    "unique_users": 42
}
```

### 2. –†–∞—Å—Ö–æ–¥—ã –ø–æ –¥–∞—Ç–∞–º
```
GET /api/admin/api-costs/by-date?from_date=2025-12-01&to_date=2025-12-30
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
[
    {
        "date": "2025-12-30",
        "provider": "claude",
        "total_cost": 0.45,
        "total_tokens": 12345
    }
]
```

### 3. –¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```
GET /api/admin/api-costs/top-users?from_date=2025-12-01&to_date=2025-12-30&limit=10
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
[
    {
        "telegram_id": 620828717,
        "display_name": "–ù–∞—Å—Ç—è",
        "first_name": "–ù–∞—Å—Ç—è",
        "provider": "claude",
        "total_tokens": 125432,
        "total_cost": 0.4521
    }
]
```

### 4. –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
```
GET /api/admin/api-costs?from_date=2025-12-01&to_date=2025-12-30&limit=50&offset=0
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:**
```json
[
    {
        "id": 1234,
        "telegram_id": 620828717,
        "provider": "claude",
        "model_name": "claude-3-5-sonnet-20241022",
        "input_tokens": 4523,
        "output_tokens": 1234,
        "total_tokens": 5757,
        "cost_usd": 0.0245,
        "created_at": "2025-12-30T05:39:12",
        "user": {
            "telegram_id": 620828717,
            "display_name": "–ù–∞—Å—Ç—è",
            "first_name": "–ù–∞—Å—Ç—è"
        }
    }
]
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
```
–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí –†–∞—Å—Ö–æ–¥—ã API
- 3 –∫–∞—Ä—Ç–æ—á–∫–∏ (–í—Å–µ–≥–æ, –¢–æ–∫–µ–Ω—ã, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- –û–¥–∏–Ω stacked bar chart
- –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- –ù–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
```
–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ ‚Üí –†–∞—Å—Ö–æ–¥—ã API
- 5 –∫–∞—Ä—Ç–æ—á–µ–∫ (+ Claude API, + Yandex TTS)
- –î–≤–∞ –≥—Ä–∞—Ñ–∏–∫–∞:
  - Line chart - –¥–∏–Ω–∞–º–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤
  - Pie chart - —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- –¢–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –¥–µ—Ç–∞–ª—è–º–∏
- –ü–æ–ª–Ω–∞—è –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
```

## ‚úÖ –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–§–∞–π–ª:** `webapp/frontend/admin.html`

**–ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:**
- **3989-4059:** –û–±–Ω–æ–≤–ª–µ–Ω–∞ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ–∫—Ü–∏–∏ API Costs
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–≤–µ –Ω–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏
  - –î–æ–±–∞–≤–ª–µ–Ω –≤—Ç–æ—Ä–æ–π canvas –¥–ª—è pie chart
  - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è —Ç–∞–±–ª–∏—Ü
- **10270-10274:** –ê–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏
- **10616-10627:** –£–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ä–∞—è `changeApiCostsPeriod`
- **10659-10722:** –ò–∑–º–µ–Ω—ë–Ω —Ç–∏–ø –≥—Ä–∞—Ñ–∏–∫–∞ —Å bar –Ω–∞ line
- **10739-10831:** –î–æ–±–∞–≤–ª–µ–Ω–∞ `loadApiProvidersChart()`
- **10833-10896:** –î–æ–±–∞–≤–ª–µ–Ω–∞ `loadApiTopUsers()`
- **10898-10988:** –î–æ–±–∞–≤–ª–µ–Ω–∞ `loadApiCostsDetails()`
- **10990-11005:** –ù–æ–≤–∞—è `changeApiCostsPeriod()` —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## üöÄ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

‚úÖ –§–∞–π–ª `admin.html` –∑–∞–≥—Ä—É–∂–µ–Ω
‚úÖ –í–µ–±-—Å–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω

## üìù –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: http://mira.uspeshnyy.ru/admin
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ê–Ω–∞–ª–∏—Ç–∏–∫–∞"
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É "–†–∞—Å—Ö–æ–¥—ã API"
4. –í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
   - ‚úÖ 5 –∫–∞—Ä—Ç–æ—á–µ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - ‚úÖ –î–≤–∞ –≥—Ä–∞—Ñ–∏–∫–∞ —Ä—è–¥–æ–º (–ª–∏–Ω–µ–π–Ω—ã–π + –∫—Ä—É–≥–æ–≤–æ–π)
   - ‚úÖ –¢–∞–±–ª–∏—Ü—É —Ç–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - ‚úÖ –î–µ—Ç–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–º–µ–Ω–∏—Ç—å –ø–µ—Ä–∏–æ–¥ (7 –¥–Ω–µ–π, 30 –¥–Ω–µ–π, 90 –¥–Ω–µ–π)
   - –î–æ–ª–∂–Ω—ã –æ–±–Ω–æ–≤–∏—Ç—å—Å—è –≤—Å–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã

## üéâ –ò—Ç–æ–≥

‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ API —Ç–µ–ø–µ—Ä—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è!**

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- üìä –ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
- üìà –õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ –¥–∏–Ω–∞–º–∏–∫–∏ (–≤–º–µ—Å—Ç–æ —Å—Ç–æ–ª–±—á–∞—Ç–æ–≥–æ)
- üë• –¢–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–∞—Å—Ö–æ–¥–∞–º
- üìã –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å–µ—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- üí∞ –û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è Claude –∏ Yandex

**–¢–µ–ø–µ—Ä—å –≤–∏–¥–Ω–æ:**
- –ö–∞–∫–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å–∫–æ–ª—å–∫–æ —Å—Ç–æ–∏—Ç (Claude vs Yandex)
- –ö—Ç–æ —Å–∞–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ö–æ–≥–¥–∞ –∏ –∫–∞–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å
- –°–∫–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω–æ–≤ –±—ã–ª–æ –ø–æ—Ç—Ä–∞—á–µ–Ω–æ
