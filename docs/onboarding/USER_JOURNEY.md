# User Journey ‚Äî –ü—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥

**–í–µ—Ä—Å–∏—è:** 2.0 (–ø–æ—Å–ª–µ —Ä–µ–¥–∏–∑–∞–π–Ω–∞)
**–î–∞—Ç–∞:** 17.01.2026
**–ê–≤—Ç–æ—Ä:** AI Assistant + Product Team

---

## üìñ –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –ú–∏—Ä–∞-–±–æ—Ç–∞ ‚Äî –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –∫–∞—Å–∞–Ω–∏—è –¥–æ –Ω–∞—á–∞–ª–∞ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.

**–¶–µ–ª—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:**
- –°–æ–±—Ä–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –¥–æ–≤–µ—Ä–∏–µ
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É –¥–∏–∞–ª–æ–≥—É
- –í—ã–¥–∞—Ç—å 3 –¥–Ω—è Premium –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**
- **–û–¥–∏–Ω —ç–∫—Ä–∞–Ω ‚Äî –æ–¥–Ω–∞ –º—ã—Å–ª—å ‚Äî –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ**
- **–≠–º–ø–∞—Ç–∏—è –≤–∞–∂–Ω–µ–µ –¥–∞–Ω–Ω—ã—Ö** ‚Äî –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ª—é–±–æ–π –±–ª–æ–∫
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ –≤—Å–µ–≥–æ** ‚Äî –∫—Ä–∏–∑–∏—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –≤—Å—Ç—Ä–æ–µ–Ω –≤ –∫–∞–∂–¥—ã–π —à–∞–≥

---

## üéØ –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è

**–û—Å–Ω–æ–≤–Ω–∞—è:**
- –ñ–µ–Ω—â–∏–Ω—ã 25-45 –ª–µ—Ç
- –ò—Å–ø—ã—Ç—ã–≤–∞—é—Ç —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ (—Ç—Ä–µ–≤–æ–≥–∞, –≤—ã–≥–æ—Ä–∞–Ω–∏–µ, –æ—Ç–Ω–æ—à–µ–Ω–∏—è)
- –ù–µ –≥–æ—Ç–æ–≤—ã –∏–¥—Ç–∏ –∫ –ø—Å–∏—Ö–æ–ª–æ–≥—É, –Ω–æ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –¶–µ–Ω—è—Ç –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å

**–ë–∞—Ä—å–µ—Ä—ã –ø—Ä–∏ –≤—Ö–æ–¥–µ:**
- –°—Ç—Ä–∞—Ö –æ—Å—É–∂–¥–µ–Ω–∏—è
- –ù–µ–∂–µ–ª–∞–Ω–∏–µ –¥–µ–ª–∏—Ç—å—Å—è –ª–∏—á–Ω—ã–º —Å—Ä–∞–∑—É
- –°–∫–µ–ø—Ç–∏—Ü–∏–∑–º –∫ –±–æ—Ç–∞–º ("–≠—Ç–æ –∂–µ –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∏–π —á–µ–ª–æ–≤–µ–∫")
- –ù–∏–∑–∫–∞—è –º–æ—Ç–∏–≤–∞—Ü–∏—è –∑–∞–ø–æ–ª–Ω—è—Ç—å –∞–Ω–∫–µ—Ç—ã

---

## üó∫Ô∏è –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

```mermaid
flowchart TD
    Start([–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç /start]) --> CheckCompleted{–û–Ω–±–æ—Ä–¥–∏–Ω–≥<br/>–∑–∞–≤–µ—Ä—à—ë–Ω?}

    CheckCompleted -->|–î–∞| WelcomeBack[–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ<br/>–ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫<br/>+<br/>–≤–æ–ø—Ä–æ—Å –æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏]
    CheckCompleted -->|–ù–µ—Ç| TimeGreeting[–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ<br/>–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ<br/>–ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫]

    WelcomeBack --> EndFlow([–ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–∏–∞–ª–æ–≥—É])

    TimeGreeting --> Intro[–Ø –ú–∏—Ä–∞ üíõ<br/>–Ø –∑–¥–µ—Å—å —á—Ç–æ–±—ã –≤—ã—Å–ª—É—à–∞—Ç—å]
    Intro --> AskName[–ö–∞–∫ –∫ —Ç–µ–±–µ<br/>–æ–±—Ä–∞—â–∞—Ç—å—Å—è?]
    AskName --> ReceiveName[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å<br/>–≤–≤–æ–¥–∏—Ç –∏–º—è]

    ReceiveName --> CrisisCheck1{–ö—Ä–∏–∑–∏—Å–Ω—ã–µ<br/>–º–∞—Ä–∫–µ—Ä—ã?}
    CrisisCheck1 -->|–î–∞ high/critical| EmergencyMsg1[–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ<br/>—Å–æ–æ–±—â–µ–Ω–∏–µ<br/>—Å —Ö–µ–ª–ø–ª–∞–π–Ω–æ–º]
    EmergencyMsg1 --> EndCrisis1([–í—ã—Ö–æ–¥ –∏–∑ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞<br/>‚Üí –∫—Ä–∏–∑–∏—Å–Ω—ã–π –¥–∏–∞–ª–æ–≥])

    CrisisCheck1 -->|–ù–µ—Ç| ConfirmName[–ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –∏–º—è:<br/>–∫–Ω–æ–ø–∫–∏ –î–∞/–ò–∑–º–µ–Ω–∏—Ç—å]
    ConfirmName --> ConfirmYes{–ü–æ–¥—Ç–≤–µ—Ä–¥–∏–ª?}

    ConfirmYes -->|–ò–∑–º–µ–Ω–∏—Ç—å| AskName
    ConfirmYes -->|–î–∞| Progress25[üåü‚≠ê‚≠ê‚≠ê 25%]

    Progress25 --> Privacy[–í—Å—ë —á—Ç–æ —Ç—ã —Å–∫–∞–∂–µ—à—å<br/>–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ üîí]
    Privacy --> AskProblem[–ß—Ç–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç<br/>–ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?<br/>–ö–Ω–æ–ø–∫–∏ —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏]

    AskProblem --> SelectProblem[–í—ã–±–æ—Ä –ø—Ä–æ–±–ª–µ–º—ã:<br/>—Ç—Ä–µ–≤–æ–≥–∞/–æ—Ç–Ω–æ—à–µ–Ω–∏—è/<br/>–≤—ã–≥–æ—Ä–∞–Ω–∏–µ/–≤–∏–Ω–∞/etc]
    SelectProblem --> Progress50[üåüüåü‚≠ê‚≠ê 50%]

    Progress50 --> AskSocial[–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ<br/>–≤–æ–∑—Ä–∞—Å—Ç/–≥–æ—Ä–æ–¥/<br/>—Ä–∞–±–æ—Ç–∞/—Ö–æ–±–±–∏<br/>–≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ]

    AskSocial --> ReceiveSocial[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å<br/>–≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç]
    ReceiveSocial --> CrisisCheck2{–ö—Ä–∏–∑–∏—Å–Ω—ã–µ<br/>–º–∞—Ä–∫–µ—Ä—ã?}

    CrisisCheck2 -->|–î–∞ high/critical| EmergencyMsg2[–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ<br/>—Å–æ–æ–±—â–µ–Ω–∏–µ]
    EmergencyMsg2 --> EndCrisis2([–í—ã—Ö–æ–¥ ‚Üí –∫—Ä–∏–∑–∏—Å–Ω—ã–π –¥–∏–∞–ª–æ–≥])

    CrisisCheck2 -->|–ù–µ—Ç| Progress75[üåüüåüüåü‚≠ê 75%]
    Progress75 --> AskFamily[–ö–∞–∫ —É —Ç–µ–±—è<br/>–Ω–∞ –ª–∏—á–Ω–æ–º —Ñ—Ä–æ–Ω—Ç–µ?<br/>–ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤]

    AskFamily --> FamilyChoice{–í—ã–±–æ—Ä<br/>—Å—Ç–∞—Ç—É—Å–∞}
    FamilyChoice -->|–ó–∞–º—É–∂–µ–º/<br/>–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö| AskDetails[–†–∞—Å—Å–∫–∞–∂–∏ –ø–æ–¥—Ä–æ–±–Ω–µ–µ:<br/>–ø–∞—Ä—Ç–Ω—ë—Ä/–¥–µ—Ç–∏?<br/>+ –∫–Ω–æ–ø–∫–∞ –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å]
    FamilyChoice -->|–°–≤–æ–±–æ–¥–Ω–∞/<br/>–í—Å—ë —Å–ª–æ–∂–Ω–æ| SkipFamily1[–ü–æ–Ω—è—Ç–Ω–æ üíõ]
    FamilyChoice -->|–†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ| SkipFamily2[–•–æ—Ä–æ—à–æ, —Ä–∞—Å—Å–∫–∞–∂–µ—à—å<br/>–∫–æ–≥–¥–∞ –∑–∞—Ö–æ—á–µ—à—å üíõ<br/>skip_count++]

    AskDetails --> DetailChoice{–í–≤–æ–¥ –¥–µ—Ç–∞–ª–µ–π<br/>–∏–ª–∏ –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å}
    DetailChoice -->|–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å| SkipDetails[skip_count++]
    DetailChoice -->|–í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞| ReceiveDetails[–ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏<br/>–æ —Å–µ–º—å–µ]

    ReceiveDetails --> CrisisCheck3{–ö—Ä–∏–∑–∏—Å–Ω—ã–µ<br/>–º–∞—Ä–∫–µ—Ä—ã?}
    CrisisCheck3 -->|–î–∞ high/critical| EmergencyMsg3[–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ<br/>—Å–æ–æ–±—â–µ–Ω–∏–µ]
    EmergencyMsg3 --> EndCrisis3([–í—ã—Ö–æ–¥ ‚Üí –∫—Ä–∏–∑–∏—Å–Ω—ã–π –¥–∏–∞–ª–æ–≥])

    CrisisCheck3 -->|–ù–µ—Ç| FinalCheck
    SkipDetails --> FinalCheck
    SkipFamily1 --> FinalCheck
    SkipFamily2 --> FinalCheck

    FinalCheck{skip_count<br/>>= 2?}

    FinalCheck -->|–î–∞| MinimalInfo[–Ø –ø–æ–Ω–∏–º–∞—é ‚Äî<br/>–Ω–µ–ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∏—Ç—å—Å—è<br/>–ª–∏—á–Ω—ã–º —Å—Ä–∞–∑—É üíõ<br/>–£–∑–Ω–∞–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞<br/>–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ]
    FinalCheck -->|–ù–µ—Ç| Achievement[üèÜ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!<br/>–¢—ã –∑–∞–≤–µ—Ä—à–∏–ª–∞<br/>–∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ!]

    Achievement --> GiftPremium[–î–∞—Ä—é 3 –¥–Ω—è<br/>–±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π üíõ]
    MinimalInfo --> GiftPremium

    GiftPremium --> Progress100[‚ú® 100% ‚ú®]
    Progress100 --> FinalQuestion[–ß—Ç–æ —É —Ç–µ–±—è<br/>—Å–µ–π—á–∞—Å –Ω–∞ –¥—É—à–µ?]
    FinalQuestion --> EndFlow

    style Start fill:#e1f5ff
    style EndFlow fill:#c8e6c9
    style EndCrisis1 fill:#ffccbc
    style EndCrisis2 fill:#ffccbc
    style EndCrisis3 fill:#ffccbc
    style EmergencyMsg1 fill:#ff5252,color:#fff
    style EmergencyMsg2 fill:#ff5252,color:#fff
    style EmergencyMsg3 fill:#ff5252,color:#fff
    style GiftPremium fill:#fff9c4
    style Achievement fill:#fff9c4
```

---

## üìù –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —à–∞–≥–æ–≤

### 0Ô∏è‚É£ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: /start

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ù–∞—á–∞—Ç—å" –≤ Telegram –∏–ª–∏ –≤–≤–æ–¥–∏—Ç `/start`

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–ª–∞–≥ `onboarding_completed` –≤ –ë–î
- –ï—Å–ª–∏ `True` ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- –ï—Å–ª–∏ `False` ‚Üí –Ω–∞—á–∏–Ω–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å —à–∞–≥–∞ 1

**–°–æ–±—ã—Ç–∏–µ:** `onboarding_started` –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –≤ `onboarding_events`

---

### 1Ô∏è‚É£ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫

**–¢–µ–∫—Å—Ç (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ä–µ–º–µ–Ω–∏):**

```
[–£—Ç—Ä–æ 5-12] –î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! ‚òÄÔ∏è –Ø –ú–∏—Ä–∞ üíõ
[–î–µ–Ω—å 12-18] –î–æ–±—Ä—ã–π –¥–µ–Ω—å! üå§ –Ø –ú–∏—Ä–∞ üíõ
[–í–µ—á–µ—Ä 18-23] –î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! üåô –Ø –ú–∏—Ä–∞ üíõ
[–ù–æ—á—å 23-5] –ü—Ä–∏–≤–µ—Ç! üåú –¢—ã –Ω–µ —Å–ø–∏—à—å? –Ø –ú–∏—Ä–∞ üíõ
```

**–ü–∞—É–∑–∞:** 1 —Å–µ–∫—É–Ω–¥–∞ (typing indicator)

**–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è:** –°–æ–∑–¥–∞—ë—Ç –æ—â—É—â–µ–Ω–∏–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —ç–º–ø–∞—Ç–∏–∏. –ù–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∫—Ä–∏–∑–∏—Å–µ.

---

### 2Ô∏è‚É£ –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ

**–¢–µ–∫—Å—Ç:**
```
–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–æ –≤—ã—Å–ª—É—à–∞—Ç—å ‚Äî –±–µ–∑ –æ—Å—É–∂–¥–µ–Ω–∏—è.

–ö–∞–∫ —è –º–æ–≥—É –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?
```

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** `WAITING_NAME`

**–û–∂–∏–¥–∞–Ω–∏–µ:** –°–≤–æ–±–æ–¥–Ω—ã–π –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ (–∏–º—è, –Ω–∏–∫–Ω–µ–π–º, –ª—é–±–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ)

**–í–∞–ª–∏–¥–∞—Ü–∏—è:**
- –î–ª–∏–Ω–∞ 1-50 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—Ä–∏–∑–∏—Å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã (—Å—É–∏—Ü–∏–¥, –Ω–∞—Å–∏–ª–∏–µ)
- –ï—Å–ª–∏ –∫—Ä–∏–∑–∏—Å `high/critical` ‚Üí –ø—Ä–µ—Ä—ã–≤–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ ‚Üí —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–°–æ–±—ã—Ç–∏–µ:** `name_entered`

---

### 3Ô∏è‚É£ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–º–µ–Ω–∏

**–¢–µ–∫—Å—Ç:**
```
–ü—Ä–∏—è—Ç–Ω–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è, {–∏–º—è}! üíõ

–í—Å—ë –≤–µ—Ä–Ω–æ?
```

**–ö–Ω–æ–ø–∫–∏:**
- ‚úÖ **–î–∞, –≤—Å—ë –≤–µ—Ä–Ω–æ**
- ‚úèÔ∏è **–•–æ—á—É –∏–∑–º–µ–Ω–∏—Ç—å**

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ "–ò–∑–º–µ–Ω–∏—Ç—å" ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –∫ —à–∞–≥—É 2
- –ï—Å–ª–∏ "–î–∞" ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `display_name`, –ø–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 4

**–°–æ–±—ã—Ç–∏–µ:** `name_confirmed`

---

### 4Ô∏è‚É£ –ü—Ä–æ–≥—Ä–µ—Å—Å –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å

**–¢–µ–∫—Å—Ç:**
```
üåü‚≠ê‚≠ê‚≠ê 25%

{–∏–º—è}, –Ω–∞—à —á–∞—Ç **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω** üîí

–ù–∏–∫—Ç–æ –Ω–µ —É–≤–∏–¥–∏—Ç –Ω–∞—à–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã. –¢–æ–ª—å–∫–æ —Ç—ã –∏ —è.
```

**–ü–∞—É–∑–∞:** 1.5 —Å–µ–∫—É–Ω–¥—ã

---

### 5Ô∏è‚É£ –í—ã–±–æ—Ä –ø—Ä–æ–±–ª–µ–º—ã

**–¢–µ–∫—Å—Ç:**
```
–ß—Ç–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?
```

**–ö–Ω–æ–ø–∫–∏ (2 –∫–æ–ª–æ–Ω–∫–∏):**
- üò∞ **–¢—Ä–µ–≤–æ–≥–∞ –∏ —Å—Ç—Ä–∞—Ö–∏**
- üíî **–û—Ç–Ω–æ—à–µ–Ω–∏—è**
- üòî **–í—ã–≥–æ—Ä–∞–Ω–∏–µ**
- üò£ **–ß—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã**
- üåß **–ì—Ä—É—Å—Ç—å –∏ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ**
- üî• **–ó–ª–æ—Å—Ç—å**

**–õ–æ–≥–∏–∫–∞:**
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É –≤ `context.user_data['selected_problem']`
- –≠—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç Claude –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –¥–∏–∞–ª–æ–≥–µ

**–°–æ–±—ã—Ç–∏–µ:** `problem_selected` —Å –¥–∞–Ω–Ω—ã–º–∏ `{"problem": "anxiety"}`

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `SOCIAL_PORTRAIT`

---

### 6Ô∏è‚É£ –ü—Ä–æ–≥—Ä–µ—Å—Å 50%

**–¢–µ–∫—Å—Ç:**
```
üåüüåü‚≠ê‚≠ê 50%
```

---

### 7Ô∏è‚É£ –°–æ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç (—Å–≤–æ–±–æ–¥–Ω–∞—è —Ñ–æ—Ä–º–∞)

**–¢–µ–∫—Å—Ç:**
```
–†–∞—Å—Å–∫–∞–∂–∏ –Ω–µ–º–Ω–æ–≥–æ –æ —Å–µ–±–µ: *—Å–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç, –∏–∑ –∫–∞–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∏ —á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?*

–ï—Å–ª–∏ –µ—Å—Ç—å —É–≤–ª–µ—á–µ–Ω–∏—è ‚Äî —Ç–æ–∂–µ –¥–µ–ª–∏—Å—å üíõ
```

**–û–∂–∏–¥–∞–Ω–∏–µ:** –°–≤–æ–±–æ–¥–Ω—ã–π –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞

**–õ–æ–≥–∏–∫–∞:**
- AI-–ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ Claude: –∏–∑–≤–ª–µ–∫–∞–µ–º `age`, `city`, `occupation`, `hobbies`
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ç–∞–±–ª–∏—Ü—É `user_profiles`
- –ï—Å–ª–∏ –ø–∞—Ä—Å–∏–Ω–≥ –Ω–µ —É–¥–∞–ª—Å—è ‚Äî –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
- **–ö—Ä–∏–∑–∏—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** –µ—Å–ª–∏ —É—Ä–æ–≤–µ–Ω—å `high/critical` ‚Üí –ø—Ä–µ—Ä—ã–≤–∞–µ–º ‚Üí —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

**–°–æ–±—ã—Ç–∏–µ:** `social_portrait_provided`

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `FAMILY_STATUS`

---

### 8Ô∏è‚É£ –ü—Ä–æ–≥—Ä–µ—Å—Å 75%

**–¢–µ–∫—Å—Ç:**
```
üåüüåüüåü‚≠ê 75%
```

---

### 9Ô∏è‚É£ –í–æ–ø—Ä–æ—Å –æ —Å–µ–º—å–µ (–∫–Ω–æ–ø–∫–∏)

**–¢–µ–∫—Å—Ç:**
```
–ê –∫–∞–∫ —É —Ç–µ–±—è –Ω–∞ –ª–∏—á–Ω–æ–º —Ñ—Ä–æ–Ω—Ç–µ?
```

**–ö–Ω–æ–ø–∫–∏ (2 –∫–æ–ª–æ–Ω–∫–∏):**
- üíç **–ó–∞–º—É–∂–µ–º**
- ‚ù§Ô∏è **–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö**
- üå∑ **–°–≤–æ–±–æ–¥–Ω–∞**
- üòÖ **–í—Å—ë —Å–ª–æ–∂–Ω–æ**
- ‚Ü™Ô∏è **–†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ**

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ "–ó–∞–º—É–∂–µ–º" –∏–ª–∏ "–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö" ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —à–∞–≥—É 10 (–¥–µ—Ç–∞–ª–∏)
- –ï—Å–ª–∏ "–°–≤–æ–±–æ–¥–Ω–∞" –∏–ª–∏ "–í—Å—ë —Å–ª–æ–∂–Ω–æ" ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–∏–Ω–∞–ª—É (—à–∞–≥ 12)
- –ï—Å–ª–∏ "–†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ" ‚Üí `skip_count++` ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–∏–Ω–∞–ª—É

**–°–æ–±—ã—Ç–∏–µ:** `family_status_selected` —Å –¥–∞–Ω–Ω—ã–º–∏ `{"status": "married"}`

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `FAMILY_DETAILS` (–µ—Å–ª–∏ –∑–∞–º—É–∂–µ–º/–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö)

---

### üîü –î–µ—Ç–∞–ª–∏ –æ —Å–µ–º—å–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–¢–µ–∫—Å—Ç:**
```
–†–∞—Å—Å–∫–∞–∂–∏ —á—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ: *–∫–∞–∫ –∑–æ–≤—É—Ç —Ç–≤–æ–µ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞? –ï—Å—Ç—å –ª–∏ –¥–µ—Ç–∏?*

–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –¥–µ–ª–∏—Ç—å—Å—è —Å–µ–π—á–∞—Å ‚Äî –Ω–∞–∂–º–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" üå∑
```

**–ö–Ω–æ–ø–∫–∏:**
- ‚Ü™Ô∏è **–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å**

**–û–∂–∏–¥–∞–Ω–∏–µ:** –°–≤–æ–±–æ–¥–Ω—ã–π –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –ò–õ–ò –Ω–∞–∂–∞—Ç–∏–µ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" ‚Üí `skip_count++` ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–∏–Ω–∞–ª—É
- –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç ‚Üí AI-–ø–∞—Ä—Å–∏–Ω–≥: `partner_name`, `has_children`, `children_count`, `children` (JSONB)
- **–ö—Ä–∏–∑–∏—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** –Ω–∞—Å–∏–ª–∏–µ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–µ—Ç—å–º–∏
- –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ `user_profiles`

**–°–æ–±—ã—Ç–∏–µ:** `family_details_provided` –∏–ª–∏ `family_details_skipped`

---

### 1Ô∏è‚É£1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤

**–õ–æ–≥–∏–∫–∞:**
```python
if context.user_data.get('skip_count', 0) >= 2:
    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —ç–º–ø–∞—Ç–∏—á–Ω–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é
    show_minimal_info_message()
else:
    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—é
    show_achievement_message()
```

**–î–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è:**

#### –°—Ü–µ–Ω–∞—Ä–∏–π A: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–ø—É—Å—Ç–∏–ª 2+ —Ä–∞–∑–∞
```
{–∏–º—è}, —è –ø–æ–Ω–∏–º–∞—é ‚Äî –∏–Ω–æ–≥–¥–∞ –Ω–µ–ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∏—Ç—å—Å—è –ª–∏—á–Ω—ã–º —Å—Ä–∞–∑—É üíõ

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –ú—ã —É–∑–Ω–∞–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ, –≤ —Å–≤–æ—ë–º —Ç–µ–º–ø–µ.

–•–æ—á—É, —á—Ç–æ–±—ã –Ω–∞—Å –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–ª–æ ‚Äî –¥–∞—Ä—é —Ç–µ–±–µ **3 –¥–Ω—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** üíõ

–ß—Ç–æ —É —Ç–µ–±—è —Å–µ–π—á–∞—Å –Ω–∞ –¥—É—à–µ?
```

**–§–ª–∞–≥:** `completed_with_minimal_info: True` –≤ —Å–æ–±—ã—Ç–∏–∏

---

#### –°—Ü–µ–Ω–∞—Ä–∏–π B: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–µ–ª–∏–ª—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
```
üèÜ **–ü–æ–∑–¥—Ä–∞–≤–ª—è—é!** –¢—ã –∑–∞–≤–µ—Ä—à–∏–ª–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ!

–•–æ—á—É, —á—Ç–æ–±—ã –Ω–∞—Å –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–ª–æ ‚Äî –¥–∞—Ä—é —Ç–µ–±–µ **3 –¥–Ω—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π** üíõ

‚ú® –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: 100% ‚ú®

–ß—Ç–æ —É —Ç–µ–±—è —Å–µ–π—á–∞—Å –Ω–∞ –¥—É—à–µ?
```

---

### 1Ô∏è‚É£2Ô∏è‚É£ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

**–î–µ–π—Å—Ç–≤–∏—è –≤ –ë–î:**
1. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º `user.onboarding_completed = True`
2. –°–æ—Ö—Ä–∞–Ω—è–µ–º `user.display_name = {–∏–º—è}`
3. –°–æ–∑–¥–∞—ë–º –ø–æ–¥–ø–∏—Å–∫—É Premium –Ω–∞ 3 –¥–Ω—è: `trial_until = now() + 3 days`
4. –õ–æ–≥–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ: `onboarding_completed` —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

**–°–æ–±—ã—Ç–∏–µ:**
```json
{
  "event_name": "onboarding_completed",
  "event_data": {
    "name": "–õ—é—Å—è",
    "selected_problem": "anxiety",
    "social_info": "34 –≥–æ–¥–∞, –ú–æ—Å–∫–≤–∞, –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥",
    "family_status": "married",
    "skip_count": 0,
    "completed_with_minimal_info": false,
    "premium_granted": true,
    "duration_seconds": 180
  }
}
```

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:** ‚Üí `ConversationHandler.END`

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å—Ä–∞–∑—É –Ω–∞–ø–∏—Å–∞—Ç—å –æ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –¥–∏–∞–ª–æ–≥–æ–≤—ã–π —Ñ–ª–æ—É —Å Claude

---

## üö® –ö—Ä–∏–∑–∏—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª

### –¢–æ—á–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

–ö—Ä–∏–∑–∏—Å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ **3 –º–µ—Å—Ç–∞—Ö:**

1. **–ü—Ä–∏ –≤–≤–æ–¥–µ –∏–º–µ–Ω–∏** (—à–∞–≥ 2)
2. **–ü—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ä–µ—Ç–∞** (—à–∞–≥ 7)
3. **–ü—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏–∏ —Å–µ–º—å–∏** (—à–∞–≥ 10)

### –£—Ä–æ–≤–Ω–∏ –∫—Ä–∏–∑–∏—Å–∞

**Low/Medium:**
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
- –ü–æ–º–µ—á–∞–µ–º –≤ –ª–æ–≥–∞—Ö: `crisis_detected: true`

**High/Critical:**
- –ü—Ä–µ—Ä—ã–≤–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥: `return ConversationHandler.END`
- –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å —Ö–µ–ª–ø–ª–∞–π–Ω–∞–º–∏:
  - Suicide hotline: +7 (495) 051
  - Violence hotline: 8-800-7000-600
- –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∫—Ä–∏–∑–∏—Å–Ω–æ–º—É –¥–∏–∞–ª–æ–≥—É (–æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–ª–æ—É)

### –ü—Ä–∏–º–µ—Ä –∫—Ä–∏–∑–∏—Å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è

```
{–∏–º—è}, —è –≤–∏–∂—É —á—Ç–æ —Ç–µ–±–µ —Å–µ–π—á–∞—Å –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ.

–í–∞–∂–Ω–æ: –µ—Å–ª–∏ —Ç—ã –¥—É–º–∞–µ—à—å –æ –ø—Ä–∏—á–∏–Ω–µ–Ω–∏–∏ –≤—Ä–µ–¥–∞ —Å–µ–±–µ ‚Äî –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–≤–æ–Ω–∏:
üìû –¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è: +7 (495) 051 (–∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ)

–Ø –∑–¥–µ—Å—å –∏ –≥–æ—Ç–æ–≤–∞ –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å. –ù–æ –≤ —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –≤–∞–∂–Ω–æ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å —á–µ–ª–æ–≤–µ–∫–æ–º, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–º–æ—â—å.

–¢—ã –Ω–µ –æ–¥–Ω–∞ üíõ
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

### Completion Rate

**–§–æ—Ä–º—É–ª–∞:**
```
CR = (–∑–∞–≤–µ—Ä—à–∏–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ / –Ω–∞—á–∞–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥) √ó 100%
```

**–¢–µ–∫—É—â–∞—è —Ü–µ–ª—å:** >70%

**–¢–æ—á–∫–∏ –≤—ã—Ö–æ–¥–∞:**
- –ü–æ—Å–ª–µ –∏–º–µ–Ω–∏ (—à–∞–≥ 2)
- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–±–ª–µ–º—ã (—à–∞–≥ 5)
- –ü–æ—Å–ª–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ä–µ—Ç–∞ (—à–∞–≥ 7)
- –ü—Ä–∏ –∫—Ä–∏–∑–∏—Å–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏

**SQL –∑–∞–ø—Ä–æ—Å:**
```sql
SELECT
  COUNT(DISTINCT CASE WHEN event_name = 'onboarding_started' THEN user_id END) as started,
  COUNT(DISTINCT CASE WHEN event_name = 'onboarding_completed' THEN user_id END) as completed,
  ROUND(100.0 * COUNT(DISTINCT CASE WHEN event_name = 'onboarding_completed' THEN user_id END) /
        COUNT(DISTINCT CASE WHEN event_name = 'onboarding_started' THEN user_id END), 2) as completion_rate
FROM onboarding_events
WHERE created_at >= NOW() - INTERVAL '7 days';
```

---

### Time to Complete

**–§–æ—Ä–º—É–ª–∞:**
```
TTC = timestamp(onboarding_completed) - timestamp(onboarding_started)
```

**–¶–µ–ª—å:** <3 –º–∏–Ω—É—Ç—ã (–º–µ–¥–∏–∞–Ω–∞)

**–ó–∞–ø—Ä–æ—Å:**
```sql
SELECT
  PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY duration_seconds) as median_duration,
  AVG(duration_seconds) as avg_duration,
  MIN(duration_seconds) as min_duration,
  MAX(duration_seconds) as max_duration
FROM (
  SELECT
    user_id,
    EXTRACT(EPOCH FROM (
      MAX(CASE WHEN event_name = 'onboarding_completed' THEN created_at END) -
      MIN(CASE WHEN event_name = 'onboarding_started' THEN created_at END)
    )) as duration_seconds
  FROM onboarding_events
  WHERE created_at >= NOW() - INTERVAL '7 days'
  GROUP BY user_id
  HAVING COUNT(DISTINCT event_name) >= 2
) durations;
```

---

### Skip Rate

**–§–æ—Ä–º—É–ª–∞:**
```
SR = (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ skip_count >= 2 / –≤—Å–µ –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–µ) √ó 100%
```

**–¶–µ–ª—å:** –°–ª–µ–¥–∏—Ç—å –∑–∞ –¥–∏–Ω–∞–º–∏–∫–æ–π (–Ω–µ—Ç –∂—ë—Å—Ç–∫–æ–≥–æ –ª–∏–º–∏—Ç–∞)

**–ó–∞–ø—Ä–æ—Å:**
```sql
SELECT
  COUNT(*) FILTER (WHERE (event_data->>'skip_count')::int >= 2) as skipped_multiple,
  COUNT(*) as total_completed,
  ROUND(100.0 * COUNT(*) FILTER (WHERE (event_data->>'skip_count')::int >= 2) / COUNT(*), 2) as skip_rate
FROM onboarding_events
WHERE event_name = 'onboarding_completed'
  AND created_at >= NOW() - INTERVAL '7 days';
```

---

### Crisis Detection Rate

**–§–æ—Ä–º—É–ª–∞:**
```
CDR = (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫—Ä–∏–∑–∏—Å–æ–≤ / –Ω–∞—á–∞–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥) √ó 100%
```

**–ó–∞–ø—Ä–æ—Å:**
```sql
SELECT
  COUNT(*) FILTER (WHERE event_data->>'crisis_detected' = 'true') as crises_detected,
  COUNT(DISTINCT user_id) as total_users,
  ROUND(100.0 * COUNT(*) FILTER (WHERE event_data->>'crisis_detected' = 'true') / COUNT(DISTINCT user_id), 2) as crisis_rate
FROM onboarding_events
WHERE created_at >= NOW() - INTERVAL '7 days';
```

---

## üîÑ –í–æ–∑–≤—Ä–∞—Ç –Ω–µ–∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö (Reminders)

### –õ–æ–≥–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–£—Å–ª–æ–≤–∏–µ:**
- `onboarding_completed = False`
- –ü—Ä–æ—à–ª–æ >= 24 —á–∞—Å–∞ —Å `onboarding_started`
- –°–æ–±—ã—Ç–∏–µ `onboarding_reminder_sent` –µ—â—ë –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞–ª–æ—Å—å

**–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:**
```
–ü—Ä–∏–≤–µ—Ç, {–∏–º—è}! üíõ –≠—Ç–æ –ú–∏—Ä–∞.

–ú—ã –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ. –ì–æ—Ç–æ–≤–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?

–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ /start –∏ –ø—Ä–æ–¥–æ–ª–∂–∏–º —Å —Ç–æ–≥–æ –º–µ—Å—Ç–∞, –≥–¥–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å.
```

**–ß–∞—Å—Ç–æ—Ç–∞:** 1 —Ä–∞–∑ (–Ω–µ —Å–ø–∞–º–∏–º)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** Scheduler job –∫–∞–∂–¥—ã–π —á–∞—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∞–±–ª–∏—Ü—É `users` –∏ `onboarding_events`

**–ö–æ–¥:** `services/scheduler.py:send_onboarding_reminders()`

---

## üé® UX/UI Guidelines

### Typing Indicators

**–ò—Å–ø–æ–ª—å–∑—É–µ–º –≤–µ–∑–¥–µ:**
```python
await send_with_typing(update, text, delay=1.0)
```

**–ü–∞—É–∑—ã:**
- –ö–æ—Ä–æ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (1-2 —Å—Ç—Ä–æ–∫–∏): 0.5-1 —Å–µ–∫
- –°—Ä–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è (3-5 —Å—Ç—Ä–æ–∫): 1-1.5 —Å–µ–∫
- –î–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è: 1.5-2 —Å–µ–∫

**–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è:** –°–æ–∑–¥–∞—ë—Ç –æ—â—É—â–µ–Ω–∏–µ –∂–∏–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞, —Å–Ω–∏–∂–∞–µ—Ç —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å

---

### Emoji Usage

**–ü—Ä–∞–≤–∏–ª–æ:** –£–º–µ—Ä–µ–Ω–Ω–æ, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ

**–û—Å–Ω–æ–≤–Ω—ã–µ —ç–º–æ–¥–∑–∏:**
- üíõ ‚Äî —Ç–µ–ø–ª–æ, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ–º —á–∞—Å—Ç–æ)
- üå∑ ‚Äî –¥–µ–ª–∏–∫–∞—Ç–Ω–æ—Å—Ç—å (–¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ–º)
- üîí ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å
- ‚òÄÔ∏èüå§üåôüåú ‚Äî –≤—Ä–µ–º—è —Å—É—Ç–æ–∫
- üåü‚≠ê ‚Äî –ø—Ä–æ–≥—Ä–µ—Å—Å
- üèÜ ‚Äî –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ

**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º:**
- üòÇüòÖ ‚Äî —é–º–æ—Ä (—Ç–æ–ª—å–∫–æ –≤ –∫—Ä–∞–π–Ω–∏—Ö —Å–ª—É—á–∞—è—Ö)
- ‚ù§Ô∏èüî• ‚Äî —Å–ª–∏—à–∫–æ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

---

### Button Design

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫:**
- –ú–∞–∫—Å–∏–º—É–º 6 –∫–Ω–æ–ø–æ–∫ –≤ —Å–µ—Ç–∫–µ
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ: 2-4 –∫–Ω–æ–ø–∫–∏

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:**
- 2 –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è 4-6 –∫–Ω–æ–ø–æ–∫
- 1 –∫–æ–ª–æ–Ω–∫–∞ –¥–ª—è 2-3 –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤

**–¢–µ–∫—Å—Ç:**
- –ö–æ—Ä–æ—Ç–∫–∏–π (1-4 —Å–ª–æ–≤–∞)
- –Ø—Å–Ω—ã–π, –±–µ–∑ –∂–∞—Ä–≥–æ–Ω–∞
- –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —ç–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è

---

### Markdown Formatting

**–ò—Å–ø–æ–ª—å–∑—É–µ–º:**
- **–ñ–∏—Ä–Ω—ã–π** ‚Äî –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤ ("3 –¥–Ω—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π")
- *–ö—É—Ä—Å–∏–≤* ‚Äî –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤, —Ü–∏—Ç–∞—Ç

**–ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º:**
- `–ú–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π` ‚Äî —ç—Ç–æ –Ω–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- __–ü–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏–µ__ ‚Äî –Ω–µ—Ç –≤ Telegram

---

## üß™ A/B Testing (Future)

### –ì–∏–ø–æ—Ç–µ–∑—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–î–ª–∏–Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:**
   - –í–∞—Ä–∏–∞–Ω—Ç A: 4 —à–∞–≥–∞ (—Ç–µ–∫—É—â–∏–π)
   - –í–∞—Ä–∏–∞–Ω—Ç B: 3 —à–∞–≥–∞ (—É–±—Ä–∞—Ç—å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç)
   - –ú–µ—Ç—Ä–∏–∫–∞: Completion Rate

2. **–í—Ä–µ–º—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è Premium:**
   - –í–∞—Ä–∏–∞–Ω—Ç A: –í –∫–æ–Ω—Ü–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ (—Ç–µ–∫—É—â–∏–π)
   - –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≥–ª—É–±–æ–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –≤ –¥–∏–∞–ª–æ–≥–µ
   - –ú–µ—Ç—Ä–∏–∫–∞: Premium Activation Rate

3. **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è:**
   - –í–∞—Ä–∏–∞–Ω—Ç A: –ü–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫ (—Ç–µ–∫—É—â–∏–π)
   - –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫ + –ø–æ–≥–æ–¥–∞ –≤ –≥–æ—Ä–æ–¥–µ
   - –ú–µ—Ç—Ä–∏–∫–∞: Engagement –≤ –ø–µ—Ä–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [TODO_ONBOARDING.md](./TODO_ONBOARDING.md) ‚Äî —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- [ONBOARDING_TESTING_GUIDE.md](./ONBOARDING_TESTING_GUIDE.md) ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- [../CHANGELOG.md](../CHANGELOG.md) ‚Äî –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [../../ai/prompts/system_prompt.py](../../ai/prompts/system_prompt.py) ‚Äî –ø—Ä–æ–º–ø—Ç –¥–ª—è Claude

---

## ‚úÖ Checklist –¥–ª—è –∫–æ–º–∞–Ω–¥—ã

### –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–æ–≤—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:

- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ Mermaid –≤ —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω TODO_ONBOARDING.md (–æ—Ç–º–µ—Ç–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏)
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ —Ç–æ—á–∫–∏ –∫—Ä–∏–∑–∏—Å–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
- [ ] –û–±–Ω–æ–≤–ª—ë–Ω CHANGELOG.md
- [ ] –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä + –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫ –ø–µ—Ä–≤—ã–µ 24 —á–∞—Å–∞

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 17.01.2026
**–í–µ—Ä—Å–∏—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:** 2.0
**Completion Rate (—Ç–µ–∫—É—â–∏–π):** ~80% (–ø–æ TODO_ONBOARDING.md)
