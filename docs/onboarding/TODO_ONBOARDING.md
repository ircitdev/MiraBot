# TODO: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 04.01.2026
**–°—Ç–∞—Ç—É—Å:** üìã –í –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –í—ã—Å–æ–∫–∏–π

---

## üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–í—Å–µ–≥–æ –∑–∞–¥–∞—á:** 26
**–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 22 –∑–∞–¥–∞—á–∏ (84.6%)
**–û—Å—Ç–∞–ª–æ—Å—å:** 4 –∑–∞–¥–∞—á–∏

**–§–∞–∑–∞ 1 (–°—Ä–æ—á–Ω–æ):** ‚úÖ 5/5 –∑–∞–¥–∞—á –∑–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–∑–∞ 2 (–í–∞–∂–Ω–æ):** ‚úÖ 8/8 –∑–∞–¥–∞—á –∑–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–∑–∞ 3 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è):** ‚úÖ 7/8 –∑–∞–¥–∞—á –∑–∞–≤–µ—Ä—à–µ–Ω–æ (–æ—Å—Ç–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ —Ñ–æ–∫—É—Å-–≥—Ä—É–ø–ø–∞)
**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:** 2/5 –∑–∞–¥–∞—á –∑–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üö® –§–ê–ó–ê 1: "–£–±—Ä–∞—Ç—å –±–æ–ª—å" (–°–†–û–ß–ù–û, 1-2 –¥–Ω—è)

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–≥–æ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞:
- ‚ùå –°—Ç–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞
- ‚ùå –ö–Ω–æ–ø–∫–∏ "–°–æ–≥–ª–∞—à–µ–Ω–∏–µ" –∏ "–°–ø—Ä–∞–≤–∫–∞" —É–±–∏–≤–∞—é—Ç –≤–∞–π–± –ø–æ–¥—Ä—É–≥–∏
- ‚ùå –ë–æ—Ç –Ω–µ –∂–¥—ë—Ç –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å "–ö–∞–∫ –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?"
- ‚ùå –°–ª—ç—à-–∫–æ–º–∞–Ω–¥—ã –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤

### –ó–∞–¥–∞—á–∏:

#### 1.1 –†–∞–∑–±–∏—Ç—å "—Å—Ç–µ–Ω—É —Ç–µ–∫—Å—Ç–∞" –Ω–∞ –¥–∏–∞–ª–æ–≥
- [x] **–¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –±–∏–æ–≥—Ä–∞—Ñ–∏—é + –ø—Ä–∞–≤–∏–ª–∞ + –¥–∏—Å–∫–ª–µ–π–º–µ—Ä –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- [x] **–ù–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** –û–¥–∏–Ω —ç–∫—Ä–∞–Ω ‚Äî –æ–¥–Ω–∞ –º—ã—Å–ª—å ‚Äî –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ
- [x] **–§–∞–π–ª—ã:** `bot/handlers/start.py`
- [x] **–ö–æ–¥:** –†–∞–∑–¥–µ–ª–∏—Ç—å –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å –ø–∞—É–∑–∞–º–∏
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî•üî• –ö–†–ò–¢–ò–ß–ù–û

**–ë—ã–ª–æ:**
```
–ü—Ä–∏–≤–µ—Ç! –Ø –ú–∏—Ä–∞, –º–Ω–µ 42 –≥–æ–¥–∞... [–≤—Å—è –±–∏–æ–≥—Ä–∞—Ñ–∏—è]
–í–∞–∂–Ω–æ: —è –Ω–µ –ø—Å–∏—Ö–æ–ª–æ–≥... [–¥–∏—Å–∫–ª–µ–π–º–µ—Ä]
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã: /exercises... [—Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥]
–ö–∞–∫ –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
[typing 1 —Å–µ–∫]
–ü—Ä–∏–≤–µ—Ç! üíõ –Ø –ú–∏—Ä–∞.

[typing 1 —Å–µ–∫]
–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–æ –≤—ã—Å–ª—É—à–∞—Ç—å ‚Äî –±–µ–∑ –æ—Å—É–∂–¥–µ–Ω–∏—è.

–ö–∞–∫ —è –º–æ–≥—É –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?
[–°–¢–û–ü. –ñ–¥—ë–º –æ—Ç–≤–µ—Ç–∞]
```

---

#### 1.2 –£–±—Ä–∞—Ç—å –∫–Ω–æ–ø–∫–∏ "–°–æ–≥–ª–∞—à–µ–Ω–∏–µ" –∏ "–°–ø—Ä–∞–≤–∫–∞" —Å –ø–µ—Ä–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ–ª—å—à–∏–µ –∑–µ–ª—ë–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞—é—Ç –æ—â—É—â–µ–Ω–∏–µ "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã"
- [x] **–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –º–µ–Ω—é –±–æ—Ç–∞ (–∫–Ω–æ–ø–∫–∞ —Å–ª–µ–≤–∞ –æ—Ç —Å—Ç—Ä–æ–∫–∏ –≤–≤–æ–¥–∞)
- [x] **–§–∞–π–ª—ã:** `bot/handlers/start.py`, –¥–æ–±–∞–≤–∏—Ç—å –≤ `bot/main.py` –∫–æ–º–∞–Ω–¥—ã –º–µ–Ω—é
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî• –í–´–°–û–ö–ò–ô

**–ö–æ–¥ –¥–ª—è –º–µ–Ω—é:**
```python
from telegram import BotCommand

commands = [
    BotCommand("start", "–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞"),
    BotCommand("help", "–°–ø—Ä–∞–≤–∫–∞ –∏ –∫–æ–º–∞–Ω–¥—ã"),
    BotCommand("privacy", "–°–æ–≥–ª–∞—à–µ–Ω–∏–µ –æ –Ω–µ—Ä–∞–∑–≥–ª–∞—à–µ–Ω–∏–∏"),
]
await application.bot.set_my_commands(commands)
```

---

#### 1.3 –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** –ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏–º—è, –Ω–æ —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- [x] **–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Å–ª–µ –≤–æ–ø—Ä–æ—Å–∞ "–ö–∞–∫ –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?" –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –∂–¥–∞—Ç—å
- [x] **–§–∞–π–ª—ã:** `bot/handlers/start.py`
- [x] **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ConversationHandler —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî•üî• –ö–†–ò–¢–ò–ß–ù–û

**–ö–æ–¥:**
```python
from telegram.ext import ConversationHandler

WAITING_NAME = 0
SELECTING_PROBLEM = 1

async def start(update, context):
    await update.message.reply_text(
        "–ü—Ä–∏–≤–µ—Ç! üíõ –Ø –ú–∏—Ä–∞.\n\n"
        "–ö–∞–∫ —è –º–æ–≥—É –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?"
    )
    return WAITING_NAME

async def receive_name(update, context):
    name = update.message.text
    context.user_data['name'] = name

    await asyncio.sleep(1)
    await update.message.chat.send_action('typing')

    await update.message.reply_text(
        f"–û—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ, {name}! üå∑"
    )
    return SELECTING_PROBLEM
```

---

#### 1.4 –î–æ–±–∞–≤–∏—Ç—å Typing Status (–∏–º–∏—Ç–∞—Ü–∏—è "–ø–µ—á–∞—Ç–∞–µ—Ç...")
- [x] **–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –æ—â—É—â–µ–Ω–∏–µ –∂–∏–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞
- [x] **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:** –ü–∞—É–∑–∞ 1-2 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ —Å `send_chat_action('typing')`
- [x] **–§–∞–π–ª—ã:** –°–æ–∑–¥–∞—Ç—å —É—Ç–∏–ª–∏—Ç—É `bot/utils/typing.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–ö–æ–¥:**
```python
async def send_with_typing(message, text, delay=1.5):
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–º–∏—Ç–∞—Ü–∏–µ–π –ø–µ—á–∞—Ç–∏"""
    await message.chat.send_action('typing')
    await asyncio.sleep(delay)
    return await message.reply_text(text)
```

---

#### 1.5 –°–ø—Ä—è—Ç–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Å–ª—ç—à-–∫–æ–º–∞–Ω–¥
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** –°–ø–∏—Å–æ–∫ `/exercises`, `/affirmation` –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–æ–∂–Ω–æ
- [x] **–†–µ—à–µ–Ω–∏–µ:** –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–µ, –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ
- [x] **–§–∞–π–ª—ã:** `bot/handlers/start.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–í–º–µ—Å—Ç–æ:**
```
–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/exercises - –ü—Ä–∞–∫—Ç–∏–∫–∏
/affirmation - –ê—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–∏
```

**–î–µ–ª–∞—Ç—å:**
```
[–í –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–∏–∞–ª–æ–≥–∞]
–ú–∏—Ä–∞: –í–∏–∂—É, —Ç—ã –Ω–∞ –≤–∑–≤–æ–¥–µ. –•–æ—á–µ—à—å –∫–æ—Ä–æ—Ç–∫—É—é –ø—Ä–∞–∫—Ç–∏–∫—É –Ω–∞ 2 –º–∏–Ω—É—Ç—ã?
[–î–∞] [–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ]
```

---

## üé® –§–ê–ó–ê 2: "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–æ–≤–ª–µ—á–µ–Ω–∏–µ" (3-5 –¥–Ω–µ–π)

### 2.1 –ö–Ω–æ–ø–∫–∏-–±–æ–ª–∏ –≤–º–µ—Å—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–µ–º
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** –°—É—Ö–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–û—Ç–Ω–æ—à–µ–Ω–∏—è", "–î–µ—Ç–∏" –Ω–µ —Ü–µ–ø–ª—è—é—Ç
- [x] **–†–µ—à–µ–Ω–∏–µ:** –≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ª–µ–≥–∫–æ —Å–µ–±—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å
- [x] **–§–∞–π–ª—ã:** `bot/handlers/start.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî• –í–´–°–û–ö–ò–ô

**–¢–µ–∫—É—â–∏–µ –∫–Ω–æ–ø–∫–∏:**
```
üîò –û—Ç–Ω–æ—à–µ–Ω–∏—è
üîò –î–µ—Ç–∏
üîò –†–∞–±–æ—Ç–∞
```

**–ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏:**
```python
from telegram import InlineKeyboardButton, InlineKeyboardMarkup

keyboard = [
    [InlineKeyboardButton("–ß—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –≤—ã–∂–∞—Ç–æ–π, –∫–∞–∫ –ª–∏–º–æ–Ω", callback_data='pain_burnout')],
    [InlineKeyboardButton("–í—Å—ë —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç, –æ—Å–æ–±–µ–Ω–Ω–æ –±–ª–∏–∑–∫–∏–µ", callback_data='pain_irritation')],
    [InlineKeyboardButton("–í–Ω—É—Ç—Ä–∏ —Ç—Ä–µ–≤–æ–≥–∞ –∏ –ø—É—Å—Ç–æ—Ç–∞", callback_data='pain_anxiety')],
    [InlineKeyboardButton("–°—Ç—ã–¥–Ω–æ ‚Äî —Å—Ä—ã–≤–∞—é—Å—å –Ω–∞ –¥–µ—Ç–µ–π", callback_data='pain_guilt')],
    [InlineKeyboardButton("–ü—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è", callback_data='pain_talk')],
    [InlineKeyboardButton("–î—Ä—É–≥–æ–µ (–Ω–∞–ø–∏—à—É —Å–∞–º–∞)", callback_data='pain_other')],
]
```

---

### 2.2 –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å "–ó–µ—Ä–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ" (4 –∫–∞—Å–∞–Ω–∏—è)
- [x] **–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:** –ú–∏—Ä–∞ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ —Å–µ–±–µ ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–µ–º –∂–µ
- [x] **–¶–µ–ª—å:** –°–æ–±—Ä–∞—Ç—å 11 –ø—É–Ω–∫—Ç–æ–≤ –ø—Ä–æ—Ñ–∏–ª—è –∑–∞ 4 —Å–æ–æ–±—â–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ 11 –≤–æ–ø—Ä–æ—Å–æ–≤
- [x] **–§–∞–π–ª—ã:** –°–æ–∑–¥–∞—Ç—å `bot/handlers/onboarding.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî•üî• –ö–†–ò–¢–ò–ß–ù–û

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
1. **–ö–∞—Å–∞–Ω–∏–µ 1:** –ò–º—è (—É–∂–µ –µ—Å—Ç—å)
2. **–ö–∞—Å–∞–Ω–∏–µ 2:** –í–æ–∑—Ä–∞—Å—Ç, –ì–æ—Ä–æ–¥, –†–∞–±–æ—Ç–∞, –•–æ–±–±–∏ (1 –≤–æ–ø—Ä–æ—Å)
3. **–ö–∞—Å–∞–Ω–∏–µ 3:** –°—Ç–∞—Ç—É—Å –æ—Ç–Ω–æ—à–µ–Ω–∏–π, –ú—É–∂/–ø–∞—Ä—Ç–Ω—ë—Ä, –î–µ—Ç–∏ (—Å –∫–Ω–æ–ø–∫–∞–º–∏)
4. **–ö–∞—Å–∞–Ω–∏–µ 4:** –†–æ–¥–∏—Ç–µ–ª–∏, –ü–∏—Ç–æ–º—Ü—ã

---

### 2.3 –ö–∞—Å–∞–Ω–∏–µ 2: –°–æ—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç (AI-–ø–∞—Ä—Å–∏–Ω–≥)
- [x] **–í–æ–ø—Ä–æ—Å:** "–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ: —Å–∫–æ–ª—å–∫–æ –ª–µ—Ç, –∏–∑ –∫–∞–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∏ —á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?"
- [x] **AI –∏–∑–≤–ª–µ–∫–∞–µ—Ç:** Age, City, Job, Hobby
- [x] **–§–∞–π–ª—ã:** `bot/handlers/onboarding.py`, –æ–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî• –í–´–°–û–ö–ò–ô

**–°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç:**
```
–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏–∑–≤–ª–µ–∫–∏ —Å–ª–µ–¥—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ:
- age: –≤–æ–∑—Ä–∞—Å—Ç (—á–∏—Å–ª–æ)
- city: –≥–æ—Ä–æ–¥ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è
- job: –ø—Ä–æ—Ñ–µ—Å—Å–∏—è –∏–ª–∏ —Ä–æ–¥ –∑–∞–Ω—è—Ç–∏–π
- hobby: —Ö–æ–±–±–∏ –∏–ª–∏ —É–≤–ª–µ—á–µ–Ω–∏—è

–ï—Å–ª–∏ –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –≤–µ—Ä–Ω–∏ null –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—è.
–ù–ï –ø–µ—Ä–µ—Å–ø—Ä–∞—à–∏–≤–∞–π —Å—Ä–∞–∑—É –ø—Ä–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ—Ç–∞–ª–∏.

–ü—Ä–∏–º–µ—Ä:
–í–≤–æ–¥: "–ú–Ω–µ 34, –∂–∏–≤—É –≤ –ú–æ—Å–∫–≤–µ, —Ä–∞–±–æ—Ç–∞—é –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–æ–º, –ª—é–±–ª—é –π–æ–≥—É"
–í—ã–≤–æ–¥: {"age": 34, "city": "–ú–æ—Å–∫–≤–∞", "job": "–º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥", "hobby": "–π–æ–≥–∞"}
```

---

### 2.4 –ö–∞—Å–∞–Ω–∏–µ 3: –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–í–æ–ø—Ä–æ—Å:** "–ê –∫–∞–∫ —É —Ç–µ–±—è –Ω–∞ –ª–∏—á–Ω–æ–º —Ñ—Ä–æ–Ω—Ç–µ?"
- [x] **–°–Ω–∞—á–∞–ª–∞ –∫–Ω–æ–ø–∫–∏:** [–ó–∞–º—É–∂–µ–º] [–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö] [–°–≤–æ–±–æ–¥–Ω–∞] [–í—Å—ë —Å–ª–æ–∂–Ω–æ] [‚Ü™Ô∏è –†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ]
- [x] **–ü–æ—Ç–æ–º —É—Ç–æ—á–Ω–µ–Ω–∏–µ:** –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ "–ó–∞–º—É–∂–µ–º"/"–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö"
- [x] **–§–∞–π–ª—ã:** `bot/handlers/onboarding.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- –ö–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `receive_social_portrait()` (—Å—Ç—Ä–æ–∫–∏ 498-512)
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handle_family_status()` –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å—Ç–∞—Ç—É—Å–∞ (—Å—Ç—Ä–æ–∫–∏ 515-558)
- –õ–æ–≥–∏–∫–∞ —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π —Ç–æ–ª—å–∫–æ –¥–ª—è –∑–∞–º—É–∂–Ω–∏—Ö/–≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö
- –ö–Ω–æ–ø–∫–∞ "‚Ü™Ô∏è –†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ" –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞ –±–ª–æ–∫–∞ —Å–µ–º—å–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è `family_status_selected` –≤ –ë–î

---

### 2.5 –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" (–ö–†–ò–¢–ò–ß–ù–û!)
- [x] **–ó–∞—á–µ–º:** 30-40% –∂–µ–Ω—â–∏–Ω –Ω–µ –≥–æ—Ç–æ–≤—ã –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–µ–º—å–µ —Å—Ä–∞–∑—É
- [x] **–ì–¥–µ:** –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –ª–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ (–∫–∞—Å–∞–Ω–∏—è 3, 4)
- [x] **–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏:** "‚Ü™Ô∏è –†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ"
- [x] **–§–∞–π–ª—ã:** `bot/handlers/onboarding.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî•üî• –ö–†–ò–¢–ò–ß–ù–û

**–ö–æ–¥:**
```python
keyboard = [
    [InlineKeyboardButton("–ó–∞–º—É–∂–µ–º", callback_data='status_married')],
    [InlineKeyboardButton("–í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö", callback_data='status_relationship')],
    [InlineKeyboardButton("–°–≤–æ–±–æ–¥–Ω–∞", callback_data='status_single')],
    [InlineKeyboardButton("–í—Å—ë —Å–ª–æ–∂–Ω–æ", callback_data='status_complicated')],
    [InlineKeyboardButton("‚Ü™Ô∏è –†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ", callback_data='skip_family')],
]
```

---

### 2.6 –ó–∞–∫—Ä–µ–ø–ª—è—é—â–∏–π —ç–º–ø–∞—Ç–∏—á–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- [x] **–¶–µ–ª—å:** –ü–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ –ú–∏—Ä–∞ —Å–ª—É—à–∞–ª–∞ –∏ –∑–∞–ø–æ–º–Ω–∏–ª–∞
- [x] **–§–æ—Ä–º–∞—Ç:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º—è + 1-2 —Ñ–∞–∫—Ç–∞ –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è
- [x] **–§–∞–π–ª—ã:** `bot/handlers/onboarding.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–ü—Ä–∏–º–µ—Ä:**
```
–ê–Ω—è, —Å–ø–∞—Å–∏–±–æ, —á—Ç–æ –ø–æ–¥–µ–ª–∏–ª–∞—Å—å.
–¢–µ–ø–µ—Ä—å —è –≤–∏–∂—É —Ç–µ–±—è ‚Äî –º–∞–º–∞, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥–æ–º,
–∂–∏–≤—ë—Ç –≤ –ú–æ—Å–∫–≤–µ, —Å –º—É–∂–µ–º –ê–Ω–¥—Ä–µ–µ–º –∏ —Å—ã–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ–∂–∞–µ—Ç –ª–µ–≥–æ.
–ë—É–¥—É —Ä—è–¥–æ–º üíõ

–ß—Ç–æ –±–µ—Å–ø–æ–∫–æ–∏—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å?
```

---

### 2.7 –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–í–º–µ—Å—Ç–æ:** –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥ –≤ –Ω–∞—á–∞–ª–µ
- [x] **–î–µ–ª–∞—Ç—å:** –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞–º –≤ –¥–∏–∞–ª–æ–≥–µ
- [x] **–§–∞–π–ª—ã:** –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç, –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä—ã
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "üéØ –ö–û–ù–¢–ï–ö–°–¢–ù–´–ï –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø –ü–†–ê–ö–¢–ò–ö" –≤ `ai/prompts/system_prompt.py`
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è:
  - –î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫ (—Ç—Ä–µ–≤–æ–≥–∞, –ø–∞–Ω–∏–∫–∞, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–∏–º–ø—Ç–æ–º—ã —Å—Ç—Ä–µ—Å—Å–∞)
  - –ê—Ñ—Ñ–∏—Ä–º–∞—Ü–∏–π (—Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∞, —á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã, –Ω–∏–∑–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞)
  - –¢–µ—Ö–Ω–∏–∫ –∑–∞–∑–µ–º–ª–µ–Ω–∏—è (–¥–∏—Å—Å–æ—Ü–∏–∞—Ü–∏—è, —Å–∏–ª—å–Ω–∞—è –ø–∞–Ω–∏–∫–∞, —Ç—Ä–∞–≤–º–∞—Ç–∏—á–Ω—ã–µ –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è)
  - –ü—Ä–∞–∫—Ç–∏–∫ —Å–æ –∑–ª–æ—Å—Ç—å—é (–≥–Ω–µ–≤, —Å–¥–µ—Ä–∂–∏–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–π)
  - –ú–µ–¥–∏—Ç–∞—Ü–∏–π (–ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º, —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ, —É—Å—Ç–∞–ª–æ—Å—Ç—å)
- –î–æ–±–∞–≤–ª–µ–Ω –∞–ª–≥–æ—Ä–∏—Ç–º "–£–°–õ–´–®–¨ ‚Üí –£–¢–û–ß–ù–ò ‚Üí –ü–†–ï–î–õ–û–ñ–ò" –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≥—Ä–∞–Ω–∏—Ü—ã: –ù–ï –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ –ø–µ—Ä–≤—ã—Ö 2-3 —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- –ü—Ä–∏–º–µ—Ä—ã —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–∞–∫—Ç–∏–∫

---

### 2.8 –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ Premium-–ø–æ–¥–∞—Ä–æ–∫ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (—Ä–∞–Ω–µ–µ)
- [x] **–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å "3 –¥–Ω—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ" –≤–æ –≤—Ç–æ—Ä–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏ —Ä–∞–Ω–æ
- [x] **–†–µ—à–µ–Ω–∏–µ:** –í—ã–¥–∞–≤–∞—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≥–ª—É–±–æ–∫–æ–≥–æ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- [x] **–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞:** "–•–æ—á—É, —á—Ç–æ–±—ã –Ω–∞—Å –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞–ª–æ ‚Äî –¥–∞—Ä—é 3 –¥–Ω—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π üíõ"
- [x] **–§–∞–π–ª—ã:** `bot/handlers/onboarding.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- Premium –≤—ã–¥–∞—ë—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `finish_onboarding()` (—Å—Ç—Ä–æ–∫–∏ 684-689)
- –í—ã–¥–∞—á–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ü–û–°–õ–ï —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–µ–ª–∏–ª—Å—è:
  - –°–æ—Ü–∏–∞–ª—å–Ω—ã–º –ø–æ—Ä—Ç—Ä–µ—Ç–æ–º (–≤–æ–∑—Ä–∞—Å—Ç, –≥–æ—Ä–æ–¥, —Ä–∞–±–æ—Ç–∞, —Ö–æ–±–±–∏)
  - –ò/–∏–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–µ–º—å–µ
- –§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ç–æ—á–Ω–æ –∫–∞–∫ –≤ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–∏
- –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 3 –¥–Ω—è (timedelta(days=3))
- –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `onboarding_completed` —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –≤—ã–¥–∞—á–µ Premium
- –§–ª–∞–≥ `onboarding_completed` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ True

---

## üèóÔ∏è –§–ê–ó–ê 3: "–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å" (1-2 –Ω–µ–¥–µ–ª–∏)

### 3.1 –ö—Ä–∏–∑–∏—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª (–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨!)

- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî•üî• –ö–†–ò–¢–ò–ß–ù–û
- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- –î–µ—Ç–µ–∫—Ç–æ—Ä –∫—Ä–∏–∑–∏—Å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ (`ai/crisis_detector.py`)
- –ö—Ä–∏–∑–∏—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª (`ai/crisis_protocol.py`)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (`bot/handlers/onboarding.py`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—Ä–∏–∑–∏—Å –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö: `receive_name`, `receive_social_portrait`, `receive_family_details`
- –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –∫—Ä–∏–∑–∏—Å–∞ —É—Ä–æ–≤–Ω—è high/critical:
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–æ–º–µ—Ä–∞–º–∏ –ø–æ–º–æ—â–∏
  - –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è (ConversationHandler.END)
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º –¥–∏–∞–ª–æ–≥–∞ —Å –∫—Ä–∏–∑–∏—Å–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º

**–¢—Ä–∏–≥–≥–µ—Ä—ã:**
- "–Ω–µ —Ö–æ—á—É –∂–∏—Ç—å"
- "–ø–æ–∫–æ–Ω—á–∏—Ç—å —Å —Å–æ–±–æ–π"
- "–Ω–µ—Ç —Å–º—ã—Å–ª–∞"
- "–≤—Å—ë –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ"

**–û—Ç–≤–µ—Ç:**
```
–ê–Ω—è, —è –≤–∏–∂—É, —á—Ç–æ —Ç–µ–±–µ –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–æ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å. üíõ

–í–∞–∂–Ω–æ: —è –Ω–µ –ø—Å–∏—Ö–æ–ª–æ–≥ –∏ –Ω–µ –º–æ–≥—É –∑–∞–º–µ–Ω–∏—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–æ–º–æ—â—å.

–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–∞ —Å—Ä–æ—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞:
üìû –¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è: 8-800-2000-122 (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ)
üìû –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å: 051 (—Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ)

–Ø —Ä—è–¥–æ–º –∏ –≥–æ—Ç–æ–≤–∞ –≤—ã—Å–ª—É—à–∞—Ç—å. –ù–æ –µ—Å–ª–∏ –º—ã—Å–ª–∏ –æ—á–µ–Ω—å —Ç—è–∂—ë–ª—ã–µ ‚Äî
–ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–∑–≤–æ–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º. üîí
```

---

### 3.2 A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- [ ] **–ì—Ä—É–ø–ø–∞ A:** –¢–µ–∫—É—â–∏–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è)
- [ ] **–ì—Ä—É–ø–ø–∞ B:** –ù–æ–≤—ã–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
- [ ] **–†–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏:** 200-300 –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] **–§–∞–π–ª—ã:** –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É `ab_tests` –≤ –ë–î
- [ ] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:**
- % –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö –ø—Ä–æ—Ñ–∏–ª—å
- –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π)
- % –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è –Ω–∞ 2-3 –¥–µ–Ω—å (retention)
- % –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–≤—à–∏—Ö Premium

---

### 3.3 –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI-–ø–∞—Ä—Å–∏–Ω–≥–∞
- [x] **–ó–∞–¥–∞—á–∞:** –ù–∞—É—á–∏—Ç—å Claude –∏–∑–≤–ª–µ–∫–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- [x] **–§–æ—Ä–º–∞—Ç:** Structured output —Å –ø–æ–ª—è–º–∏ –ø—Ä–æ—Ñ–∏–ª—è
- [x] **–§–∞–π–ª—ã:** `ai/profile_parser.py` (–Ω–æ–≤—ã–π –º–æ–¥—É–ª—å)
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî• –í–´–°–û–ö–ò–ô

**–î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç:**
```
# –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Å–µ–±–µ, –∏–∑–≤–ª–µ–∫–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

{
  "age": int | null,
  "city": str | null,
  "job": str | null,
  "hobby": str | null,
  "partner_name": str | null,
  "partner_job": str | null,
  "children": [
    {"age": int, "gender": str, "hobby": str}
  ] | null,
  "pets": str | null,
  "parents_relationship": str | null
}

–ù–ï –ø–µ—Ä–µ—Å–ø—Ä–∞—à–∏–≤–∞–π —Å—Ä–∞–∑—É –ø—Ä–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ—Ç–∞–ª–∏.
–ó–∞–ø–æ–ª–Ω—è–π —Ç–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ —É–ø–æ–º—è–Ω—É–ª.
```

---

### 3.4 –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- [x] **–°–æ–±—ã—Ç–∏—è:** `onboarding_started`, `name_entered`, `name_confirmed`, `problem_selected`, `social_portrait_entered`, `social_portrait_parsed`, `family_status_selected`, `family_details_entered`, `family_details_parsed`, `onboarding_completed`, `onboarding_skipped`
- [x] **–¶–µ–ª—å:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—ã–ø–∞–¥–∞—é—Ç –∏ –æ—Ü–µ–Ω–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å AI-–ø–∞—Ä—Å–∏–Ω–≥–∞
- [x] **–§–∞–π–ª—ã:** `database/migrations/versions/20260111_add_onboarding_events.py`, `database/models.py`, `database/repositories/onboarding_event.py`, `bot/handlers/onboarding.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô
- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (11.01.2026)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –¢–∞–±–ª–∏—Ü–∞ `onboarding_events` —Å JSONB –¥–∞–Ω–Ω—ã–º–∏
- –ú–æ–¥–µ–ª—å `OnboardingEvent` –≤ SQLAlchemy
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `OnboardingEventRepository` —Å –º–µ—Ç–æ–¥–∞–º–∏:
  - `log_event()` - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
  - `get_onboarding_funnel_stats()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–æ—Ä–æ–Ω–∫–∏
  - `get_dropoff_points()` - —Ç–æ—á–∫–∏ –æ—Ç—Å–µ–≤–∞
  - `get_ai_parsing_success_rate()` - —É—Å–ø–µ—à–Ω–æ—Å—Ç—å AI-–ø–∞—Ä—Å–∏–Ω–≥–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–æ –≤—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã:**
```sql
CREATE TABLE onboarding_events (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id BIGINT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    event_name VARCHAR(100) NOT NULL,
    event_data JSONB,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX ix_onboarding_events_user_id (user_id),
    INDEX ix_onboarding_events_created_at (created_at)
);
```

---

### 3.5 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–∞–∑–æ–≤ –¥–µ–ª–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–õ–æ–≥–∏–∫–∞:** –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 2+ —Ä–∞–∑–∞ –Ω–∞–∂–∞–ª "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" ‚Üí –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –∞–Ω–∫–µ—Ç–µ
- [x] **–ü–µ—Ä–µ—Ö–æ–¥:** –°—Ä–∞–∑—É –∫ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–µ
- [x] **–î–æ—Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –¥–∏–∞–ª–æ–≥–∞
- [x] **–§–∞–π–ª—ã:** `bot/handlers/onboarding.py`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –°–†–ï–î–ù–ò–ô

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- –î–æ–±–∞–≤–ª–µ–Ω —Å—á–µ—Ç—á–∏–∫ –ø—Ä–æ–ø—É—Å–∫–æ–≤ –≤ `context.user_data['skip_count']`
- –°—á–µ—Ç—á–∏–∫ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö:
  - `handle_family_status()` –ø—Ä–∏ –≤—ã–±–æ—Ä–µ "‚Ü™Ô∏è –†–∞—Å—Å–∫–∞–∂—É –ø–æ–∑–∂–µ"
  - `handle_skip_details()` –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –¥–µ—Ç–∞–ª–µ–π –æ —Å–µ–º—å–µ
- –í `finish_onboarding()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤:
  - –ï—Å–ª–∏ `skip_count >= 2`: –ø–µ—Ä–µ—Ö–æ–¥ –∫ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–µ
  - –°–æ–æ–±—â–µ–Ω–∏–µ: "{name}, —è –ø–æ–Ω–∏–º–∞—é ‚Äî –∏–Ω–æ–≥–¥–∞ –Ω–µ–ø—Ä–æ—Å—Ç–æ –¥–µ–ª–∏—Ç—å—Å—è –ª–∏—á–Ω—ã–º —Å—Ä–∞–∑—É üíõ"
  - –í–æ–ø—Ä–æ—Å: "–ß—Ç–æ —É —Ç–µ–±—è —Å–µ–π—á–∞—Å –Ω–∞ –¥—É—à–µ?" (–≤–º–µ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –∞–Ω–∫–µ—Ç–µ)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π —Å –¥–∞–Ω–Ω—ã–º–∏:
  - `skip_count` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–ø—É—Å–∫–æ–≤
  - `completed_with_minimal_info` ‚Äî —Ñ–ª–∞–≥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---

### 3.6 –í–∏–∑—É–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (—ç–º–æ–¥–∑–∏, —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–¶–µ–ª—å:** –°–¥–µ–ª–∞—Ç—å –¥–∏–∞–ª–æ–≥ –±–æ–ª–µ–µ –∂–∏–≤—ã–º –∏ –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º
- [x] **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** Markdown –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è (`**–≤–∞–∂–Ω–æ**`, `*–∫—É—Ä—Å–∏–≤*`)
- [x] **–≠–º–æ–¥–∑–∏:** üíõ üå∑ üîí ‚ú® ‚ù§Ô∏è (–Ω–æ –≤ –º–µ—Ä—É!)
- [x] **–§–∞–π–ª—ã:** –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –ù–ò–ó–ö–ò–ô

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- **–≠–º–æ–¥–∑–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å:**
  - üíõ (–∂—ë–ª—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ) ‚Äî –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —Ç–µ–ø–ª–∞
  - üå∑ (—Ç—é–ª—å–ø–∞–Ω) ‚Äî –¥–ª—è –¥–µ–ª–∏–∫–∞—Ç–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤
  - üîí (–∑–∞–º–æ–∫) ‚Äî –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
  - üòÖ (—É–ª—ã–±–∫–∞) ‚Äî –¥–ª—è —é–º–æ—Ä–∞
  - ‚úÖ ‚úèÔ∏è (–∫–Ω–æ–ø–∫–∏) ‚Äî –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  - üé§ (–º–∏–∫—Ä–æ—Ñ–æ–Ω) ‚Äî –¥–ª—è –≥–æ–ª–æ—Å–æ–≤—ã—Ö

- **–î–æ–±–∞–≤–ª–µ–Ω–æ Markdown-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - **–ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç** –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö –º–æ–º–µ–Ω—Ç–æ–≤:
    - "–Ω–∞—à —á–∞—Ç **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω**"
    - "–¥–∞—Ä—é —Ç–µ–±–µ **3 –¥–Ω—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π**"
  - *–ö—É—Ä—Å–∏–≤* –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤:
    - "*—Å–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç, –∏–∑ –∫–∞–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∏ —á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?*"
    - "*–∫–∞–∫ –∑–æ–≤—É—Ç —Ç–≤–æ–µ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞? –ï—Å—Ç—å –ª–∏ –¥–µ—Ç–∏?*"

- –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---

### 3.7 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ–æ–∫—É—Å-–≥—Ä—É–ø–ø–µ
- [ ] **–†–∞–∑–º–µ—Ä:** 10-15 –∂–µ–Ω—â–∏–Ω —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏
- [ ] **–ú–µ—Ç–æ–¥:** –ú–æ–¥–µ—Ä–∏—Ä—É–µ–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å think-aloud
- [ ] **–°–±–æ—Ä:** –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (–æ—â—É—â–µ–Ω–∏—è, –±–∞—Ä—å–µ—Ä—ã)
- [ ] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî•üî• –í–´–°–û–ö–ò–ô

**–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–≤—å—é:**
- –ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—â–µ–Ω–∏–∏ —Å –ú–∏—Ä–æ–π?
- –ß—Ç–æ —Å–º—É—Ç–∏–ª–æ –∏–ª–∏ –Ω–∞–ø—Ä—è–≥–ª–æ?
- –ß—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?
- –ü–æ–¥–µ–ª–∏–ª–∞—Å—å –±—ã –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π? –ü–æ—á–µ–º—É?

---

### 3.8 –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –æ–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–°–æ–∑–¥–∞—Ç—å:** `docs/onboarding/USER_JOURNEY.md` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—É—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [x] **Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
- [x] **–§–∞–π–ª—ã:** `docs/onboarding/`
- [x] **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî• –ù–ò–ó–ö–ò–ô

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- **–§–∞–π–ª [docs/onboarding/USER_JOURNEY.md](docs/onboarding/USER_JOURNEY.md)** ‚Äî –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—É—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞:**
  - üìñ –û–±–∑–æ—Ä –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –∏ —Ü–µ–ª–µ–π
  - üéØ –û–ø–∏—Å–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏ –∏ –±–∞—Ä—å–µ—Ä–æ–≤
  - üó∫Ô∏è Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤—Å–µ—Ö —à–∞–≥–æ–≤ –∏ –≤–µ—Ç–≤–ª–µ–Ω–∏–π
  - üìù –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ (1-12)
  - üö® –ö—Ä–∏–∑–∏—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –∏ —Ç–æ—á–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
  - üìä SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫ (Completion Rate, Time to Complete, Skip Rate, Crisis Detection Rate)
  - üîÑ –õ–æ–≥–∏–∫–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –¥–ª—è –Ω–µ–∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
  - üé® UX/UI Guidelines (typing indicators, emoji usage, button design, markdown)
  - üß™ –ì–∏–ø–æ—Ç–µ–∑—ã –¥–ª—è A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  - ‚úÖ Checklist –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **Mermaid –¥–∏–∞–≥—Ä–∞–º–º–∞ –≤–∫–ª—é—á–∞–µ—Ç:**
  - –í—Å–µ 12 —à–∞–≥–æ–≤ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
  - –í–µ—Ç–≤–ª–µ–Ω–∏—è (–∑–∞–≤–µ—Ä—à—ë–Ω –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ / –Ω–µ—Ç)
  - 3 —Ç–æ—á–∫–∏ –∫—Ä–∏–∑–∏—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ–º —Ñ–ª–æ—É
  - –õ–æ–≥–∏–∫—É skip_count –∏ –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
  - –¶–≤–µ—Ç–æ–≤—É—é –∫–æ–¥–∏—Ä–æ–≤–∫—É (—Å—Ç–∞—Ä—Ç, –∫–æ–Ω–µ—Ü, –∫—Ä–∏–∑–∏—Å, –Ω–∞–≥—Ä–∞–¥–∞)

- **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å:**
  - –ù–æ–≤—ã–π —á–ª–µ–Ω –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å –≤–µ—Å—å —Ñ–ª–æ—É –∑–∞ 15 –º–∏–Ω—É—Ç
  - –í—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –∏ SQL –∑–∞–ø—Ä–æ—Å—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
  - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ UX –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è
  - –û—Å–Ω–æ–≤–∞ –¥–ª—è –±—É–¥—É—â–∏—Ö A/B —Ç–µ—Å—Ç–æ–≤

---

## üéÅ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### 4.1 –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–£—Ç—Ä–æ:** "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! ‚òÄÔ∏è" (5:00 - 11:59)
- [x] **–î–µ–Ω—å:** "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! üå§" (12:00 - 17:59)
- [x] **–í–µ—á–µ—Ä:** "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! üåô" (18:00 - 22:59)
- [x] **–ù–æ—á—å:** "–ü—Ä–∏–≤–µ—Ç! üåú –¢—ã –Ω–µ —Å–ø–∏—à—å?" (23:00 - 4:59)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- **–§—É–Ω–∫—Ü–∏—è `get_time_of_day_greeting()`** –≤ [bot/handlers/onboarding.py](bot/handlers/onboarding.py:51-73)
  - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –º–æ—Å–∫–æ–≤—Å–∫–æ–µ –≤—Ä–µ–º—è (UTC+3)
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å —ç–º–æ–¥–∑–∏
  - –î–ª—è –Ω–æ—á–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ ‚Äî —ç–º–ø–∞—Ç–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å "–¢—ã –Ω–µ —Å–ø–∏—à—å?"

- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `start_onboarding()`:**
  - –ü–µ—Ä–≤–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å—Ç—Ä–æ–∫–∞ 175)
  - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å—Ç—Ä–æ–∫–∞ 158)

- **–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç:**
  - –°–æ–∑–¥–∞—ë—Ç –æ—â—É—â–µ–Ω–∏–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∑–∞–±–æ—Ç—ã
  - –ù–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ —ç–º–ø–∞—Ç–∏—á–Ω–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ç—Ä—É–¥–Ω–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏
  - –£—Å–∏–ª–∏–≤–∞–µ—Ç feeling "–∂–∏–≤–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞", –∞ –Ω–µ –±–æ—Ç–∞

### 4.2 –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç–æ–Ω –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–æ–∑—Ä–∞—Å—Ç–∞
- [ ] **18-25 –ª–µ—Ç:** –ë–æ–ª–µ–µ –Ω–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ ("–ü—Ä–∏–≤–µ—Ç! –î–∞–≤–∞–π –Ω–∞ —Ç—ã")
- [ ] **40+ –ª–µ—Ç:** –ß—É—Ç—å –±–æ–ª–µ–µ –¥–µ–ª–∏–∫–∞—Ç–Ω–æ

### 4.3 –ì–µ–æ–ª–æ–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
- [ ] **–ú–æ—Å–∫–≤–∞/–°–ü–±:** –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≥–æ—Ä–æ–¥—Å–∫–∏—Ö —Ä–µ–∞–ª–∏–π (–ø—Ä–æ–±–∫–∏, —Ç–µ–º–ø)
- [ ] **–†–µ–≥–∏–æ–Ω—ã:** –ë–æ–ª–µ–µ —Å–ø–æ–∫–æ–π–Ω–∞—è —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 4.4 –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –≤–æ–∑–≤—Ä–∞—Ç–µ

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª –æ–Ω–±–æ—Ä–¥–∏–Ω–≥:** –ú—è–≥–∫–æ–µ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞
- [x] **–¢–µ–∫—Å—Ç:** "–ü—Ä–∏–≤–µ—Ç! –ú—ã –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ. –ì–æ—Ç–æ–≤–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? üíõ"

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- **Scheduler job `send_onboarding_reminders()`** –≤ [services/scheduler.py](services/scheduler.py:933-1008)
  - –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–æ–º

- **–õ–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `onboarding_started` —Å–æ–±—ã—Ç–∏–µ –µ—Å—Ç—å, `onboarding_completed` = False
  - –£—Å–ª–æ–≤–∏–µ: –ü—Ä–æ—à–ª–æ >= 24 —á–∞—Å–æ–≤ —Å –º–æ–º–µ–Ω—Ç–∞ –Ω–∞—á–∞–ª–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –µ—â—ë –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å (`onboarding_reminder_sent` –Ω–µ—Ç)
  - –¢–µ–∫—Å—Ç: "–ü—Ä–∏–≤–µ—Ç, {name}! üíõ –≠—Ç–æ –ú–∏—Ä–∞. –ú—ã –Ω–µ –∑–∞–∫–æ–Ω—á–∏–ª–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ. –ì–æ—Ç–æ–≤–∞ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å?"

- **–ú–µ—Ç–æ–¥ `get_incomplete_onboarding_users()`** –≤ [database/repositories/user.py](database/repositories/user.py:506-529)
  - –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: `onboarding_completed = False`
  - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Ä–µ–º—è —Å –º–æ–º–µ–Ω—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
  - –ò—Å–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∫–æ—Ä–∑–∏–Ω–µ

- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è:**
  - –°–æ–±—ã—Ç–∏–µ: `onboarding_reminder_sent`
  - –î–∞–Ω–Ω—ã–µ: `hours_since_start` ‚Äî —Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ –ø—Ä–æ—à–ª–æ

- –§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω (PID: 3262139)

### 4.5 Gamification —ç–ª–µ–º–µ–Ω—Ç—ã

- [x] **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (17.01.2026)
- [x] **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä:** "–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ –Ω–∞ 60%"
- [x] **–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è:** "üèÜ –¢—ã –æ—Ç–∫—Ä—ã–ª–∞—Å—å! +3 –¥–Ω—è Premium"

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

- **–§—É–Ω–∫—Ü–∏—è `get_progress_message(step, total)`** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
- **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**
  - –®–∞–≥ 1 (–ø–æ—Å–ª–µ –∏–º–µ–Ω–∏): "–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ: 25% üåü‚≠ê‚≠ê‚≠ê"
  - –®–∞–≥ 2 (–ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–±–ª–µ–º—ã): "–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ: 50% üåüüåü‚≠ê‚≠ê"
  - –®–∞–≥ 3 (–ø–æ—Å–ª–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø–æ—Ä—Ç—Ä–µ—Ç–∞): "–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ: 75% üåüüåüüåü‚≠ê"
  - –®–∞–≥ 4 (—Ñ–∏–Ω–∞–ª): "‚ú® –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: 100% ‚ú®"

- **–°–æ–æ–±—â–µ–Ω–∏–µ –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏:**
  - "üèÜ **–ü–æ–∑–¥—Ä–∞–≤–ª—è—é!** –¢—ã –∑–∞–≤–µ—Ä—à–∏–ª–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–æ!"
  - –û–±—ä–µ–¥–∏–Ω–µ–Ω–æ —Å –ø–æ–¥–∞—Ä–∫–æ–º Premium –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞

- **–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —ç—Ñ—Ñ–µ–∫—Ç:**
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Å–Ω–∏–∂–∞–µ—Ç —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å
  - –ú–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (—ç—Ñ—Ñ–µ–∫—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç–∏)
  - –°–æ–∑–¥–∞—ë—Ç –æ—â—É—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

- –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä

---

## üìà KPI –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è —É—Å–ø–µ—Ö–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –≤–æ–≤–ª–µ—á–µ–Ω–∏—è:
- [ ] **Completion Rate:** % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∑–∞–≤–µ—Ä—à–∏–≤—à–∏—Ö –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
  - –¢–µ–∫—É—â–∏–π: ??? (–Ω—É–∂–Ω–æ –∏–∑–º–µ—Ä–∏—Ç—å)
  - –¶–µ–ª—å: >70%

- [ ] **Time to First Message:** –í—Ä–µ–º—è –¥–æ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
  - –¶–µ–ª—å: <3 –º–∏–Ω—É—Ç—ã

- [ ] **Average Session Length:** –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏
  - –¶–µ–ª—å: >10 —Å–æ–æ–±—â–µ–Ω–∏–π

### –ú–µ—Ç—Ä–∏–∫–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è:
- [ ] **D1 Retention:** % –≤–µ—Ä–Ω—É–≤—à–∏—Ö—Å—è –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å
  - –¶–µ–ª—å: >40%

- [ ] **D7 Retention:** % –∞–∫—Ç–∏–≤–Ω—ã—Ö —á–µ—Ä–µ–∑ –Ω–µ–¥–µ–ª—é
  - –¶–µ–ª—å: >20%

### –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏:
- [ ] **Premium Activation Rate:** % –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–≤—à–∏—Ö Premium –ø–æ—Å–ª–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
  - –¶–µ–ª—å: >15%

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
bot/
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ start.py              # ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ onboarding.py         # üÜï –°–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îú‚îÄ‚îÄ crisis.py             # üÜï –°–æ–∑–¥–∞—Ç—å
‚îÇ   ‚îî‚îÄ‚îÄ commands.py
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ typing.py             # üÜï –°–æ–∑–¥–∞—Ç—å (–∏–º–∏—Ç–∞—Ü–∏—è –ø–µ—á–∞—Ç–∏)
‚îÇ   ‚îî‚îÄ‚îÄ profile_parser.py     # üÜï –°–æ–∑–¥–∞—Ç—å (AI-–ø–∞—Ä—Å–∏–Ω–≥)
‚îú‚îÄ‚îÄ states/
‚îÇ   ‚îî‚îÄ‚îÄ onboarding_states.py  # üÜï –°–æ–∑–¥–∞—Ç—å (—Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞)
‚îî‚îÄ‚îÄ main.py                    # ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å (–¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –º–µ–Ω—é)

database/
‚îú‚îÄ‚îÄ models.py                  # ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å (–¥–æ–±–∞–≤–∏—Ç—å onboarding_events)
‚îî‚îÄ‚îÄ migrations/
    ‚îî‚îÄ‚îÄ add_onboarding_tracking.py  # üÜï –°–æ–∑–¥–∞—Ç—å

config/
‚îî‚îÄ‚îÄ prompts.py                 # ‚úèÔ∏è –û–±–Ω–æ–≤–∏—Ç—å (AI-–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–º–ø—Ç)

docs/
‚îî‚îÄ‚îÄ onboarding/
    ‚îú‚îÄ‚îÄ TODO_ONBOARDING.md     # üìÑ –≠—Ç–æ—Ç —Ñ–∞–π–ª
    ‚îú‚îÄ‚îÄ USER_JOURNEY.md        # üÜï –°–æ–∑–¥–∞—Ç—å
    ‚îú‚îÄ‚îÄ TESTING_PLAN.md        # üÜï –°–æ–∑–¥–∞—Ç—å
    ‚îî‚îÄ‚îÄ onboarding_recomendations.md  # ‚úÖ –£–∂–µ –µ—Å—Ç—å
```

---

## üöÄ Roadmap –ø–æ –Ω–µ–¥–µ–ª—è–º

### –ù–µ–¥–µ–ª—è 1 (–§–∞–∑–∞ 1 + –Ω–∞—á–∞–ª–æ –§–∞–∑—ã 2)
- –î–µ–Ω—å 1-2: –£–±—Ä–∞—Ç—å "—Å—Ç–µ–Ω—É —Ç–µ–∫—Å—Ç–∞", –∫–Ω–æ–ø–∫–∏, typing status
- –î–µ–Ω—å 3-4: –ö–Ω–æ–ø–∫–∏-–±–æ–ª–∏, –Ω–∞—á–∞–ª–æ "–∑–µ—Ä–∫–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞"
- –î–µ–Ω—å 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 1
- –î–µ–Ω—å 6-7: –î–æ—Ä–∞–±–æ—Ç–∫–∞ –ø–æ —Ñ–∏–¥–±–µ–∫—É

### –ù–µ–¥–µ–ª—è 2 (–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –§–∞–∑—ã 2)
- –î–µ–Ω—å 1-3: AI-–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Ñ–∏–ª—è, –∫–Ω–æ–ø–∫–∏ —Å—Ç–∞—Ç—É—Å–∞
- –î–µ–Ω—å 4-5: –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å", –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏
- –î–µ–Ω—å 6-7: –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ–¥–µ–ª—è 3 (–§–∞–∑–∞ 3)
- –î–µ–Ω—å 1-2: –ö—Ä–∏–∑–∏—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª
- –î–µ–Ω—å 3-4: A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–µ–Ω—å 5-7: –§–æ–∫—É—Å-–≥—Ä—É–ø–ø–∞, –∏—Ç–µ—Ä–∞—Ü–∏–∏

### –ù–µ–¥–µ–ª—è 4 (–ó–∞–ø—É—Å–∫)
- –î–µ–Ω—å 1-3: –§–∏–Ω–∞–ª—å–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- –î–µ–Ω—å 4-5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –î–µ–Ω—å 6-7: –ü–ª–∞–≤–Ω—ã–π —Ä–µ–ª–∏–∑ (—Å–Ω–∞—á–∞–ª–∞ 10%, –ø–æ—Ç–æ–º 50%, –ø–æ—Ç–æ–º 100%)

---

## üìù –®–∞–±–ª–æ–Ω—ã –∫–æ–¥–∞

### –®–∞–±–ª–æ–Ω –¥–ª—è ConversationHandler

```python
from telegram.ext import ConversationHandler, CommandHandler, MessageHandler, CallbackQueryHandler, filters

# –°–æ—Å—Ç–æ—è–Ω–∏—è
WAITING_NAME = 0
SOCIAL_PORTRAIT = 1
FAMILY_STATUS = 2
FAMILY_DETAILS = 3
PROBLEM_SELECTION = 4

async def start_onboarding(update, context):
    """–ù–∞—á–∞–ª–æ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞"""
    await send_with_typing(
        update.message,
        "–ü—Ä–∏–≤–µ—Ç! üíõ –Ø –ú–∏—Ä–∞.\n\n"
        "–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–æ –≤—ã—Å–ª—É—à–∞—Ç—å ‚Äî –±–µ–∑ –æ—Å—É–∂–¥–µ–Ω–∏—è.\n\n"
        "–ö–∞–∫ —è –º–æ–≥—É –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è?"
    )
    return WAITING_NAME

async def receive_name(update, context):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–º–µ–Ω–∏"""
    name = update.message.text
    context.user_data['profile'] = {'name': name}

    await send_with_typing(
        update.message,
        f"–û—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ, {name}! üå∑"
    )

    await send_with_typing(
        update.message,
        "–ß—Ç–æ–±—ã —Ç–µ–±–µ –±—ã–ª–æ —Å–ø–æ–∫–æ–π–Ω–æ: –Ω–∞—à —á–∞—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω üîí\n\n"
        "–ù–µ–º–Ω–æ–≥–æ –æ–±–æ –º–Ω–µ: –º–Ω–µ 42, —è –º–∞–º–∞ –¥–≤–æ–∏—Ö –¥–µ—Ç–µ–π –∏ 18 –ª–µ—Ç –≤ –±—Ä–∞–∫–µ. "
        "–°–∞–º–∞ –ø—Ä–æ—à–ª–∞ —á–µ—Ä–µ–∑ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É –ø–æ–Ω–∏–º–∞—é, –∫–∞–∫ –±—ã–≤–∞–µ—Ç –Ω–µ–ø—Ä–æ—Å—Ç–æ."
    )

    # –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–º—É –ø–æ—Ä—Ç—Ä–µ—Ç—É
    await send_with_typing(
        update.message,
        "–†–∞—Å—Å–∫–∞–∂–∏ –Ω–µ–º–Ω–æ–≥–æ –æ —Å–µ–±–µ: —Å–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç, –∏–∑ –∫–∞–∫–æ–≥–æ –≥–æ—Ä–æ–¥–∞ –∏ —á–µ–º –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è?"
    )

    return SOCIAL_PORTRAIT

# ConversationHandler
onboarding_handler = ConversationHandler(
    entry_points=[CommandHandler('start', start_onboarding)],
    states={
        WAITING_NAME: [MessageHandler(filters.TEXT & ~filters.COMMAND, receive_name)],
        SOCIAL_PORTRAIT: [MessageHandler(filters.TEXT & ~filters.COMMAND, parse_social_portrait)],
        FAMILY_STATUS: [CallbackQueryHandler(handle_family_status)],
        FAMILY_DETAILS: [MessageHandler(filters.TEXT & ~filters.COMMAND, parse_family_details)],
        PROBLEM_SELECTION: [CallbackQueryHandler(handle_problem_selection)],
    },
    fallbacks=[CommandHandler('cancel', cancel_onboarding)],
)
```

---

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ —Ä–µ–ª–∏–∑—É

### Must Have (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):
- [x] ‚úÖ –£–±—Ä–∞–Ω–∞ "—Å—Ç–µ–Ω–∞ —Ç–µ–∫—Å—Ç–∞"
- [x] ‚úÖ –ë–æ—Ç –∂–¥—ë—Ç –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã
- [x] ‚úÖ –ö–Ω–æ–ø–∫–∏ "–°–æ–≥–ª–∞—à–µ–Ω–∏–µ" —É–±—Ä–∞–Ω—ã —Å –ø–µ—Ä–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- [x] ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω typing status
- [x] ‚úÖ –ö–Ω–æ–ø–∫–∏-–±–æ–ª–∏ –≤–º–µ—Å—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- [x] ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å" –Ω–∞ –ª–∏—á–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö
- [x] ‚úÖ –ö—Ä–∏–∑–∏—Å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª
- [x] ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

### Should Have (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ):
- [ ] üîÑ AI-–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ—Ñ–∏–ª—è
- [ ] üîÑ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏–∫
- [ ] üîÑ A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] üîÑ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

### Could Have (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- [ ] ‚è≥ –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- [ ] ‚è≥ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ç–æ–Ω
- [ ] ‚è≥ Gamification

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ä–µ—Å—É—Ä—Å—ã

**–ì–æ—Ä—è—á–∏–µ –ª–∏–Ω–∏–∏ –¥–ª—è –∫—Ä–∏–∑–∏—Å–Ω–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞:**
- üìû 8-800-2000-122 ‚Äî –¢–µ–ª–µ—Ñ–æ–Ω –¥–æ–≤–µ—Ä–∏—è (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –∫—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω–æ)
- üìû 051 ‚Äî –ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ–º–æ—â—å (—Å –º–æ–±–∏–ª—å–Ω–æ–≥–æ)
- üìû 8-495-988-44-34 ‚Äî –ú–æ—Å–∫–æ–≤—Å–∫–∞—è —Å–ª—É–∂–±–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [onboarding_recomendations.md](./onboarding_recomendations.md) ‚Äî –≠–∫—Å–ø–µ—Ä—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- [Telegram Bot API - ConversationHandler](https://docs.python-telegram-bot.org/en/stable/telegram.ext.conversationhandler.html)
- [Claude API - Structured Outputs](https://docs.anthropic.com/)

---

**–°–æ–∑–¥–∞–Ω–æ:** 04.01.2026
**–ê–≤—Ç–æ—Ä:** AI Assistant –Ω–∞ –±–∞–∑–µ —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
**–í–µ—Ä—Å–∏—è:** 1.0
**–°–ª–µ–¥—É—é—â–∏–π –ø–µ—Ä–µ—Å–º–æ—Ç—Ä:** –ü–æ—Å–ª–µ –§–∞–∑—ã 1 (—á–µ—Ä–µ–∑ 1-2 –¥–Ω—è)
