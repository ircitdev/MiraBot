# üìã TODO: –ë–æ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ MiraDrugSupport

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 03.01.2026
**–ë–∞–∑–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:** [TZ_SUPPORT_BOT.md](TZ_SUPPORT_BOT.md)
**–¶–µ–ª–µ–≤–∞—è –≤–µ—Ä—Å–∏—è:** 2.6.0
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P2 (–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)

---

## üìä –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
- **–¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø:** –≠—Ç–∞–ø 5 –∑–∞–≤–µ—Ä—à—ë–Ω ‚úÖ ‚Üí –ü–µ—Ä–µ—Ö–æ–¥ –∫ –≠—Ç–∞–ø—É 6
- **–ü—Ä–æ–≥—Ä–µ—Å—Å:** 89% (43/48 –∑–∞–¥–∞—á)
- **–°—Ä–æ–∫:** 3-3.5 –Ω–µ–¥–µ–ª–∏ (13-17 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π)
- **–†–∏—Å–∫–∏:** –ù–∏–∑–∫–∏–µ (–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö API)

### –ö–ª—é—á–µ–≤—ã–µ –≤–µ—Ö–∏ (Milestones)
- [x] **M1:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞ (03.01.2026) ‚úÖ
- [x] **M2:** –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç (03.01.2026) ‚úÖ
- [x] **M3:** API –∞–¥–º–∏–Ω–∫–∏ –≥–æ—Ç–æ–≤–æ (03.01.2026) ‚úÖ
- [x] **M4:** UI –∞–¥–º–∏–Ω–∫–∏ –≥–æ—Ç–æ–≤–æ (03.01.2026) ‚úÖ
- [ ] **M5:** –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω (04.01.2026)

---

## ‚úÖ –≠–¢–ê–ü 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ó–ê–í–ï–†–®–Å–ù)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- ‚úÖ –°—É–ø–µ—Ä–≥—Ä—É–ø–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ
- ‚úÖ –ë–æ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ BotFather
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ settings.py
- ‚úÖ –ü–æ–ª—É—á–µ–Ω ID –≥—Ä—É–ø–ø—ã –∏ —Ç–æ–ø–∏–∫–æ–≤

---

### 1.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram

**–ó–∞–¥–∞—á–∏:**
- [x] **1.1.1** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather ‚úÖ
  - –ù–∞–∑–≤–∞–Ω–∏–µ: `MiraDrug Support`
  - Username: `@MiraDrugSupport_bot`
  - –û–ø–∏—Å–∞–Ω–∏–µ: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ú–∏—Ä—ã ‚Äî –¥—Ä—É–≥–∞ –¥–ª—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏"
  - –ö–æ–º–∞–Ω–¥—ã:
    - `/start` - –ù–∞—á–∞—Ç—å –¥–∏–∞–ª–æ–≥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
    - `/help` - –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
    - `/cancel` - –û—Ç–º–µ–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** @uspeshnyy
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** ‚Äî

- [x] **1.1.2** –í–∫–ª—é—á–∏—Ç—å Topics (–¢–µ–º—ã) –≤ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø–µ `MiraBotEvents` ‚úÖ
  - –ü—É—Ç—å: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥—Ä—É–ø–ø—ã ‚Üí –¢–µ–º—ã ‚Üí –í–∫–ª—é—á–∏—Ç—å
  - –°–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫–∏:
    - #1 General (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    - #2 Support (–¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
    - #4 Reviews (–¥–ª—è –æ—Ç–∑—ã–≤–æ–≤, —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** @uspeshnyy
  - **–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç

- [x] **1.1.3** –ü–æ–ª—É—á–∏—Ç—å ID —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã –∏ —Ç–æ–ø–∏–∫–æ–≤ ‚úÖ
  - –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/id` –∏–ª–∏ –±–æ—Ç–∞ @getidsbot
  - –ó–∞–ø–∏—Å–∞—Ç—å:
    - `SUPPORT_GROUP_ID` = `-1003578516171`
    - `SUPPORT_TOPIC_ID` = `2`
    - `REVIEWS_TOPIC_ID` = `4`
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** @uspeshnyy
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 1.1.1, 1.1.2

- [x] **1.1.4** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ ‚úÖ
  - –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
    - ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –≥—Ä—É–ø–ø–∞–º–∏ (Topics) - **–ò–°–ü–†–ê–í–õ–ï–ù–û 03.01.2026 15:25**
    - ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏ (can_manage_topics) - **–ò–°–ü–†–ê–í–õ–ï–ù–û 03.01.2026 15:25**
    - ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
    - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π
    - ‚ùå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
    - ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≥—Ä—É–ø–ø–µ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** @uspeshnyy
  - **–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç (+ 15 –º–∏–Ω—É—Ç –Ω–∞ –æ—Ç–ª–∞–¥–∫—É –ø—Ä–∞–≤)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 1.1.3
  - **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—Ä–∞–≤–æ can_manage_topics –Ω–µ –±—ã–ª–æ –≤—ã–¥–∞–Ω–æ, –±–æ—Ç –Ω–µ –º–æ–≥ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏
  - **–†–µ—à–µ–Ω–∏–µ:** –í—ã–¥–∞–Ω–æ –ø—Ä–∞–≤–æ "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–∞–º–∏" —á–µ—Ä–µ–∑ Telegram ‚Üí –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã ‚Üí –ú–∏—Ä–∞ –ø–æ–¥–¥–µ—Ä–¥–∂–∫–∞

---

### 1.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∏:**
- [x] **1.2.1** –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config/settings.py` ‚úÖ
  ```python
  # =====================================
  # SUPPORT BOT
  # =====================================
  SUPPORT_BOT_TOKEN: str = Field(default="", description="–¢–æ–∫–µ–Ω –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏")
  SUPPORT_GROUP_ID: int = Field(default=0, description="ID —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã MiraBotEvents")
  SUPPORT_TOPIC_ID: int = Field(default=2, description="ID —Ç–æ–ø–∏–∫–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏")
  REVIEWS_TOPIC_ID: int = Field(default=4, description="ID —Ç–æ–ø–∏–∫–∞ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤")
  SUPPORT_AUTO_REPLY: str = Field(
      default="‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–æ. –û–∂–∏–¥–∞–π—Ç–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.",
      description="–ê–≤—Ç–æ–æ—Ç–≤–µ—Ç –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è"
  )
  SUPPORT_ENABLED: bool = Field(default=True, description="–í–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏")
  SUPPORT_RATE_LIMIT: int = Field(default=10, description="–õ–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–∏–Ω—É—Ç—É")
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [config/settings.py](../../config/settings.py)

- [x] **1.2.2** –°–æ–∑–¥–∞—Ç—å `.env.support` (–ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏) ‚úÖ
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π `.env` —Ñ–∞–π–ª
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `.env`

- [x] **1.2.3** –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ‚úÖ
  - –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ `03.01.2026_–ò–¢–û–ì–ò_–ó–ê–ü–£–°–ö_–ë–û–¢–ê_–ü–û–î–î–ï–†–ñ–ö–ò.md`
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [docs/03.01.2026_–ò–¢–û–ì–ò_–ó–ê–ü–£–°–ö_–ë–û–¢–ê_–ü–û–î–î–ï–†–ñ–ö–ò.md](../03.01.2026_–ò–¢–û–ì–ò_–ó–ê–ü–£–°–ö_–ë–û–¢–ê_–ü–û–î–î–ï–†–ñ–ö–ò.md)

---

## ‚úÖ –≠–¢–ê–ü 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ó–ê–í–ï–†–®–Å–ù)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã 3 –Ω–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã: `support_users`, `support_messages`, `support_reviews`
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã

---

### 2.1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∏:**
- [x] **2.1.1** –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `SupportUser` –≤ `database/models.py` ‚úÖ
  ```python
  class SupportUser(Base):
      __tablename__ = "support_users"

      id = Column(Integer, primary_key=True, autoincrement=True)
      telegram_id = Column(BigInteger, unique=True, nullable=False, index=True)
      first_name = Column(String(255))
      last_name = Column(String(255), nullable=True)
      username = Column(String(255), nullable=True)
      photo_url = Column(String(500), nullable=True)

      topic_id = Column(Integer, nullable=False, index=True)

      is_bot_blocked = Column(Boolean, default=False)

      created_at = Column(DateTime, default=datetime.utcnow, nullable=False)
      updated_at = Column(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)

      messages = relationship("SupportMessage", back_populates="user", cascade="all, delete-orphan")
      reviews = relationship("SupportReview", back_populates="user", cascade="all, delete-orphan")
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [database/models.py](../../database/models.py:39-142)

- [x] **2.1.2** –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `SupportMessage` –≤ `database/models.py` ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [database/models.py](../../database/models.py)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.1.1

- [x] **2.1.3** –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `SupportReview` –≤ `database/models.py` ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [database/models.py](../../database/models.py)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.1.1

---

### 2.2. –ú–∏–≥—Ä–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∏:**
- [x] **2.2.1** –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Alembic –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü ‚úÖ
  - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã: `support_users`, `support_messages`, `support_reviews`
  - –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å—ã
  - –°–æ–∑–¥–∞—Ç—å ENUM —Ç–∏–ø—ã
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `database/migrations/versions/20260103_add_support_bot_tables.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.1.1, 2.1.2, 2.1.3

- [x] **2.2.2** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω ‚úÖ
  - –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –ë–î
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.2.1

- [x] **2.2.3** –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (seed) ‚úÖ
  - –î–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.2.2

---

### 2.3. –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (Data Access Layer)

**–ó–∞–¥–∞—á–∏:**
- [x] **2.3.1** –°–æ–∑–¥–∞—Ç—å `SupportUserRepository` ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1.5 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `database/repositories/support_user.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.2.2

- [x] **2.3.2** –°–æ–∑–¥–∞—Ç—å `SupportMessageRepository` ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1.5 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `database/repositories/support_message.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.2.2

- [x] **2.3.3** –°–æ–∑–¥–∞—Ç—å `SupportReviewRepository` ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `database/repositories/support_review.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.2.2

---

### 2.4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤

**–ó–∞–¥–∞—á–∏:**
- [x] **2.4.1** –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è `SupportUserRepository` ‚úÖ
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.3.1

- [x] **2.4.2** –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è `SupportMessageRepository` ‚úÖ
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.3.2

- [x] **2.4.3** –ù–∞–ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è `SupportReviewRepository` ‚úÖ
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.3.3

---

## ‚úÖ –≠–¢–ê–ü 3: –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–ó–ê–í–ï–†–®–Å–ù)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- ‚úÖ –ë–æ—Ç —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–ø–∏–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –°–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

### 3.1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

**–ó–∞–¥–∞—á–∏:**
- [x] **3.1.1** –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–æ–¥—É–ª—è `bot_support/` ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** –°–æ–∑–¥–∞–Ω—ã –≤—Å–µ –ø–∞–ø–∫–∏ –∏ —Ñ–∞–π–ª—ã

---

### 3.2. –°–µ—Ä–≤–∏—Å—ã (Business Logic)

**–ó–∞–¥–∞—á–∏:**
- [x] **3.2.1** –°–æ–∑–¥–∞—Ç—å `TopicService` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–ø–∏–∫–∞–º–∏ ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/services/topic_service.py`

- [x] **3.2.2** –°–æ–∑–¥–∞—Ç—å `UserService` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/services/user_service.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.3.1

- [x] **3.2.3** –°–æ–∑–¥–∞—Ç—å `MessageService` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/services/message_service.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.3.2

---

### 3.3. –£—Ç–∏–ª–∏—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [x] **3.3.1** –°–æ–∑–¥–∞—Ç—å `formatters.py` ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/utils/formatters.py`

- [x] **3.3.2** –°–æ–∑–¥–∞—Ç—å `rate_limiter.py` ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/utils/rate_limiter.py`

---

### 3.4. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (Handlers)

**–ó–∞–¥–∞—á–∏:**
- [x] **3.4.1** –°–æ–∑–¥–∞—Ç—å `start.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/handlers/start.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 3.2.1, 3.2.2

- [x] **3.4.2** –°–æ–∑–¥–∞—Ç—å `messages.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚úÖ
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –º–µ–¥–∏–∞: —Ç–µ–∫—Å—Ç, —Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –≥–æ–ª–æ—Å–æ–≤—ã–µ, –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Å—Ç–∏–∫–µ—Ä—ã
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/handlers/messages.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 3.2.3, 3.3.2

- [x] **3.4.3** –°–æ–∑–¥–∞—Ç—å `admin_messages.py` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∞–¥–º–∏–Ω–æ–≤ ‚úÖ
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –±–æ—Ç–∞)
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/handlers/admin_messages.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 3.2.3

---

### 3.5. –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∏ –∑–∞–ø—É—Å–∫

**–ó–∞–¥–∞—á–∏:**
- [x] **3.5.1** –°–æ–∑–¥–∞—Ç—å `main.py` ‚Äî —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –±–æ—Ç–∞ ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/main.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 3.4.1, 3.4.2, 3.4.3

- [x] **3.5.2** –°–æ–∑–¥–∞—Ç—å systemd service –¥–ª—è –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–§–∞–π–ª—ã:** `/etc/systemd/system/miradrug-support.service`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 3.5.1

---

### 3.6. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ó–∞–¥–∞—á–∏:**
- [x] **3.6.1** –î–æ–±–∞–≤–∏—Ç—å error handler –≤ –±–æ—Ç–∞ ‚úÖ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–§–∞–π–ª—ã:** `bot_support/main.py`

- [x] **3.6.2** –î–æ–±–∞–≤–∏—Ç—å retry logic –¥–ª—è Telegram API ‚úÖ
  - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ telegram bot library
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫

---

## ‚úÖ –≠–¢–ê–ü 4: API –¥–ª—è –∞–¥–º–∏–Ω–∫–∏ (–ó–ê–í–ï–†–®–Å–ù 03.01.2026 19:10)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:

- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å–ø–∏—Å–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### 4.1. API –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–í–æ–ø—Ä–æ—Å—ã"

**–ó–∞–¥–∞—á–∏:**
- [ ] **4.1.1** –°–æ–∑–¥–∞—Ç—å `support.py` ‚Äî API –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏–π
  ```python
  @router.get("/questions", response_model=SupportQuestionsResponse)
  async def get_questions(
      page: int = 1,
      limit: int = 20,
      current_user: dict = Depends(get_current_admin)
  ):
      """–°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π."""
      # 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (SupportUserRepository)
      # 2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—É—á–∏—Ç—å last_message_date –∏ count
      # 3. –û—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ last_message_date (DESC)
      # 4. –í–µ—Ä–Ω—É—Ç—å —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `webapp/api/routes/support.py` (–Ω–æ–≤—ã–π)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.3.1, 2.3.2

- [ ] **4.1.2** –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
  ```python
  @router.get("/questions/{user_id}/messages", response_model=SupportMessagesResponse)
  async def get_user_messages(
      user_id: int,
      page: int = 1,
      limit: int = 50,
      current_user: dict = Depends(get_current_admin)
  ):
      """–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è."""
      # SupportMessageRepository.get_by_user(user_id, page, limit)
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `webapp/api/routes/support.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 4.1.1

- [ ] **4.1.3** –°–æ–∑–¥–∞—Ç—å Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ API
  ```python
  class SupportUserItem(BaseModel):
      user_id: int
      telegram_id: int
      first_name: str
      last_name: Optional[str]
      username: Optional[str]
      avatar_url: Optional[str]
      topic_id: int
      total_messages: int
      last_message_date: Optional[datetime]
      last_message_text: Optional[str]

  class SupportQuestionsResponse(BaseModel):
      total: int
      page: int
      per_page: int
      questions: List[SupportUserItem]

  class SupportMessageItem(BaseModel):
      id: int
      sender_type: str  # "user" | "admin"
      message_text: Optional[str]
      media_type: str
      media_file_id: Optional[str]
      created_at: datetime

  class SupportMessagesResponse(BaseModel):
      total: int
      page: int
      messages: List[SupportMessageItem]
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `webapp/api/routes/support.py`

---

### 4.2. API –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ "–û—Ç–∑—ã–≤—ã"

**–ó–∞–¥–∞—á–∏:**
- [ ] **4.2.1** –°–æ–∑–¥–∞—Ç—å `reviews.py` ‚Äî API –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
  ```python
  @router.get("/reviews", response_model=SupportReviewsResponse)
  async def get_reviews(
      page: int = 1,
      limit: int = 20,
      permission: Optional[bool] = None,
      current_user: dict = Depends(get_current_admin)
  ):
      """–°–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π."""
      # SupportReviewRepository.get_all_paginated(page, limit, permission)
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `webapp/api/routes/reviews.py` (–Ω–æ–≤—ã–π)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 2.3.3

- [ ] **4.2.2** –°–æ–∑–¥–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç–∑—ã–≤–æ–≤
  ```python
  @router.get("/public/reviews", response_model=List[PublicReviewItem])
  async def get_public_reviews(
      limit: int = 10,
      permission: bool = True  # –¢–æ–ª—å–∫–æ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º
  ):
      """–ü—É–±–ª–∏—á–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ (–¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–∞)."""
      # SupportReviewRepository.export_to_json(permission, limit)
  ```
  - –ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ)
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `webapp/api/routes/reviews.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 4.2.1

- [ ] **4.2.3** –°–æ–∑–¥–∞—Ç—å Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤
  ```python
  class SupportReviewItem(BaseModel):
      id: int
      username: Optional[str]
      age: Optional[int]
      about_self: Optional[str]
      review_text: str
      permission_to_publish: bool
      created_at: datetime
      telegram_message_id: Optional[int]

  class SupportReviewsResponse(BaseModel):
      total: int
      page: int
      per_page: int
      reviews: List[SupportReviewItem]

  class PublicReviewItem(BaseModel):
      name: str  # "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä, 35 –ª–µ—Ç"
      about: str
      text: str
      date: str  # "03.01.2026"
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 20 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `webapp/api/routes/reviews.py`

---

### 4.3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–æ—É—Ç–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] **4.3.1** –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–æ—É—Ç—ã –≤ `webapp/api/main.py`
  ```python
  from webapp.api.routes import support, reviews

  app.include_router(support.router, prefix="/api/support", tags=["support"])
  app.include_router(reviews.router, prefix="/api/support", tags=["reviews"])
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `webapp/api/main.py`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 4.1.1, 4.2.1

---

## üé® –≠–¢–ê–ü 5: UI –ê–¥–º–∏–Ω–∫–∏ (–ó–ê–í–ï–†–®–Å–ù) ‚úÖ

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 03.01.2026 19:45
**–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
**–û—Ç—á—ë—Ç:** [03.01.2026_–≠–¢–ê–ü5_UI_–ó–ê–í–ï–†–®–ï–ù.md](../03.01.2026_–≠–¢–ê–ü5_UI_–ó–ê–í–ï–†–®–ï–ù.md)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- ‚úÖ –†–∞–∑–¥–µ–ª "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –º–µ–Ω—é
- ‚úÖ –°–ø–∏—Å–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç (–∞–∫–∫–æ—Ä–¥–µ–æ–Ω)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –û—Ç–∑—ã–≤—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ –∫–∞—Ä—Ç–æ—á–µ–∫
- ‚úÖ –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

---

### 5.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ –≤ –º–µ–Ω—é

**–ó–∞–¥–∞—á–∏:**
- [x] **5.1.1** –û–±–Ω–æ–≤–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∞–¥–º–∏–Ω–∫–∏ ‚úÖ
  - –î–æ–±–∞–≤–∏—Ç—å –ø—É–Ω–∫—Ç "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" –º–µ–∂–¥—É "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏" –∏ "–ö–æ–Ω—Ñ–∏–≥"
  - –ò–∫–æ–Ω–∫–∞: support_agent
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026 (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–Ω–µ–µ –≤ –≠—Ç–∞–ø–µ 4)
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:3680-3683](../../webapp/frontend/admin.html)

- [x] **5.1.2** –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–º–µ–Ω—é –¥–ª—è "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" ‚úÖ
  - –ü–æ–¥—Ä–∞–∑–¥–µ–ª "–í–æ–ø—Ä–æ—Å—ã" (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
  - –ü–æ–¥—Ä–∞–∑–¥–µ–ª "–û—Ç–∑—ã–≤—ã"
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026 (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–Ω–µ–µ –≤ –≠—Ç–∞–ø–µ 4)
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:3738-3747](../../webapp/frontend/admin.html)

---

### 5.2. –ü–æ–¥—Ä–∞–∑–¥–µ–ª "–í–æ–ø—Ä–æ—Å—ã"

**–ó–∞–¥–∞—á–∏:**
- [x] **5.2.1** –°–æ–∑–¥–∞—Ç—å HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Å–ø–∏—Å–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π ‚úÖ
  ```html
  <div id="support-questions-container">
      <div class="support-filters">
          <input type="search" id="support-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏...">
          <select id="support-sort">
              <option value="recent">–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ</option>
              <option value="oldest">–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ</option>
          </select>
      </div>

      <div id="support-questions-list" class="accordion-list">
          <!-- Accordion items –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
      </div>

      <div class="pagination">
          <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
      </div>
  </div>
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html](../../webapp/frontend/admin.html)

- [x] **5.2.2** –°–æ–∑–¥–∞—Ç—å JavaScript –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–∏—Å–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π ‚úÖ
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:13621-13661](../../webapp/frontend/admin.html)
  ```javascript
  async function loadSupportQuestions(page = 1) {
      const response = await apiRequest(`/support/questions?page=${page}&limit=20`);
      const questionsHtml = response.questions.map(q => renderQuestionItem(q)).join('');
      document.getElementById('support-questions-list').innerHTML = questionsHtml;
      renderPagination(response.total, response.page, response.per_page);
  }

  function renderQuestionItem(question) {
      return `
          <div class="accordion-item" data-user-id="${question.user_id}">
              <div class="accordion-header" onclick="toggleQuestion(${question.user_id})">
                  <img src="${question.avatar_url || '/default-avatar.png'}" class="user-avatar">
                  <div class="user-info">
                      <div class="user-name">${question.first_name} ${question.last_name || ''}</div>
                      <div class="user-meta">
                          ${question.total_messages} —Å–æ–æ–±—â–µ–Ω–∏–π ¬∑
                          –ü–æ—Å–ª–µ–¥–Ω–µ–µ: ${formatDate(question.last_message_date)}
                      </div>
                  </div>
              </div>
              <div class="accordion-body" id="question-body-${question.user_id}">
                  <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ -->
              </div>
          </div>
      `;
  }
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** [webapp/frontend/app.js](../../webapp/frontend/app.js)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5.2.1

- [x] **5.2.3** –°–æ–∑–¥–∞—Ç—å JavaScript –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ ‚úÖ
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:13724-13810](../../webapp/frontend/admin.html)
  ```javascript
  async function loadChatHistory(userId) {
      const response = await apiRequest(`/support/questions/${userId}/messages?limit=50`);
      const chatHtml = renderChatMessages(response.messages);
      document.getElementById(`question-body-${userId}`).innerHTML = `
          <div class="chat-header">
              <a href="tg://user?id=${response.telegram_id}" class="btn-link">–û—Ç–∫—Ä—ã—Ç—å –≤ Telegram</a>
              <a href="https://t.me/MiraBotEvents/${response.topic_id}" class="btn-link">–û—Ç–∫—Ä—ã—Ç—å —Ç–æ–ø–∏–∫</a>
          </div>
          <div class="chat-messages">
              ${chatHtml}
          </div>
      `;
  }

  function renderChatMessages(messages) {
      return messages.map(msg => `
          <div class="message ${msg.sender_type}">
              <div class="message-text">${escapeHtml(msg.message_text)}</div>
              ${msg.media_file_id ? renderMedia(msg) : ''}
              <div class="message-time">${formatTime(msg.created_at)}</div>
          </div>
      `).join('');
  }
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** [webapp/frontend/app.js](../../webapp/frontend/app.js)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5.2.2

- [x] **5.2.4** –î–æ–±–∞–≤–∏—Ç—å CSS —Å—Ç–∏–ª–∏ –¥–ª—è —á–∞—Ç–∞ ‚úÖ
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:3643-3960](../../webapp/frontend/admin.html)
  ```css
  .message {
      max-width: 70%;
      padding: 12px;
      border-radius: 12px;
      margin-bottom: 8px;
  }

  .message.user {
      background: #F0F0F0;
      color: #333;
      align-self: flex-start;
  }

  .message.admin {
      background: #007AFF;
      color: #FFF;
      align-self: flex-end;
  }

  .message-time {
      font-size: 11px;
      opacity: 0.7;
      margin-top: 4px;
  }
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `webapp/frontend/styles.css` (–∏–ª–∏ –≤—Å—Ç—Ä–æ–∏—Ç—å –≤ admin.html)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5.2.3

---

### 5.3. –ü–æ–¥—Ä–∞–∑–¥–µ–ª "–û—Ç–∑—ã–≤—ã"

**–ó–∞–¥–∞—á–∏:**
- [x] **5.3.1** –°–æ–∑–¥–∞—Ç—å HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Å–ø–∏—Å–∫–∞ –æ—Ç–∑—ã–≤–æ–≤ ‚úÖ
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:4490-4551](../../webapp/frontend/admin.html)
  ```html
  <div id="support-reviews-container">
      <div class="reviews-filters">
          <select id="reviews-permission-filter">
              <option value="">–í—Å–µ</option>
              <option value="true">–° —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º</option>
              <option value="false">–ë–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è</option>
          </select>
          <button id="export-reviews-btn" class="btn-secondary">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
      </div>

      <div id="reviews-grid" class="reviews-grid">
          <!-- Review cards –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
      </div>

      <div class="pagination">
          <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è -->
      </div>
  </div>
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 20 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html](../../webapp/frontend/admin.html)

- [x] **5.3.2** –°–æ–∑–¥–∞—Ç—å JavaScript –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∑—ã–≤–æ–≤ ‚úÖ
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:13815-13899](../../webapp/frontend/admin.html)
  ```javascript
  async function loadReviews(page = 1, permission = null) {
      const permissionParam = permission ? `&permission=${permission}` : '';
      const response = await apiRequest(`/support/reviews?page=${page}&limit=20${permissionParam}`);
      const reviewsHtml = response.reviews.map(r => renderReviewCard(r)).join('');
      document.getElementById('reviews-grid').innerHTML = reviewsHtml;
      renderPagination(response.total, response.page, response.per_page);
  }

  function renderReviewCard(review) {
      return `
          <div class="review-card">
              <div class="review-header">
                  <span class="review-username">üë§ ${review.username || '–ê–Ω–æ–Ω–∏–º'}</span>
                  ${review.age ? `<span class="review-age">üéÇ ${review.age} –ª–µ—Ç</span>` : ''}
              </div>
              ${review.about_self ? `<div class="review-about">‚ÑπÔ∏è ${review.about_self}</div>` : ''}
              <div class="review-text">üí¨ ${escapeHtml(review.review_text)}</div>
              <div class="review-footer">
                  <span class="review-permission">
                      üì¢ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ${review.permission_to_publish ? '‚úÖ –î–∞' : '‚ùå –ù–µ—Ç'}
                  </span>
                  <span class="review-date">üìÖ ${formatDate(review.created_at)}</span>
              </div>
              ${review.telegram_message_id ?
                  `<a href="https://t.me/MiraBotEvents/4/${review.telegram_message_id}"
                      class="btn-link" target="_blank">–û—Ç–∫—Ä—ã—Ç—å –≤ Telegram</a>`
                  : ''}
          </div>
      `;
  }
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1.5 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** [webapp/frontend/app.js](../../webapp/frontend/app.js)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5.3.1

- [x] **5.3.3** –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —ç–∫—Å–ø–æ—Ä—Ç–∞ –æ—Ç–∑—ã–≤–æ–≤ ‚úÖ
  - **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** 03.01.2026
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html:13904-13921](../../webapp/frontend/admin.html)
  ```javascript
  async function exportReviews() {
      const response = await apiRequest('/support/public/reviews?limit=100&permission=true');
      const blob = new Blob([JSON.stringify(response, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `reviews_${new Date().toISOString().split('T')[0]}.json`;
      a.click();
  }

  document.getElementById('export-reviews-btn').addEventListener('click', exportReviews);
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** [webapp/frontend/app.js](../../webapp/frontend/app.js)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5.3.2

- [ ] **5.3.4** –î–æ–±–∞–≤–∏—Ç—å CSS —Å—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –æ—Ç–∑—ã–≤–æ–≤
  ```css
  .reviews-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 20px;
      margin-top: 20px;
  }

  .review-card {
      background: #FFF;
      border: 1px solid #E0E0E0;
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  .review-text {
      margin: 12px 0;
      line-height: 1.5;
      color: #333;
  }

  .review-footer {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #666;
      margin-top: 12px;
  }
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 45 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `webapp/frontend/styles.css`
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5.3.2

---

### 5.4. –†–∞–∑–¥–µ–ª "–ö–æ–Ω—Ñ–∏–≥" ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ó–∞–¥–∞—á–∏:**
- [x] **5.4.1** –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é "–ü–æ–¥–¥–µ—Ä–∂–∫–∞" –≤ —Ä–∞–∑–¥–µ–ª "–ö–æ–Ω—Ñ–∏–≥" ‚úÖ
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  ```html
  <div class="config-section" id="config-support">
      <h3>‚öôÔ∏è –ü–æ–¥–¥–µ—Ä–∂–∫–∞</h3>

      <div class="form-group">
          <label>Support Bot Token</label>
          <input type="password" id="support-bot-token" class="form-control">
          <small>–¢–æ–∫–µ–Ω –±–æ—Ç–∞ @MiraDrugSupport_bot</small>
      </div>

      <div class="form-group">
          <label>Support Group ID</label>
          <input type="number" id="support-group-id" class="form-control">
          <small>ID —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã MiraBotEvents</small>
      </div>

      <div class="form-group">
          <label>Support Topic ID</label>
          <input type="number" id="support-topic-id" class="form-control" value="2">
      </div>

      <div class="form-group">
          <label>Reviews Topic ID</label>
          <input type="number" id="reviews-topic-id" class="form-control" value="4">
      </div>

      <div class="form-group">
          <label>Auto-reply message</label>
          <textarea id="support-auto-reply" class="form-control" rows="3"></textarea>
      </div>

      <div class="form-group">
          <label>
              <input type="checkbox" id="support-enabled" checked>
              –í–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
          </label>
      </div>

      <button onclick="saveSupportConfig()" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
  </div>
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** [webapp/frontend/admin.html](../../webapp/frontend/admin.html)

- [x] **5.4.2** –°–æ–∑–¥–∞—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ ‚úÖ
  - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ .env, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ
  ```python
  @router.get("/config/support", response_model=SupportConfigResponse)
  async def get_support_config(current_user: dict = Depends(get_current_admin)):
      """–ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏."""
      return {
          "support_bot_token": settings.SUPPORT_BOT_TOKEN,
          "support_group_id": settings.SUPPORT_GROUP_ID,
          "support_topic_id": settings.SUPPORT_TOPIC_ID,
          "reviews_topic_id": settings.REVIEWS_TOPIC_ID,
          "support_auto_reply": settings.SUPPORT_AUTO_REPLY,
          "support_enabled": settings.SUPPORT_ENABLED,
      }

  @router.post("/config/support")
  async def update_support_config(
      config: SupportConfigUpdate,
      current_user: dict = Depends(get_current_admin)
  ):
      """–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏."""
      # –û–±–Ω–æ–≤–∏—Ç—å .env —Ñ–∞–π–ª –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ë–î –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥–∞
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1.5 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `webapp/api/routes/config.py` (—Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 5.4.1

---

## üöÄ –≠–¢–ê–ü 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (1-2 –¥–Ω—è)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- –ö–æ–º–∞–Ω–¥–∞ /support –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–æ—Ç–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤ –∏–∑ —Ç–æ–ø–∏–∫–∞ #4 —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤ –¥–æ—Å—Ç—É–ø–µ–Ω

---

### 6.1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–æ—Ç–æ–º

**–ó–∞–¥–∞—á–∏:**
- [ ] **6.1.1** –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É `/support` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
  ```python
  async def support_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
      keyboard = [[InlineKeyboardButton(
          "–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏",
          url="https://t.me/MiraDrugSupport_bot?start=from_main_bot"
      )]]

      await update.message.reply_text(
          "–î–ª—è —Å–≤—è–∑–∏ —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø–µ—Ä–µ–π–¥–∏ –∫ –±–æ—Ç—É:\n"
          "üëâ @MiraDrugSupport_bot",
          reply_markup=InlineKeyboardMarkup(keyboard)
      )
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `bot/handlers/commands.py` (—Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

---

### 6.2. –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤ –∏–∑ —Ç–æ–ø–∏–∫–∞ #4

**–ó–∞–¥–∞—á–∏:**
- [ ] **6.2.1** –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤
  ```python
  class ReviewParserService:
      REVIEW_PATTERN = re.compile(r"""
          üë§\s*–û—Ç:\s*(@\w+)\n
          üéÇ\s*–í–æ–∑—Ä–∞—Å—Ç:\s*(\d+)\n
          ‚ÑπÔ∏è\s*–û\s*—Å–µ–±–µ:\s*(.+?)\n
          üí¨\s*–û—Ç–∑—ã–≤:\s*(.+?)\n
          üì¢\s*–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:\s*(–î–∞|–ù–µ—Ç)
      """, re.VERBOSE | re.DOTALL)

      async def parse_review_message(message: Message) -> Optional[SupportReview]:
          """–ü–∞—Ä—Å–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –æ—Ç–∑—ã–≤–æ–º."""
          match = self.REVIEW_PATTERN.search(message.text)
          if not match:
              return None

          username, age, about_self, review_text, permission = match.groups()
          # –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å –≤ –ë–î
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `bot_support/services/review_parser.py` (–Ω–æ–≤—ã–π)

- [ ] **6.2.2** –î–æ–±–∞–≤–∏—Ç—å —Å–ª—É—à–∞—Ç–µ–ª—å —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–æ–ø–∏–∫ #4
  ```python
  async def reviews_topic_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
      if update.message.message_thread_id != settings.REVIEWS_TOPIC_ID:
          return

      review = await ReviewParserService().parse_review_message(update.message)
      if review:
          logger.info(f"Parsed new review from {review.username}")
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `bot_support/handlers/reviews.py` (–Ω–æ–≤—ã–π)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 6.2.1

---

### 6.3. –ü—É–±–ª–∏—á–Ω—ã–π API –¥–ª—è –ª–µ–Ω–¥–∏–Ω–≥–∞

**–ó–∞–¥–∞—á–∏:**
- [ ] **6.3.1** –î–æ–±–∞–≤–∏—Ç—å CORS –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ API
  ```python
  from fastapi.middleware.cors import CORSMiddleware

  app.add_middleware(
      CORSMiddleware,
      allow_origins=["https://miradrug.ru", "http://localhost:3000"],
      allow_methods=["GET"],
      allow_headers=["*"],
  )
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Backend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 15 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `webapp/api/main.py`

- [ ] **6.3.2** –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥–µ
  ```javascript
  // docs/landing/reviews-integration.js
  async function loadReviews() {
      const response = await fetch('https://miradrug.ru/api/support/public/reviews?limit=10');
      const reviews = await response.json();

      const html = reviews.map(r => `
          <div class="review">
              <h4>${r.name}</h4>
              <p>${r.text}</p>
              <small>${r.date}</small>
          </div>
      `).join('');

      document.getElementById('reviews-container').innerHTML = html;
  }
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `docs/landing/reviews-integration.js` (–Ω–æ–≤—ã–π)
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 6.3.1

---

## üß™ –≠–¢–ê–ü 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2 –¥–Ω—è)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- –í—Å–µ unit-—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤—Ä—É—á–Ω—É—é

---

### 7.1. Unit-—Ç–µ—Å—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] **7.1.1** –¢–µ—Å—Ç—ã –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
  - `TopicService`
  - `UserService`
  - `MessageService`
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA / –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `tests/bot_support/services/` (–Ω–æ–≤–∞—è –ø–∞–ø–∫–∞)

- [ ] **7.1.2** –¢–µ—Å—Ç—ã –¥–ª—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
  - `/support/questions`
  - `/support/questions/{id}/messages`
  - `/support/reviews`
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA / –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `tests/webapp/api/routes/test_support.py` (–Ω–æ–≤—ã–π)

---

### 7.2. Integration —Ç–µ—Å—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] **7.2.1** –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Ñ–ª–æ—É: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –±–æ—Ç ‚Üí –∞–¥–º–∏–Ω ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
  - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `/start`
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - –û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∞
  - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA
  - **–í—Ä–µ–º—è:** 3 —á–∞—Å–∞
  - **–§–∞–π–ª—ã:** `tests/integration/test_support_flow.py` (–Ω–æ–≤—ã–π)

- [ ] **7.2.2** –¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–æ–ø–∏–∫ #4
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ –≤ –ë–î
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `tests/integration/test_review_parser.py` (–Ω–æ–≤—ã–π)

---

### 7.3. E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ä—É—á–Ω–æ–µ)

**–ó–∞–¥–∞—á–∏:**
- [ ] **7.3.1** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  - –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–∞
  - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –º–µ–¥–∏–∞
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å—ã–ª–∫–∏
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–ß–µ–∫-–ª–∏—Å—Ç:** –°–º. —Ä–∞–∑–¥–µ–ª 9.1

- [ ] **7.3.2** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–±—Ä–∞—â–µ–Ω–∏–π
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –æ—Ç–∑—ã–≤–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –≤ JSON
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA
  - **–í—Ä–µ–º—è:** 2 —á–∞—Å–∞
  - **–ß–µ–∫-–ª–∏—Å—Ç:** –°–º. —Ä–∞–∑–¥–µ–ª 9.2

---

## üì¶ –≠–¢–ê–ü 8: –î–µ–ø–ª–æ–π –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω (1 –¥–µ–Ω—å)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- –ë–î –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞–ø—É—â–µ–Ω
- API —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ê–¥–º–∏–Ω–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

---

### 8.1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é

**–ó–∞–¥–∞—á–∏:**
- [ ] **8.1.1** –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ë–î
  ```bash
  pg_dump -U mira -d mira_bot > backup_before_support_bot_$(date +%Y%m%d).sql
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

- [ ] **8.1.2** –û–±–Ω–æ–≤–∏—Ç—å .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
  - –î–æ–±–∞–≤–∏—Ç—å `SUPPORT_BOT_TOKEN`
  - –î–æ–±–∞–≤–∏—Ç—å `SUPPORT_GROUP_ID`
  - –î–æ–±–∞–≤–∏—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

---

### 8.2. –î–µ–ø–ª–æ–π

**–ó–∞–¥–∞—á–∏:**
- [ ] **8.2.1** –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω–µ
  ```bash
  cd /root/mira_bot
  source venv/bin/activate
  alembic upgrade head
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 8.1.1

- [ ] **8.2.2** –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  ```bash
  git pull origin main
  # –∏–ª–∏ —á–µ—Ä–µ–∑ scp
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç

- [ ] **8.2.3** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å systemd service –¥–ª—è –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  ```bash
  sudo cp deployment/mira-support-bot.service /etc/systemd/system/
  sudo systemctl daemon-reload
  sudo systemctl enable mira-support-bot
  sudo systemctl start mira-support-bot
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 8.2.2

- [ ] **8.2.4** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å webapp
  ```bash
  sudo systemctl restart mira-webapp
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 8.2.2

- [ ] **8.2.5** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
  ```bash
  systemctl status mirabot
  systemctl status mira-webapp
  systemctl status mira-support-bot
  ```
  - –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `active (running)`
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 5 –º–∏–Ω—É—Ç
  - **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** 8.2.3, 8.2.4

---

### 8.3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ó–∞–¥–∞—á–∏:**
- [ ] **8.3.1** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  ```bash
  # –õ–æ–≥–∏ —á–µ—Ä–µ–∑ journalctl
  journalctl -u mira-support-bot -f
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 10 –º–∏–Ω—É—Ç

- [ ] **8.3.2** –î–æ–±–∞–≤–∏—Ç—å healthcheck –¥–ª—è –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  - –°–æ–∑–¥–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health` –≤ –±–æ—Ç–µ
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ cron –∏–ª–∏ external service
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç

---

## üìö –≠–¢–ê–ü 9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –æ–±—É—á–µ–Ω–∏–µ (1 –¥–µ–Ω—å)

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ —ç—Ç–∞–ø–∞:
- README –æ–±–Ω–æ–≤–ª—ë–Ω
- –°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- –°–æ–∑–¥–∞–Ω—ã —á–µ–∫-–ª–∏—Å—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

### 9.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ó–∞–¥–∞—á–∏:**
- [ ] **9.1.1** –û–±–Ω–æ–≤–∏—Ç—å README.md –ø—Ä–æ–µ–∫—Ç–∞
  - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª "–ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏"
  - –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
  - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** [README.md](../../README.md)

- [ ] **9.1.2** –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
  - –ö–∞–∫ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è
  - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ—Ç–∑—ã–≤–∞–º–∏
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞ –≤ –∞–¥–º–∏–Ω–∫–µ
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 1 —á–∞—Å
  - **–§–∞–π–ª—ã:** `docs/SUPPORT_BOT_ADMIN_GUIDE.md` (–Ω–æ–≤—ã–π)

- [ ] **9.1.3** –°–æ–∑–¥–∞—Ç—å API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (Swagger)
  - –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è FastAPI –Ω–∞ `/docs`

---

### 9.2. –ß–µ–∫-–ª–∏—Å—Ç—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] **9.2.1** –°–æ–∑–¥–∞—Ç—å —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è QA —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  ```markdown
  ## –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

  ### Telegram –±–æ—Ç
  - [ ] `/start` —Å–æ–∑–¥–∞—ë—Ç —Ç–æ–ø–∏–∫ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - [ ] –ü–æ–≤—Ç–æ—Ä–Ω—ã–π `/start` –Ω–µ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ç–æ–ø–∏–∫
  - [ ] –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –≤ —Ç–æ–ø–∏–∫
  - [ ] –§–æ—Ç–æ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - [ ] –í–∏–¥–µ–æ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - [ ] –ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è
  - [ ] –û—Ç–≤–µ—Ç –∞–¥–º–∏–Ω–∞ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  - [ ] Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç (10 msg/min)

  ### –ê–¥–º–∏–Ω–∫–∞
  - [ ] –°–ø–∏—Å–æ–∫ –æ–±—Ä–∞—â–µ–Ω–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
  - [ ] –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
  - [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
  - [ ] –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
  - [ ] –ú–µ–¥–∏–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
  - [ ] –û—Ç–∑—ã–≤—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
  - [ ] –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ—Ç–∑—ã–≤–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
  - [ ] –≠–∫—Å–ø–æ—Ä—Ç JSON —Ä–∞–±–æ—Ç–∞–µ—Ç
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
  ```
  - **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** QA
  - **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç
  - **–§–∞–π–ª—ã:** `docs/SUPPORT_BOT_QA_CHECKLIST.md` (–Ω–æ–≤—ã–π)

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∏ KPI

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏
- [ ] API Latency (p95): < 500ms
- [ ] Bot Response Time: < 2s
- [ ] Database Query Time: < 100ms
- [ ] Error Rate: < 0.1%
- [ ] Uptime: > 99.5%

### –ë–∏–∑–Ω–µ—Å –º–µ—Ç—Ä–∏–∫–∏
- [ ] –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞: < 2 —á–∞—Å–∞
- [ ] –ü—Ä–æ—Ü–µ–Ω—Ç —Ä–µ—à—ë–Ω–Ω—ã—Ö –æ–±—Ä–∞—â–µ–Ω–∏–π: > 90%
- [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ —Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º: > 70%

---

## üéØ –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

**–í—Å–µ–≥–æ –∑–∞–¥–∞—á:** 48
**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** 30
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 62.5%

**–≠—Ç–∞–ø—ã:**
- [x] –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (4 –∑–∞–¥–∞—á–∏) ‚úÖ
- [x] –≠—Ç–∞–ø 2: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (12 –∑–∞–¥–∞—á) ‚úÖ
- [x] –≠—Ç–∞–ø 3: –ë–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (11 –∑–∞–¥–∞—á) ‚úÖ
- [ ] –≠—Ç–∞–ø 4: API (7 –∑–∞–¥–∞—á) - –°–õ–ï–î–£–Æ–©–ò–ô
- [ ] –≠—Ç–∞–ø 5: UI (12 –∑–∞–¥–∞—á)
- [ ] –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (4 –∑–∞–¥–∞—á–∏)
- [ ] –≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (5 –∑–∞–¥–∞—á)
- [ ] –≠—Ç–∞–ø 8: –î–µ–ø–ª–æ–π (8 –∑–∞–¥–∞—á) - —á–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –≠—Ç–∞–ø 9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (3 –∑–∞–¥–∞—á–∏) - —á–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 03.01.2026
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 03.01.2026 15:30
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** @uspeshnyy
**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** Claude Sonnet 4.5

**–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–µ–≥–æ–¥–Ω—è:**
- ‚úÖ –°–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ @MiraDrugSupport_bot
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã 3 —Ç–∞–±–ª–∏—Ü—ã –ë–î –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä–µ (systemd service)
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –≤—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∞ –±–æ—Ç–∞ (can_manage_topics)
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤ - —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–†–µ—à—ë–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

1. SQLite syntax error ‚Üí CURRENT_TIMESTAMP –≤–º–µ—Å—Ç–æ now()
2. Import error ‚Üí from database.session import get_session_context
3. Database path ‚Üí –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –∫ –ë–î
4. **can_manage_topics ‚Üí –≤—ã–¥–∞–Ω—ã –ø—Ä–∞–≤–∞ –≤ Telegram**
