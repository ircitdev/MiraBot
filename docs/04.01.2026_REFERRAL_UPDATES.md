# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –≤ –º–∏–Ω–∏-–∞–ø–ø–µ

**–î–∞—Ç–∞:** 04.01.2026 00:07
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ò–∑–º–µ–Ω–µ–Ω–∞ –æ—Å–Ω–æ–≤–Ω–∞—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞

**–ë—ã–ª–æ:** –°—Å—ã–ª–∫–∞ –Ω–∞ Telegram –±–æ—Ç–∞
```
https://t.me/MiraDrug_bot?start=YPGAMKTU
```

**–°—Ç–∞–ª–æ:** –°—Å—ã–ª–∫–∞ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥
```
https://miradrug.ru/?ref=YPGAMKTU
```

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `webapp/frontend/app.js` (—Å—Ç—Ä–æ–∫–∏ 584-594, 691-695)

### 2. –£–¥–∞–ª–µ–Ω –±–ª–æ–∫ "–°—Å—ã–ª–∫–∞ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥"

**–£–¥–∞–ª–µ–Ω–æ –∏–∑ HTML:**
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ `referral-landing-link`
- –ö–Ω–æ–ø–∫–∞ "üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥"
- –í–µ—Å—å –±–ª–æ–∫ `.referral-code-box` —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥

**–£–¥–∞–ª–µ–Ω–æ –∏–∑ JavaScript:**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è `copy-landing-referral` (—Å—Ç—Ä–æ–∫–∏ 892-926)
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è `referral-landing-link`

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `webapp/frontend/index.html` (—Å—Ç—Ä–æ–∫–∏ 248-254 —É–¥–∞–ª–µ–Ω—ã)
- `webapp/frontend/app.js` (—É–¥–∞–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏)

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –ø—Ä–æ—á–µ—Ä–∫–∏ "‚Äî" –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ:** –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ API:
- `statsData.invited_count` ‚Üí `#referral-count`
- `statsData.bonus_earned_days` ‚Üí `#referral-bonus`

**–§–∞–π–ª—ã:** `webapp/frontend/app.js` (—Å—Ç—Ä–æ–∫–∏ 596-609)

### 4. –ü–µ—Ä–µ–º–µ—â–µ–Ω –±–ª–æ–∫ "–ü—Ä–∏–≥–ª–∞—Å–∏ –ø–æ–¥—Ä—É–≥—É"

**–ë—ã–ª–æ:** –ë–ª–æ–∫ –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤–Ω–∏–∑—É –≤–∫–ª–∞–¥–∫–∏ "–ü–æ–¥–ø–∏—Å–∫–∞" (–ø–æ—Å–ª–µ —Ç–∞—Ä–∏—Ñ–æ–≤)

**–°—Ç–∞–ª–æ:** –ë–ª–æ–∫ –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ —Å–∞–º—ã–π –≤–µ—Ä—Ö –≤–∫–ª–∞–¥–∫–∏ "–ü–æ–¥–ø–∏—Å–∫–∞" (–≤—ã—à–µ –±–ª–æ–∫–∞ "üíé –ü–æ–¥–ø–∏—Å–∫–∞")

**–ü–æ—Ä—è–¥–æ–∫ —Ç–µ–ø–µ—Ä—å:**
1. üë≠ –ü—Ä–∏–≥–ª–∞—Å–∏ –ø–æ–¥—Ä—É–≥—É (—Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–æ–π –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π)
2. üíé –ü–æ–¥–ø–∏—Å–∫–∞ (—Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏)
3. üéÅ –ë–æ–Ω—É—Å—ã –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
4. üéüÔ∏è –ü—Ä–æ–º–æ-–∫–æ–¥
5. üìã –¢–∞—Ä–∏—Ñ—ã Premium
6. üîÑ –ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `webapp/frontend/index.html` (–±–ª–æ–∫ –ø–µ—Ä–µ–º–µ—â–µ–Ω —Å–æ —Å—Ç—Ä–æ–∫ 234-264 –Ω–∞ —Å—Ç—Ä–æ–∫–∏ 138-168)

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ app.js

**–§—É–Ω–∫—Ü–∏—è loadReferralTab() (—Å—Ç—Ä–æ–∫–∏ 580-623):**
```javascript
// –ë—ã–ª–æ:
const referralLink = codeData.link || '';
const referralCode = codeData.code || '';
const refLinkEl = document.getElementById('referral-link');
if (refLinkEl) {
    refLinkEl.value = referralLink; // –°—Å—ã–ª–∫–∞ –Ω–∞ –±–æ—Ç–∞
}

// –°—Ç–∞–ª–æ:
const referralCode = codeData.code || '';
const landingLink = referralCode ? `https://miradrug.ru/?ref=${referralCode}` : 'https://miradrug.ru/';
const refLinkEl = document.getElementById('referral-link');
if (refLinkEl) {
    refLinkEl.value = landingLink; // –°—Å—ã–ª–∫–∞ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥
}
```

**–§—É–Ω–∫—Ü–∏—è loadPaymentTab() (—Å—Ç—Ä–æ–∫–∏ 691-696):**
```javascript
// –ë—ã–ª–æ:
const linkValue = referralCode.link || '';
document.getElementById('referral-link').value = linkValue;
document.getElementById('referral-landing-link').value = landingLink;

// –°—Ç–∞–ª–æ:
const refCode = referralCode.code || '';
const landingLink = refCode ? `https://miradrug.ru/?ref=${refCode}` : 'https://miradrug.ru/';
document.getElementById('referral-link').value = landingLink;
```

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ index.html

**–£–¥–∞–ª–µ–Ω –±–ª–æ–∫ (–±—ã–ª–æ –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö 248-254):**
```html
<div class="referral-code-box" style="margin-top: 15px;">
    <label class="small-label">–°—Å—ã–ª–∫–∞ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥:</label>
    <input type="text" id="referral-landing-link" readonly>
    <div class="referral-buttons">
        <button id="copy-landing-referral" class="btn-secondary">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥</button>
    </div>
</div>
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:

**–ë–ª–æ–∫ "–ü—Ä–∏–≥–ª–∞—Å–∏ –ø–æ–¥—Ä—É–≥—É" (—Ç–µ–ø–µ—Ä—å –≤–≤–µ—Ä—Ö—É):**
```
üë≠ –ü—Ä–∏–≥–ª–∞—Å–∏ –ø–æ–¥—Ä—É–≥—É
–ü—Ä–∏–≥–ª–∞—Å–∏ –ø–æ–¥—Ä—É–≥—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –æ–±–µ +7 –¥–Ω–µ–π Premium!

–¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:
[https://miradrug.ru/?ref=YPGAMKTU]
[üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å] [üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è]

–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –ø–æ–¥—Ä—É–≥: 2
–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–Ω–µ–π Premium: 14

–î–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–∞–≥—Ä–∞–¥—ã (3 –ø–æ–¥—Ä—É–≥–∏):
[‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 66%
```

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

‚úÖ –í –ø–æ–ª–µ "–¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥
‚úÖ –ö–Ω–æ–ø–∫–∞ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å" –∫–æ–ø–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥
‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥ –≤ Telegram
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (invited_count, bonus_earned_days)
‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–∞–≥—Ä–∞–¥—ã –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –ë–ª–æ–∫ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É –≤–∫–ª–∞–¥–∫–∏ "–ü–æ–¥–ø–∏—Å–∫–∞"

---

## üöÄ –î–µ–ø–ª–æ–π

**–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:** 04.01.2026 00:06

**–§–∞–π–ª—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**
- `/root/mira_bot/webapp/frontend/index.html`
- `/root/mira_bot/webapp/frontend/app.js`

**–°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω:**
```bash
systemctl restart mira-webapp
# Status: active (running)
# PID: 3831903
```

---

## üìä API Endpoints (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)

**GET /referral/code**
```json
{
  "code": "YPGAMKTU",
  "link": "https://t.me/MiraDrug_bot?start=YPGAMKTU"
}
```
> –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `code` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥

**GET /referral/stats**
```json
{
  "invited_count": 2,
  "bonus_earned_days": 14,
  "milestone_progress": 66
}
```
> –í—Å–µ –ø–æ–ª—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

---

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π UX:** –û–¥–∏–Ω –±–ª–æ–∫ –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö, –º–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã
2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ª–µ–Ω–¥–∏–Ω–≥–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–µ–ª—è—Ç—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é
3. **–ê–∫—Ç—É–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:** –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –≤–º–µ—Å—Ç–æ –ø—Ä–æ—á–µ—Ä–∫–æ–≤
4. **–õ—É—á—à–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å:** –ë–ª–æ–∫ –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É –ø—Ä–∏–≤–ª–µ–∫–∞–µ—Ç –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è

---

## üîÑ Rollback (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

–î–ª—è –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. –í–µ—Ä–Ω—É—Ç—å –¥–≤–µ —Å—Å—ã–ª–∫–∏ (–Ω–∞ –±–æ—Ç–∞ –∏ –ª–µ–Ω–¥–∏–Ω–≥)
2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ª–µ–Ω–¥–∏–Ω–≥"
3. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –±–ª–æ–∫ –æ–±—Ä–∞—Ç–Ω–æ –≤–Ω–∏–∑

Git –∫–æ–º–∞–Ω–¥–∞:
```bash
git checkout HEAD~1 -- webapp/frontend/index.html webapp/frontend/app.js
```

---

**–ü—Ä–æ–µ–∫—Ç:** Mira Bot Mini App
**–í–µ—Ä—Å–∏—è:** 2.5.0
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
