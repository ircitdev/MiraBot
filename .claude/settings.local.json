{
  "permissions": {
    "allow": [
      "Bash(pip install:*)",
      "Bash(psql:*)",
      "Bash(where:*)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\15\\bin\\psql.exe\" --version)",
      "Bash(\"C:\\Program Files\\PostgreSQL\\16\\bin\\psql.exe\" --version)",
      "Bash(cmd /c \"dir \"\"C:\\Program Files\\PostgreSQL\"\" 2>nul || echo PostgreSQL not found in Program Files\")",
      "Bash(cmd /c \"where psql 2>nul || echo psql not in PATH\")",
      "Bash(cmd /c \"sc query postgresql* 2>nul | findstr SERVICE_NAME || echo No PostgreSQL service\")",
      "Bash(python -m bot.main:*)",
      "Bash(del \"d:\\DevTools\\Database\\MIRABOT\\mira_bot\\mira_bot.db\")",
      "Bash(cmd /c \"del \"\"d:\\DevTools\\Database\\MIRABOT\\mira_bot\\mira_bot.db\"\"\")",
      "Bash(python:*)",
      "Bash(tasklist:*)",
      "Bash(taskkill:*)",
      "Bash(cmd /c \"taskkill /F /PID 14176\")",
      "Bash(cmd /c \"dir d:\\DevTools\\Database\\MIRABOT\\mira_bot\\docs\")",
      "Bash(cmd /c \"dir d:\\DevTools\\Database\\MIRABOT\\mira_bot /s /b | findstr -i doc\")",
      "Bash(cmd /c \"tasklist /FI \"\"IMAGENAME eq python.exe\"\" 2>nul\")",
      "Bash(cmd /c \"tasklist | findstr python\")",
      "Bash(cmd /c \"taskkill /F /IM python.exe 2>nul & timeout /t 2 >nul\")",
      "Bash(cmd /c \"cd /d d:\\DevTools\\Database\\MIRABOT\\mira_bot && echo. > README.md && echo. > .env.example && echo. > .gitignore\")",
      "Bash(cmd /c \"taskkill /F /IM python.exe 2>nul & echo Python processes stopped\")",
      "Bash(git rev-parse:*)",
      "Bash(cmd /c \"del /f d:\\DevTools\\Database\\MIRABOT\\mira_bot\\nul 2>nul & echo done\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nInitial commit: MIRA BOT - Telegram Ð¿ÑÐ¸Ñ…Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð±Ð¾Ñ‚\n\nÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸:\n- AI-Ð´Ð¸Ð°Ð»Ð¾Ð³ Ñ‡ÐµÑ€ÐµÐ· Claude API\n- Ð“Ð¾Ð»Ð¾ÑÐ¾Ð²Ñ‹Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ (Whisper)\n- ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ¸ Free/Premium\n- ÐÐ´Ð¼Ð¸Ð½-Ð¿Ð°Ð½ÐµÐ»ÑŒ\n- ÐšÑ€Ð¸Ð·Ð¸Ñ-Ð´ÐµÑ‚ÐµÐºÑ†Ð¸Ñ\n- Ð ÐµÑ„ÐµÑ€Ð°Ð»ÑŒÐ½Ð°Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git branch:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nÐ”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Ð¿Ð»Ð°Ð½ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ MIRA BOT\n\nÐ¡Ð¾Ð´ÐµÑ€Ð¶Ð¸Ñ‚:\n- ÐÐ½Ð°Ð»Ð¸Ð· Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ¿Ð¸ÑÐºÐ¸ (13.12.2024)\n- Ð’Ñ‹ÑÐ²Ð»ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ñ‹ (Ð¿Ð°Ð¼ÑÑ‚ÑŒ, Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³ Ð¸Ð¼ÐµÐ½Ð¸, Ð¿Ð¾Ð» Ð¿Ð°Ñ€Ñ‚Ð½Ñ‘Ñ€Ð°)\n- ÐšÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ (Ð±Ð°Ð³Ð¸, Ð±ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ, ÑÑ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒ)\n- Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ (AI, Ð°Ð´Ð¼Ð¸Ð½ÐºÐ°, Ð¼Ð¾Ð½ÐµÑ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ)\n- UX ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ\n- Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð´Ð¾Ð»Ð³\n- Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÐ¼Ñ‹Ð¹ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ñ€ÐµÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nÐ˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÑ€Ð¸Ñ‚Ð¸Ñ‡Ð½Ñ‹Ñ… Ð±Ð°Ð³Ð¾Ð² Ð¸Ð· Ñ‚ÐµÑÑ‚Ð¾Ð²Ð¾Ð¹ Ð¿ÐµÑ€ÐµÐ¿Ð¸ÑÐºÐ¸\n\nÐ˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ:\n- Ð˜ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³ Ð¸Ð¼ÐµÐ½Ð¸ (utils/text_parser.py)\n  - Ð¢ÐµÐ¿ÐµÑ€ÑŒ Ð¸Ð·Ð²Ð»ÐµÐºÐ°ÐµÑ‚ \"ÐÐ¸Ð½Ð¾Ñ‡ÐºÐ°\" Ð¸Ð· \"ÐÐ°Ð·Ñ‹Ð²Ð°Ð¹ Ð¼ÐµÐ½Ñ ÐÐ¸Ð½Ð¾Ñ‡ÐºÐ°\"\n  - ÐžÑ‚ÐºÐ»Ð¾Ð½ÑÐµÑ‚ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ ÐºÐ°Ðº Ð¸Ð¼ÐµÐ½Ð° (\"Ð—Ð°Ð±Ñ‹Ð»Ð°?\")\n- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¾ Ð¿Ð¾Ð»Ðµ partner_gender Ð² Ð¼Ð¾Ð´ÐµÐ»ÑŒ User\n- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Rate Limiter (Ð¼Ð°ÐºÑ. 1 ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð² 2 ÑÐµÐº)\n- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð° Retry Ð»Ð¾Ð³Ð¸ÐºÐ° Ð´Ð»Ñ API Ð²Ñ‹Ð·Ð¾Ð²Ð¾Ð²\n- ÐžÐ±Ð½Ð¾Ð²Ð»Ñ‘Ð½ TODO.md Ñ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑÐ¾Ð¼\n\nÐÐ¾Ð²Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹:\n- utils/text_parser.py - Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³ Ñ‚ÐµÐºÑÑ‚Ð° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ\n- utils/retry.py - retry Ð»Ð¾Ð³Ð¸ÐºÐ° Ð´Ð»Ñ API\n- bot/middlewares/rate_limit.py - Ð·Ð°Ñ‰Ð¸Ñ‚Ð° Ð¾Ñ‚ ÑÐ¿Ð°Ð¼Ð°\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit -m \"$(cat <<''EOF''\nÐ”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½ Graceful error handling\n\nÐ˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ:\n- Ð Ð°Ð·Ð´ÐµÐ»ÑŒÐ½Ð°Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð¾ÑˆÐ¸Ð±Ð¾Ðº Claude API:\n  - APIConnectionError â€” Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ\n  - RateLimitError â€” Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¸Ðµ Ð»Ð¸Ð¼Ð¸Ñ‚Ð¾Ð²\n  - APIStatusError â€” Ð´Ñ€ÑƒÐ³Ð¸Ðµ API Ð¾ÑˆÐ¸Ð±ÐºÐ¸\n- Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð² Ð‘Ð” Ð¿Ñ€Ð¸ Ð¾ÑˆÐ¸Ð±ÐºÐ°Ñ…\n- ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ traceback Ð² Ð»Ð¾Ð³Ð°Ñ… Ð´Ð»Ñ Ð¾Ñ‚Ð»Ð°Ð´ÐºÐ¸\n- Ð¢ÐµÐ³Ð¸ Ð¾ÑˆÐ¸Ð±Ð¾Ðº Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ¸ (error:api_connection Ð¸ Ð´Ñ€.)\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(cmd /c \"dir /b d:\\DevTools\\Database\\MIRABOT\\mira_bot\\database\\migrations\\versions\")",
      "Bash(cmd /c \"dir /b D:\\DevTools\\Database\\MIRABOT\\mira_bot\\pic\")",
      "Bash(cmd /c \"dir D:\\DevTools\\Database\\MIRABOT\\mira_bot\\pic 2>&1\")",
      "Bash(ssh -o ConnectTimeout=10 root@31.44.7.144 \"pgrep -f ''python -m bot.main'' || echo ''Not running''\")",
      "Bash(ssh -o ConnectTimeout=10 root@31.44.7.144 \"pkill -f ''python -m bot.main''\")",
      "Bash(ssh:*)",
      "Bash('d:/DevTools/Database/MIRABOT/mira_bot/.github/workflows/test.yml' <<'WORKFLOW_EOF'\nname: Tests\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main, develop ]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    \n    strategy:\n      matrix:\n        python-version: [\"3.10\", \"3.11\"]\n    \n    steps:\n    - uses: actions/checkout@v4\n    \n    - name: Set up Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: 3.10\n    \n    - name: Install dependencies\n      run: |\n        python -m pip install --upgrade pip\n        pip install -r requirements.txt\n    \n    - name: Run tests\n      run: pytest --cov=. --cov-report=xml\n    \n    - name: Upload coverage\n      uses: codecov/codecov-action@v3\n      with:\n        file: ./coverage.xml\n\n  lint:\n    runs-on: ubuntu-latest\n    \n    steps:\n    - uses: actions/checkout@v4\n    \n    - name: Set up Python\n      uses: actions/setup-python@v4\n      with:\n        python-version: 3.10\n    \n    - name: Install linters\n      run: |\n        pip install black isort flake8 mypy\n    \n    - name: Check formatting\n      run: black --check .\n    \n    - name: Check imports\n      run: isort --check-only .\n    \n    - name: Lint\n      run: flake8 .\n    \n    - name: Type check\n      run: mypy . || true\nWORKFLOW_EOF)",
      "Bash('d:/DevTools/Database/MIRABOT/mira_bot/scripts/backup_db.sh' <<'BACKUP_EOF'\n#!/bin/bash\n#\n# ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð±ÑÐºÐ°Ð¿ Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… MIRA BOT\n# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ: ./backup_db.sh [retention_days]\n#\n\nset -e\n\n# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸\nBACKUP_DIR=\"${BACKUP_DIR:-/backup/mira_bot}\"\nDB_PATH=\"${DB_PATH:-/root/mira_bot/mira_bot.db}\"\nRETENTION_DAYS=\"${1:-7}\"\nTIMESTAMP=$(date +%Y%m%d_%H%M%S)\nBACKUP_FILE=\"${BACKUP_DIR}/mira_bot_${TIMESTAMP}.db\"\nLOG_FILE=\"${BACKUP_DIR}/backup.log\"\n\n# Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ\nlog() {\n    echo \"[$(date '+%Y-%m-%d %H:%M:%S')] $1\" | tee -a \"$LOG_FILE\"\n}\n\n# Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ Ð´Ð»Ñ Ð±ÑÐºÐ°Ð¿Ð¾Ð²\nmkdir -p \"$BACKUP_DIR\"\n\nlog \"=== Starting backup ===\"\n\n# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ Ð½Ð°Ð»Ð¸Ñ‡Ð¸Ðµ Ð‘Ð”\nif [ ! -f \"$DB_PATH\" ]; then\n    log \"ERROR: Database file not found: $DB_PATH\"\n    exit 1\nfi\n\n# Ð¡Ð¾Ð·Ð´Ð°Ñ‘Ð¼ Ð±ÑÐºÐ°Ð¿\nlog \"Creating backup: $BACKUP_FILE\"\ncp \"$DB_PATH\" \"$BACKUP_FILE\"\n\n# ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÐ¼ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ÑÑ‚ÑŒ\nif [ -f \"$BACKUP_FILE\" ]; then\n    SIZE=$(du -h \"$BACKUP_FILE\" | cut -f1)\n    log \"Backup created successfully: $BACKUP_FILE ($SIZE)\"\nelse\n    log \"ERROR: Failed to create backup\"\n    exit 1\nfi\n\n# Ð¡Ð¶Ð¸Ð¼Ð°ÐµÐ¼ Ð±ÑÐºÐ°Ð¿\nlog \"Compressing backup...\"\ngzip \"$BACKUP_FILE\"\nBACKUP_FILE=\"${BACKUP_FILE}.gz\"\n\nif [ -f \"$BACKUP_FILE\" ]; then\n    SIZE=$(du -h \"$BACKUP_FILE\" | cut -f1)\n    log \"Backup compressed: $BACKUP_FILE ($SIZE)\"\nfi\n\n# Ð£Ð´Ð°Ð»ÑÐµÐ¼ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹\nlog \"Removing backups older than $RETENTION_DAYS days...\"\nfind \"$BACKUP_DIR\" -name \"mira_bot_*.db.gz\" -type f -mtime +$RETENTION_DAYS -delete\n\nREMAINING=$(find \"$BACKUP_DIR\" -name \"mira_bot_*.db.gz\" -type f | wc -l)\nlog \"Remaining backups: $REMAINING\"\n\nlog \"=== Backup completed ===\"\nBACKUP_EOF)",
      "Bash(__NEW_LINE__ chmod +x 'd:/DevTools/Database/MIRABOT/mira_bot/scripts/backup_db.sh')",
      "Bash('d:/DevTools/Database/MIRABOT/mira_bot/scripts/setup_cron.sh' <<'CRON_EOF'\n#!/bin/bash\n#\n# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° cron Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð±ÑÐºÐ°Ð¿Ð¾Ð²\n# Ð—Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ð¾Ñ‚ root Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€Ðµ\n#\n\nCRON_SCHEDULE=\"${1:-0 3 * * *}\"  # ÐŸÐ¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ Ð² 3:00 ÐºÐ°Ð¶Ð´Ñ‹Ð¹ Ð´ÐµÐ½ÑŒ\nSCRIPT_PATH=\"/root/mira_bot/scripts/backup_db.sh\"\nRETENTION_DAYS=\"${2:-7}\"\n\necho \"Setting up cron job for database backups...\"\necho \"Schedule: $CRON_SCHEDULE\"\necho \"Retention: $RETENTION_DAYS days\"\n\n# Ð”Ð¾Ð±Ð°Ð²Ð»ÑÐµÐ¼ Ð·Ð°Ð´Ð°Ñ‡Ñƒ Ð² cron\n(crontab -l 2>/dev/null | grep -v \"$SCRIPT_PATH\"; echo \"$CRON_SCHEDULE $SCRIPT_PATH $RETENTION_DAYS >> /var/log/mira_backup.log 2>&1\") | crontab -\n\necho \"Cron job added successfully!\"\necho \"\"\necho \"Current crontab:\"\ncrontab -l\n\necho \"\"\necho \"To view backup logs: tail -f /var/log/mira_backup.log\"\nCRON_EOF)",
      "Bash(__NEW_LINE__ chmod +x 'd:/DevTools/Database/MIRABOT/mira_bot/scripts/setup_cron.sh')",
      "Bash('d:/DevTools/Database/MIRABOT/mira_bot/DOCKER.md' <<'DOCKER_DOC_EOF'\n# MIRA BOT - Docker Deployment\n\nÐ ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾ Ð·Ð°Ð¿ÑƒÑÐºÑƒ MIRA BOT Ñ‡ÐµÑ€ÐµÐ· Docker Compose.\n\n## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚\n\n### 1. ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ°\n\n```bash\n# ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐµÐ¼ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹\ngit clone https://github.com/ircitdev/MiraBot.git\ncd mira_bot\n\n# ÐšÐ¾Ð¿Ð¸Ñ€ÑƒÐµÐ¼ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸\ncp .env.example .env\n```\n\n### 2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° .env\n\nÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `.env` Ñ„Ð°Ð¹Ð» Ð¸ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ:\n\n```env\nBOT_TOKEN=your_telegram_bot_token\nADMIN_TELEGRAM_IDS=123456789\nCLAUDE_API_KEY=your_claude_api_key\n```\n\n### 3. Ð—Ð°Ð¿ÑƒÑÐº\n\n```bash\n# Ð—Ð°Ð¿ÑƒÑÐº Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²\ndocker-compose up -d\n\n# ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð»Ð¾Ð³Ð¾Ð²\ndocker-compose logs -f bot\n\n# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° ÑÑ‚Ð°Ñ‚ÑƒÑÐ°\ndocker-compose ps\ncurl http://localhost:8080/health\n```\n\n## ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°\n\nDocker Compose Ð¿Ð¾Ð´Ð½Ð¸Ð¼Ð°ÐµÑ‚ 3 ÑÐµÑ€Ð²Ð¸ÑÐ°:\n\n1. **PostgreSQL** (Ð¿Ð¾Ñ€Ñ‚ 5432)\n   - Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…\n   - Volume: `postgres_data`\n   - Backups: `./backups`\n\n2. **Redis** (Ð¿Ð¾Ñ€Ñ‚ 6379)\n   - ÐšÑÑˆ Ð¸ rate limiting\n   - Volume: `redis_data`\n\n3. **MIRA Bot** (Ð¿Ð¾Ñ€Ñ‚ 8080)\n   - Telegram Ð±Ð¾Ñ‚\n   - Health check: http://localhost:8080/health\n\n## Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ\n\n### Ð—Ð°Ð¿ÑƒÑÐº Ð¸ Ð¾ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°\n\n```bash\n# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ\ndocker-compose up -d\n\n# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ\ndocker-compose down\n\n# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ\ndocker-compose restart bot\n\n# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ volumes\ndocker-compose down -v\n```\n\n### Ð›Ð¾Ð³Ð¸\n\n```bash\n# Ð’ÑÐµ ÑÐµÑ€Ð²Ð¸ÑÑ‹\ndocker-compose logs -f\n\n# Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð±Ð¾Ñ‚\ndocker-compose logs -f bot\n\n# ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ 100 ÑÑ‚Ñ€Ð¾Ðº\ndocker-compose logs --tail=100 bot\n```\n\n### Ð’Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´\n\n```bash\n# Ð’Ð¾Ð¹Ñ‚Ð¸ Ð² ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€\ndocker-compose exec bot bash\n\n# Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸\ndocker-compose exec bot alembic upgrade head\n\n# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ñ‚ÐµÑÑ‚Ñ‹\ndocker-compose exec bot pytest\n\n# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ‚Ð¸Ð¿Ñ‹\ndocker-compose exec bot mypy .\n```\n\n## ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ\n\n```bash\n# ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½Ð¸Ð¹ ÐºÐ¾Ð´\ngit pull origin main\n\n# ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ\ndocker-compose up -d --build\n\n# ÐŸÑ€Ð¸Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ð¸\ndocker-compose exec bot alembic upgrade head\n```\n\n## Ð‘ÑÐºÐ°Ð¿Ñ‹\n\n### ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹\n\nÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ñ… Ð±ÑÐºÐ°Ð¿Ð¾Ð² (Ð½Ð° Ñ…Ð¾ÑÑ‚Ðµ):\n\n```bash\n# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ cron Ð´Ð»Ñ ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ñ… Ð±ÑÐºÐ°Ð¿Ð¾Ð² Ð² 3:00\n./scripts/setup_cron.sh \"0 3 * * *\" 7\n```\n\n### Ð ÑƒÑ‡Ð½Ð¾Ð¹ Ð±ÑÐºÐ°Ð¿\n\n```bash\n# Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð±ÑÐºÐ°Ð¿\n./scripts/backup_db.sh\n\n# Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· Ð±ÑÐºÐ°Ð¿Ð°\n./scripts/restore_db.sh /backup/mira_bot/mira_bot_20241214_120000.db.gz\n```\n\n### Ð‘ÑÐºÐ°Ð¿ PostgreSQL\n\n```bash\n# Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ð‘Ð”\ndocker-compose exec db pg_dump -U mirabot mira_bot > backup.sql\n\n# Ð˜Ð¼Ð¿Ð¾Ñ€Ñ‚ Ð‘Ð”\ndocker-compose exec -T db psql -U mirabot mira_bot < backup.sql\n```\n\n## ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³\n\n### Health Checks\n\n```bash\n# ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð²ÑÐµÑ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²\ndocker-compose ps\n\n# Health check Ð±Ð¾Ñ‚Ð°\ncurl http://localhost:8080/health\n\n# Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ\ncurl http://localhost:8080/health | jq\n```\n\n### ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸\n\n```bash\n# Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²\ndocker stats\n\n# Ð¢Ð¾Ð»ÑŒÐºÐ¾ MIRA Bot\ndocker stats mira_bot\n```\n\n## Production\n\n### Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸ Ð´Ð»Ñ production\n\n1. **Ð¡Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð‘Ð”:**\n   ```env\n   DB_PASSWORD=strong_random_password_here\n   JWT_SECRET=another_strong_random_secret\n   ```\n\n2. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ HTTPS** (Ñ‡ÐµÑ€ÐµÐ· nginx reverse proxy)\n\n3. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³** (Prometheus + Grafana)\n\n4. **Ð ÐµÐ³ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹:**\n   ```bash\n   # Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ðµ Ð±ÑÐºÐ°Ð¿Ñ‹ Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸ÐµÐ¼ 30 Ð´Ð½ÐµÐ¹\n   ./scripts/setup_cron.sh \"0 3 * * *\" 30\n   ```\n\n5. **Ð›Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ:**\n   ```env\n   LOG_LEVEL=INFO  # WARNING Ð´Ð»Ñ production\n   ```\n\n### Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ±Ð¾Ð²Ð°Ð½Ð¸Ñ\n\nÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼:\n- CPU: 1 core\n- RAM: 1GB\n- Disk: 10GB\n\nÐ ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ:\n- CPU: 2 cores\n- RAM: 2GB\n- Disk: 20GB SSD\n\n## Troubleshooting\n\n### Ð‘Ð¾Ñ‚ Ð½Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ\n\n```bash\n# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸\ndocker-compose logs bot\n\n# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ health\ncurl http://localhost:8080/health\n\n# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ\ndocker-compose restart bot\n```\n\n### Ð‘Ð°Ð·Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð°\n\n```bash\n# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ PostgreSQL\ndocker-compose ps db\ndocker-compose logs db\n\n# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ\ndocker-compose restart db\n```\n\n### Redis Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿ÐµÐ½\n\n```bash\n# ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Redis\ndocker-compose exec redis redis-cli ping\n\n# ÐŸÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ\ndocker-compose restart redis\n```\n\n### Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð²ÑÑ‘\n\n```bash\n# ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸ ÑƒÐ´Ð°Ð»Ð¸Ñ‚ÑŒ Ð²ÑÑ‘ (Ð²ÐºÐ»ÑŽÑ‡Ð°Ñ Ð´Ð°Ð½Ð½Ñ‹Ðµ!)\ndocker-compose down -v\n\n# ÐŸÐµÑ€ÐµÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ\ndocker-compose up -d\n```\n\n## ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ\n\nÐ¡Ð¼. `.env.example` Ð´Ð»Ñ Ð¿Ð¾Ð»Ð½Ð¾Ð³Ð¾ ÑÐ¿Ð¸ÑÐºÐ° Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ñ….\n\nÐžÐ±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ:\n- `BOT_TOKEN` â€” Telegram bot token\n- `CLAUDE_API_KEY` â€” Claude API key\n- `ADMIN_TELEGRAM_IDS` â€” ID Ð°Ð´Ð¼Ð¸Ð½Ð¾Ð² (Ñ‡ÐµÑ€ÐµÐ· Ð·Ð°Ð¿ÑÑ‚ÑƒÑŽ)\n\nÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ:\n- `LOG_LEVEL` â€” ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð»Ð¾Ð³Ð¾Ð² (DEBUG/INFO/WARNING/ERROR)\n- `FREE_MESSAGES_PER_DAY` â€” Ð»Ð¸Ð¼Ð¸Ñ‚ Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ñ… ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹\n- `REDIS_URL` â€” URL Redis ÑÐµÑ€Ð²ÐµÑ€Ð°\n- `DATABASE_URL` â€” URL PostgreSQL\n\n## Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾\n\n### Ð Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ°\n\nÐ”Ð»Ñ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð»ÑƒÑ‡ÑˆÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ SQLite:\n\n```env\nDATABASE_URL=sqlite:///./mira_bot.db\n```\n\nÐ˜ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ð±Ð¾Ñ‚Ð° Ð½Ð°Ð¿Ñ€ÑÐ¼ÑƒÑŽ:\n\n```bash\npython -m bot.main\n```\n\n### CI/CD\n\nGitHub Actions Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸:\n- Ð—Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ Ñ‚ÐµÑÑ‚Ñ‹ Ð¿Ñ€Ð¸ push\n- Ð”ÐµÐ¿Ð»Ð¾Ð¸Ñ‚ Ð½Ð° production Ð¿Ñ€Ð¸ push Ð² main\n\nÐ¡Ð¼. `.github/workflows/` Ð´Ð»Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹.\nDOCKER_DOC_EOF)"
    ]
  }
}
