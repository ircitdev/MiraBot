<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–∏—Ä–∞ ‚Äî –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div id="app">
        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" data-tab="stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            <button class="tab" data-tab="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>

        <!-- Stats Tab -->
        <div id="stats-tab" class="tab-content active">
            <div class="section">
                <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-messages">-</div>
                        <div class="stat-label">–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="week-messages">-</div>
                        <div class="stat-label">–ó–∞ –Ω–µ–¥–µ–ª—é</div>
                    </div>
                </div>

                <div class="subscription-card">
                    <h3 id="subscription-title">Premium</h3>
                    <p id="subscription-info"></p>
                </div>
            </div>

            <div class="section">
                <h3>üìà –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∑–∞ –Ω–µ–¥–µ–ª—é</h3>
                <canvas id="mood-chart"></canvas>
            </div>

            <div class="section">
                <h3>üí≠ –¢–æ–ø —Ç–µ–º—ã</h3>
                <div id="topics-list"></div>
            </div>

            <div class="section">
                <h3>üòä –≠–º–æ—Ü–∏–∏</h3>
                <div id="emotions-list"></div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="section">
                <h2>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>

                <div class="setting-group">
                    <label for="display-name">–ö–∞–∫ –∫ —Ç–µ–±–µ –æ–±—Ä–∞—â–∞—Ç—å—Å—è</label>
                    <input type="text" id="display-name" placeholder="–ò–º—è" disabled>
                </div>

                <div class="setting-group">
                    <label for="persona">–ü–µ—Ä—Å–æ–Ω–∞</label>
                    <select id="persona" disabled>
                        <option value="mira">–ú–∏—Ä–∞ (–ø–æ–¥—Ä—É–≥–∞, 42)</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label for="partner-name">–ò–º—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞</label>
                    <input type="text" id="partner-name" placeholder="–ò–º—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞">
                </div>

                <div class="setting-group">
                    <label for="partner-gender">–ü–æ–ª –ø–∞—Ä—Ç–Ω—ë—Ä–∞</label>
                    <select id="partner-gender" disabled>
                        <option value="">–ù–µ —É–∫–∞–∑–∞–Ω–æ</option>
                        <option value="male">–ú—É–∂—Å–∫–æ–π</option>
                        <option value="female">–ñ–µ–Ω—Å–∫–∏–π</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>–ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–µ –¥–∞—Ç—ã</label>
                    <input type="date" id="birthday" placeholder="–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è">
                    <label class="small-label">–î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                    <input type="date" id="anniversary" placeholder="–ì–æ–¥–æ–≤—â–∏–Ω–∞">
                    <label class="small-label">–ì–æ–¥–æ–≤—â–∏–Ω–∞ —Å–≤–∞–¥—å–±—ã</label>
                </div>

                <div class="setting-group">
                    <label>–†–∏—Ç—É–∞–ª—ã</label>
                    <div class="checkbox-group">
                        <label>
                            <input type="checkbox" id="ritual-morning" data-ritual="morning">
                            –£—Ç—Ä–µ–Ω–Ω–∏–π check-in
                        </label>
                        <label>
                            <input type="checkbox" id="ritual-evening" data-ritual="evening">
                            –í–µ—á–µ—Ä–Ω–∏–π check-in
                        </label>
                    </div>
                </div>

                <div class="setting-group" id="time-settings">
                    <label for="morning-time">–í—Ä–µ–º—è —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Ä–∏—Ç—É–∞–ª–∞</label>
                    <input type="time" id="morning-time">

                    <label for="evening-time">–í—Ä–µ–º—è –≤–µ—á–µ—Ä–Ω–µ–≥–æ —Ä–∏—Ç—É–∞–ª–∞</label>
                    <input type="time" id="evening-time">
                </div>

                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="proactive-messages">
                        –ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
                    </label>
                    <span class="hint">–ú–∏—Ä–∞ –±—É–¥–µ—Ç –∏–Ω–æ–≥–¥–∞ –ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤–æ–π</span>
                </div>

                <!-- –¢—Ä–∏–≥–≥–µ—Ä—ã –∏ —Ç–µ–º—ã –¥–ª—è –∏–∑–±–µ–≥–∞–Ω–∏—è -->
                <div class="setting-group">
                    <label for="topics-avoided">–¢–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –ù–ï —Ö–æ—á–µ—Ç—Å—è –æ–±—Å—É–∂–¥–∞—Ç—å</label>
                    <textarea id="topics-avoided" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–ª–∏—Ç–∏–∫–∞, —Ä–µ–ª–∏–≥–∏—è, —Ä–∞–±–æ—Ç–∞..." rows="3"></textarea>
                    <span class="hint">–£–∫–∞–∂–∏—Ç–µ —Ç–µ–º—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é</span>
                </div>

                <!-- –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É -->
                <div class="setting-group">
                    <label>–ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É</label>

                    <label>
                        <input type="checkbox" id="meditation-enabled">
                        –ü—Ä–∏—Å—ã–ª–∞—Ç—å –º–µ–¥–∏—Ç–∞—Ü–∏–∏
                    </label>

                    <div id="meditation-settings" style="margin-left: 20px; display: none;">
                        <label class="small-label">–¢–∏–ø—ã –º–µ–¥–∏—Ç–∞—Ü–∏–π:</label>
                        <div class="checkbox-group">
                            <label><input type="checkbox" class="meditation-type" value="morning"> üåÖ –£—Ç—Ä–µ–Ω–Ω–∏–µ</label>
                            <label><input type="checkbox" class="meditation-type" value="sleep"> üåô –î–ª—è —Å–Ω–∞</label>
                            <label><input type="checkbox" class="meditation-type" value="anxiety"> üåä –ü—Ä–∏ —Ç—Ä–µ–≤–æ–≥–µ</label>
                            <label><input type="checkbox" class="meditation-type" value="relaxation"> üßò‚Äç‚ôÄÔ∏è –†–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏–µ</label>
                        </div>

                        <label for="meditation-frequency" class="small-label">–ß–∞—Å—Ç–æ—Ç–∞:</label>
                        <select id="meditation-frequency">
                            <option value="daily">–ï–∂–µ–¥–Ω–µ–≤–Ω–æ</option>
                            <option value="3_per_week">3 —Ä–∞–∑–∞ –≤ –Ω–µ–¥–µ–ª—é</option>
                            <option value="weekly">–ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ</option>
                        </select>
                    </div>

                    <label>
                        <input type="checkbox" id="exercises-enabled">
                        –ü—Ä–∏—Å—ã–ª–∞—Ç—å —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –¥–ª—è —Ä–µ–ª–∞–∫—Å–∞—Ü–∏–∏
                    </label>
                </div>

                <!-- –¢–∏—Ö–∏–µ —á–∞—Å—ã -->
                <div class="setting-group">
                    <label>–í—Ä–µ–º—è –∫–æ–≥–¥–∞ –ù–ï –±–µ—Å–ø–æ–∫–æ–∏—Ç—å</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <div>
                            <label for="quiet-start" class="small-label">–°</label>
                            <input type="time" id="quiet-start">
                        </div>
                        <span>‚Äî</span>
                        <div>
                            <label for="quiet-end" class="small-label">–î–æ</label>
                            <input type="time" id="quiet-end">
                        </div>
                    </div>
                    <span class="hint">–í —ç—Ç–æ –≤—Ä–µ–º—è –±–æ—Ç –Ω–µ –±—É–¥–µ—Ç –ø–∏—Å–∞—Ç—å –ø–µ—Ä–≤—ã–º</span>
                </div>

                <!-- –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö -->
                <div class="setting-group">
                    <h3>üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                    <button id="export-history" class="btn-secondary">
                        üìÑ –°–∫–∞—á–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–ø–∏—Å–∫–∏
                    </button>
                    <button id="export-stats" class="btn-secondary">
                        üìä –°–∫–∞—á–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
                    </button>
                </div>

                <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ -->
                <div class="setting-group">
                    <h3>üë≠ –ü—Ä–∏–≥–ª–∞—Å–∏ –ø–æ–¥—Ä—É–≥—É</h3>
                    <p class="hint">–ü—Ä–∏–≥–ª–∞—Å–∏ –ø–æ–¥—Ä—É–≥—É –∏ –ø–æ–ª—É—á–∏—Ç–µ –æ–±–µ +7 –¥–Ω–µ–π Premium!</p>

                    <div class="referral-code-box">
                        <label class="small-label">–¢–≤–æ—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</label>
                        <div style="display: flex; gap: 5px;">
                            <input type="text" id="referral-link" readonly style="flex: 1;">
                            <button id="copy-referral" class="btn-secondary">üìã</button>
                        </div>
                    </div>

                    <div class="referral-stats">
                        <div class="stat-row">
                            <span>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –ø–æ–¥—Ä—É–≥:</span>
                            <strong id="referral-count">‚Äî</strong>
                        </div>
                        <div class="stat-row">
                            <span>–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–Ω–µ–π Premium:</span>
                            <strong id="referral-bonus">‚Äî</strong>
                        </div>
                        <div class="milestone-box">
                            <span class="small-label">–î–æ —Å–ª–µ–¥—É—é—â–µ–π –Ω–∞–≥—Ä–∞–¥—ã (3 –ø–æ–¥—Ä—É–≥–∏):</span>
                            <div class="progress-bar">
                                <div id="milestone-progress" class="progress-fill"></div>
                            </div>
                        </div>
                    </div>

                    <button id="share-referral" class="btn-primary">
                        üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ Telegram
                    </button>
                </div>

                <button id="save-settings" class="btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
